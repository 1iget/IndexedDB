<!DOCTYPE html>
<html lang='en-US'>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
    <title>Indexed Database API</title>
    <meta name='revision' content='$Id: Overview.html,v 1.41 2010/03/24 17:58:17 nmehta3 Exp $'/>
    <script src='http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js' class='remove'></script>
    <script src='http://dev.w3.org/2009/dap/ReSpec.js/js/simple-node.js' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          specStatus:           "ED",

          shortName:            "IndexedDB",

          //publishDate:          "2010-01-05",

          previousPublishDate:  "2010-01-05",
          previousMaturity:     "WD",

          edDraftURI:           "http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html",

          // if this is a LCWD, uncomment and set the end of its review period
                       // lcEnd: "2009-08-05",

          extraCSS: [
                "http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css",
                "SimpleDB.css"
          ],

          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Nikunj Mehta", url: "mailto:nikunj@o-micron.com",
                company: "Invited Expert" },
          ],

          maxTocLevel: 3,

          wg:           "Web Applications Working Group",

          wgURI:        "http://www.w3.org/2008/webapps/",

          wgPublicList: "public-webapps",

          wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/42538/status",
      };
    </script>
    <script class="remove">
      function examples() {
        var examples = document.querySelectorAll('div.example');
        sn = new berjon.simpleNode({
                        "":     "http://www.w3.org/1999/xhtml",
                        "x":    "http://www.w3.org/1999/xhtml"
                    });
        for (var i = 0; i < examples.length; i++) {
          var example = examples.item(i);
          var header = sn.element('div', {'class': 'exampleHeader'}, null, 'Example');
          example.insertBefore(header, example.firstChild);
        }
      }

      function codeblocks() {
        document.normalize();
        sn = new berjon.simpleNode({
                        "":     "http://www.w3.org/1999/xhtml",
                        "x":    "http://www.w3.org/1999/xhtml"
                    });

        var blocks = document.querySelectorAll('codeblock');
        for (var i = 0; i < blocks.length; i++) {
          var codeblock = blocks.item(i);
          var div = sn.element('div', {'class': 'block'})
          sn.element('span', {'class': 'blockTitle'},
            sn.element('div', {'class': 'blockTitleDiv'}, div), 'ECMAScript');
          var code = sn.element('code', {'class': 'es-code'},
                       sn.element('pre', {'class': 'code'},
                         sn.element('div', {'class': 'blockContent'}, div)));
          sn.copyChildren(codeblock, code);
          codeblock.parentNode.replaceChild(div, codeblock);
        }
      }
      window.onload = function() {
        examples();
        codeblocks();
        (new berjon.respec()).loadAndRun();
      }
    </script>
    <!--[if IE]>
    <style type='text/css'>
      .ignore {
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
        filter: alpha(opacity=50);
      }
    </style>
    <![endif]-->
    <style type="text/css">
      table {
        border-collapse: collapse;
        border-style: hidden hidden none;
      }
      table thead {
        border-bottom: medium solid;
      }
      table td, table th {
        border-bottom: thin solid;
        border-left: medium solid;
        border-right: medium solid;
        padding: 0.2em;
        vertical-align: top;
      }
      h5 {
        display: none
      }
    </style>
  </head>

  <body>
    <section id="abstract">
      <p>
        This document defines APIs for a database of records holding simple values
        and hierarchical objects. Each record consists of a key and some value.
        Moreover, the database maintains indexes over records it stores. An
        application developer directly uses an API to locate records either by
        their key or by using an index. A query language can be layered on this
        API. An indexed database can be implemented using a persistent B-tree data
        structure.
      </p>
    </section>

    <section id="database-api" class="section">
      <h2>Indexed Database API</h2>

      <!-- begin-content -->
      <section class="section" id="async-api"> 
        <h3>Asynchronous APIs</h3>
        <p>
          The asynchronous API methods return without blocking the calling thread.
          All asynchronous operations return an <a><code>IDBRequest</code></a> instance,
          which can be used to access the results of the operation as they become available.
        </p>
        <section class="section" id="events">
          <h4>Event interfaces</h4>
          <p>
            Events are fired during asynchronous access as <a>database</a> 
            <a>objects</a> are created and data is consumed from these objects. 
            As requests are made to <a>database</a> <a>objects</a>, the user 
            agent loads information about them into memory and when the required
            object handle is available, it alerts the application through the
            firing of events. The events are as follows:
          </p>
          <p>The <a><code>IDBEvent</code></a> interface extends
            the <code>Event</code> interface defined in [[!DOM-LEVEL-3-EVENTS]].
          </p>
          <dl class="idl" title="[NoInterfaceObject] interface IDBEvent : Event"> 
            <dt>readonly attribute any source</dt>
            <dd>Returns the asynchronous request object that fired this event.</dd>
          </dl>
          <dl class="idl" title="[NoInterfaceObject] interface IDBSuccessEvent : IDBEvent"> 
            <dt>readonly attribute any result</dt>
            <dd>Returns the result of the successful completion of an asynchronous request
            on the <a class="idlType" href="#widl-IDBEvent-source"><code>source</code></a>.</dd>
          </dl>
          <dl class="idl" title="[NoInterfaceObject] interface IDBTransactionEvent : IDBSuccessEvent"> 
            <dt>readonly attribute IDBTransaction transaction</dt>
            <dd>Returns the transaction used for the request 
            on the <a class="idlType" href="#widl-IDBEvent-source"><code>source</code></a>.</dd>
          </dl>

          <dl class="idl" title="[NoInterfaceObject] interface IDBErrorEvent : IDBEvent"> 
            <dt>readonly attribute unsigned short code</dt>
            <dd>Returns the most appropriate error code from carrying out the asynchronous request
            on the <a class="idlType" href="#widl-IDBEvent-source"><code>source</code></a>. The 
            valid values of this error code are defined on the exception
            <a class="idlType" href="#widl-IDBDatabaseException"><code>IDBDatabaseException</code></a>.</dd>
            <dt>readonly attribute DOMString message</dt>
            <dd>Returns the describing the reason for the error. The message should be localized 
            to the user's language.</dd>
          </dl>

          <dl class="idl" title="[NoInterfaceObject] interface IDBVersionChangeEvent : IDBEvent"> 
            <dt>readonly attribute DOMString version</dt>
            <dd>Returns the new version of the database during a VERSION_CHANGE transaction.
            See the <a>steps for running a <code>VERSION_CHANGE</code> transaction</a>.</dd>
          </dl>

        </section>
        
        <section class="section" id="request-api">
          <h4>The <code>IDBRequest</code> Interface</h4>
          <p>
            The <a><code>IDBRequest</code></a> interface provides means to access results of  
            asynchronous requests to <a title="database">databases</a> and <a>database</a> 
            <a>objects</a> using <a>event handler attributes</a> [[!DOM-LEVEL-3-EVENTS]]. 
          </p>
          <div class="example">       
            <p>
              In the following example, we open a <a>database</a> asynchronously. Various 
              event handlers are registered for responding to various situations.
            </p>
            <codeblock>
 var request = indexedDB.<a>open</a>('AddressBook', 'Address Book');
 request.<a>onsuccess</a> = function(evt) {...};
 request.<a>onerror</a> = function(evt) {...};
            </codeblock>
          </div>
          <dl class="idl" title="[NoInterfaceObject] interface IDBRequest : EventTarget"> 
            <dt>void abort()</dt>
            <dd>This method has no effect if the 
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            is <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>.
            If made on a read request, the implementation discontinues the in-flight request 
            even if the implementation has already read the data, and is ready to fire a
            <a title="event-success">success event</a>. The <a title="event-error">error event</a> 
            is always fired if <a class="idlType" href="#widl-IDBRequest-abort"><code>abort()</code></a> 
            is called, and the <a title="event-success">success event</a> is suppressed.
            The <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            moves to <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>.
            If the request aborts successfully, the
            <a class="idlType" href="#widl-IDBRequest-error"><code>error</code></a> is set
            to <a class="idlType" href="#widl-IDBDatabaseException-UNKNOWN_ERR"><code>UNKNOWN_ERR</code></a>.</dd>
            <dt>const     unsigned short LOADING = 1</dt>
            <dd>This state indicates that a request has been started but its results is not
            yet available.</dd>
            <dt>const     unsigned short DONE = 2</dt>
            <dd>This state indicates that a result to a previous request is available in
            the <a class="idlType" href="#widl-IDBRequest-result"><code>result</code></a> attribute.</dd>
            <dt>readonly attribute unsigned short readyState</dt>
            <dd>Every request starts in the 
            <a class="idlType" href="#widl-IDBRequest-LOADING"><code>LOADING</code></a> state.
            When either the request completes, fails or aborts successfully, the state changes to 
            <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>.</dd>
            <dt>attribute Function onsuccess</dt>
            <dd>The event handler for the <a title="event-success">success event</a></dd>
            <dt>attribute Function onerror</dt>
            <dd>The event handler for the <a title="event-error">error event</a></dd>
          </dl>
          <p>
            When a request is made, the 
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a> changes to 
            <a class="idlType" href="#widl-IDBRequest-LOADING"><code>LOADING</code></a>. 
            If a request completes successfully, the
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            changes to <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>, 
            the result of the request is included as the 
            <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> of
            a new <a class="idlType" href="#widl-IDBSuccessEvent"><code>IDBSuccessEvent</code></a> 
            event, and <a>queue a task</a> to fire that event with the name <code>success</code>, 
            with no namespace, which does not bubble, is not cancelable at each 
            <a class="externalDFN"><code>Window</code></a> object.
          </p>
          <p>
            If an error occurs while performing the operation, the 
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            changes to <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>, 
            the error code and message are included in a new <a><code>IDBDatabaseError</code></a>
            event, and <a>queue a task</a> to fire that event with the name 
            <code>error</code>, with no namespace, which does not bubble, is 
            not cancelable at each <a class="externalDFN"><code>Window</code></a> object.
          </p>
           
          <p>
            The <span>task source</span> for these tasks is the 
            <dfn id="database-access-task-source">database access task source</dfn>.
          </p>    
          <p>
            The following are the <span>event handlers</span> (and their corresponding 
            <span>event handler event types</span>) that MUST be supported, as IDL
            attributes, by objects implementing the <a><code>IDBRequest</code></a> interface:
          </p>
          
          <table>
            <thead><tr>
              <th><span>Event handler</span> </th>
              <th><span>Event handler event type</span></th>
              <th><span>Event interface(s)</span></th>
            </tr></thead>
            <tbody>
              <tr>
                <td><dfn id="handler-request-onsuccess"><code>onsuccess</code></dfn> </td>
                <td> <code><dfn title="event-success">success</dfn></code></td>
                <td> <a class="idlType" href="#widl-IDBSuccessEvent"><code>IDBSuccessEvent</code></a>,
                <a class="idlType" href="#widl-IDBTransactionEvent"><code>IDBTransactionEvent</code></a></td>
              </tr>
              <tr>
                <td><dfn id="handler-request-onerror"><code>onerror</code></dfn> </td>
                <td> <code><dfn title="event-error">error</dfn></code></td>
                <td> <a class="idlType" href="#widl-IDBErrorEvent"><code>IDBErrorEvent</code></a></td>
              </tr>
            </tbody>
          </table>        

          <p>
            The following are the <span>event handlers</span> (and their corresponding 
            <span>event handler event types</span>) that MUST be supported, as IDL
            attributes, by objects implementing the <a><code>IDBTransaction</code></a> interface:
          </p>
          
          <table>
            <thead><tr>
              <th><span>Event handler</span> </th>
              <th><span>Event handler event type</span></th>
            </tr></thead>
            <tbody>
              <tr>
                <td><dfn id="handler-request-oncomplete"><code>oncomplete</code></dfn> </td>
                <td> <code><dfn title="event-complete">complete</dfn></code></td>
              </tr>
              <tr>
                <td><dfn id="handler-request-onabort"><code>onabort</code></dfn> </td>
                <td> <code><dfn title="event-abort">abort</dfn></code></td>
              </tr>
              <tr>
                <td><dfn id="handler-request-ontimeout"><code>ontimeout</code></dfn> </td>
                <td> <code><dfn title="event-timeout">timeout</dfn></code></td>
              </tr>
            </tbody>
          </table>        
        </section>
        
        <section class="section" id="requests">
          <h4>Opening a database</h4>
         <p>
            <a title="Window" class="externalDFN"><code>Window</code></a> and 
            <a title="Worker" class="externalDFN"><code>Worker</code></a> objects 
            MUST implement the <a><code>IDBEnvironment</code></a> interface.
          </p>
          <p class="idl" title="Window implements IDBEnvironment">
          <p class="idl" title="Worker implements IDBEnvironment">
          </p>
          
          <dl class="idl" title="[NoInterfaceObject] interface IDBEnvironment">
            <dt>readonly attribute IDBFactory indexedDB</dt>
            <dd>This attribute provides applications a mechanism for accessing
              capabilities of indexed databases.</dd>
          </dl>
          <p>
            Every method for making asynchronous requests returns an 
            <a><code>IDBRequest</code></a> object that communicates back to the requesting
            application through events.
            This design means that any number of requests can be active on any <a>database</a>
            or <a title="objects">object</a> handle at a time. 
          </p>

          <dl class="idl" title="[NoInterfaceObject] interface IDBFactory">
            <dt>readonly attribute DOMStringList databases</dt>
            <dd>
            This value is the list of the names of databases available in the global scope object.
            </dd>
            <dt>IDBRequest open()</dt>
            <dd>
              <p>
                This method returns immediately and runs the
                following steps in a different thread.
                If an error occurs while the <a>database</a> <a>connection</a> 
                is being opened, then an
                <a title="event-error">error event</a> is fired on this method's
                returned object with its 
                <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set
                to <a class="idlType" href="#widl-IDBDatabaseException-UNKNOWN_ERR"><code>UNKNOWN_ERR</code></a>
                and a suitable 
                <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              </p>
    
              <ol>
                <li>
                  Let <var>origin</var> be the origin of the active document 
                  from which the method was invoked.                
                </li>
                <li>
                  Perform the <a>steps for opening a database</a>, with 
                  <var>origin</var>, the <var>name</var> parameter and 
                  <var>description</var> parameter, and call its result as 
                  <var>result</var>.
                </li>
                <li>
                  If the steps were aborted with an error code, then set this 
                  request's <a class="idlType" href="#widl-IDBRequest-error"><code>error</code></a> with that 
                  code and abort these steps.
                </li>
                <li>
                  Create a <a><code>IDBDatabase</code></a> object for <var>result</var>
                  and call it <var>db</var>.
                </li>
                <li>
                  Fire a <a title="event-success">success event</a> on this 
                  method's returned object using the <a><code>IDBSuccessEvent</code></a> interface with its 
                  <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> 
                  set to <var>db</var>.
              </ol>              
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The <a title="database name">name</a> for the <a>database</a></dd>
                <dt>DOMString description</dt>
                <dd>The description for the <a>database</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NON_TRANSIENT_ERR</dt>
                <dd>if the <var>name</var> parameter is not <a>valid</a></dd>
              </dl>
            </dd>
          </dl>
        </section>
        <section id="database-interface" class="section">
          <h4>Database</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            A <a>database</a> object can be used to manipulate the 
            <a>objects</a> of that <a>database</a>. That is also the only way to 
            obtaining a <a>transaction</a> for that <a>database</a>.
          </p>
          <dl class="idl" title="[NoInterfaceObject] interface IDBDatabase">
            <dt>readonly attribute DOMString name</dt>
            <dd>
              On getting, this attribute MUST return the <a title="database name">name</a>
              of the <a title="connection">connected</a> <a>database</a>.
            </dd>
            <dt>readonly attribute DOMString description</dt>  
            <dd>
              On getting, this attribute MUST return the description of the
              <a title="connection">connected</a> <a>database</a> at the time of opening.
            </dd>
            <dt>readonly attribute DOMString version</dt>
            <dd>
              On getting, this attribute MUST return the <a>version</a> of this
              <a>database</a>. This attribute has the <a>null</a> value when the
              <a title="connection">connected</a> <a>database</a> is first created.
            </dd>
            <dt>readonly attribute DOMStringList objectStores</dt>
            <dd>
              On getting, this attribute MUST return a list of names of the 
              <a title="object store">object stores</a> currently in the 
              <a title="connection">connected</a> <a>database</a>.
            </dd>
            <!-- There is no currentTransaction any more.
            <dt>readonly attribute IDBTransaction currentTransaction</dt>
            <dd>
              On getting, this attribute MUST return a <a><code>IDBTransaction</code></a> object
              corresponding to the <a>transaction</a> that is <a>active</a> in this
              <a>database</a> <a>connection</a>.
            </dd> -->
            <dt>IDBObjectStore createObjectStore()</dt>
            <dd>
              <p>
                This method creates and returns a new <a>object store</a> with the given name in the 
                <a title="connection">connected</a> <a>database</a>. Note that this method must only
                be called from a <a><code>VERSION_CHANGE</code></a> <a>transaction</a> callback.
              </p>
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The <a title="object store name">name</a> of a new <a>object store</a></dd>
                <dt>[TreatNullAs=EmptyString] optional DOMString keyPath</dt>
                <dd>The <a title="object store key path">key path</a> of a new 
                <a>object store</a>. If <a>empty</a> path is specified, then the 
                <a>object store</a> created will not have a <a>key path</a> and will
                use <a>out-of-line keys</a>.</dd>
                <dt>optional boolean autoIncrement</dt>
                <dd>Whether the <a>object store</a> created should have a 
                <a>key generator</a>. This defaults to <code>true</code>.</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This method was not called from a <a><code>VERSION_CHANGE</code></a> <a>transaction</a> callback.</dd>
                <dt>CONSTRAINT_ERR</dt>
                <dd>An <a>object store</a> with the same name, compared in a 
                case-sensitive manner, already exists in the 
                <a title="connection">connected</a> <a>database</a>. </dd>
              </dl>
            </dd>
            <dt>IDBObjectStore objectStore()</dt>
            <dd>
              This method implicitly creates a <a>transaction</a> and opens the 
              <a>object store</a> with the given name in the 
              <a title="connection">connected</a> <a>database</a> as the
              <a>transaction</a>'s <a>static</a> <a>scope</a>.
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The <a title="object store name">name</a> of an existing 
                <a>object store</a></dd>
                <dt>optional unsigned short mode</dt>
                <dd>The <a>mode</a> used to access the <a>object store</a>, which defaults to 
                <code>READ_ONLY</code>.</dd>
                <dt>optional unsigned long timeout</dt>
                <dd>The interval which this operation is allowed to take to
                reserve all the <a>database</a> objects identified in the new
                <a title="transaction">transaction's</a> <a>scope</a>. The default
                is user agent specific.</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_FOUND_ERR</dt>
                <dd>There is no <a>object store</a> with the given name, compared in a 
                case-sensitive manner, in the <a title="connection">connected</a> <a>database</a>.</dd>
              </dl>
            </dd>
            <dt>void removeObjectStore()</dt>
            <dd>
              <p>
                This method destroys the <a>object store</a> with the given name in the 
                <a title="connection">connected</a> <a>database</a> as well as 
                all <a title="index">indexes</a> that are 
                <a title="referenced">referencing</a> that <a>object store</a>.
                Note that this method must only be called from a <a><code>VERSION_CHANGE</code></a>
                <a>transaction</a> callback.
              </p>
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The <a title="object store name">name</a> of an existing
                <a>object store</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This method was not called from a <a><code>VERSION_CHANGE</code></a> <a>transaction</a> callback.</dd>
                <dt>NOT_FOUND_ERR</dt>
                <dd>There is no <a>object store</a> with the given name, compared in a 
                case-sensitive manner, in the  <a title="connection">connected</a> <a>database</a>.</dd>
              </dl>
            </dd>
            <dt>IDBRequest setVersion()</dt>
            <dd>
              This method returns immediately and sets the <a>version</a> of the 
              <a title="connection">connected</a> <a>database</a> by following the
              <a>steps for running a <code>VERSION_CHANGE</code> transaction</a>. 
              <dl class="parameters">
                <dt>[TreatNullAs=EmptyString] DOMString      version</dt>
                <dd>The <a>version</a> to store in the <a>database</a></dd>
              </dl>
            </dd>
            <dt>IDBTransaction transaction()</dt>
            <dd> This method returns an <a><code>IDBTransaction</code></a> object immediately and 
              performs the <a title="create a static transaction">steps for creating a transaction</a> with either the list of 
              <a>object store</a> <a title="object store name">names</a>
              for acquiring locks required in this <a>transaction</a> or the 
              global flag set to true, and an optional timeout duration. The global flag is set only if 
              the list is either empty, not passed or passed as  <code>null</code>. If reserving all the 
              <a>object store</a>s identified in the requested <a>scope</a>
              takes longer than the specified timeout interval, then an
              <a title="event-timeout">timeout event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-TIMEOUT_ERR"><code>TIMEOUT_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              <dl class="parameters">
                <dt>optional DOMStringList storeNames</dt>
                <dd>The names of <a title="object store">object stores</a> and 
                <a title="index">indexes</a> in the <a>scope</a> of the new
                <a>transaction</a></dd>
                <dt>optional unsigned short mode</dt>
                <dd> The <a>mode</a> for isolating access to data inside the given
                <a title="object store">object stores</a>. If this parameter is not provided, the default
                access <a>mode</a> is <code>READ_ONLY</code>.</dd>
                <dt>optional unsigned long timeout</dt>
                <dd>The interval, specified in milliseconds, which this operation is allowed to take to
                reserve all the <a>database</a> objects identified in the new
                <a title="transaction">transaction's</a> <a>scope</a>. The default
                is user agent specific</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>TIMEOUT_ERR</dt>
                <dd>The required locks could not be acquired in the given timeout interval</dd>
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>The <code>close()</code> method has been called on this IDBDatabase instance and
                its internal <code>closePending</code> flag is set.</dd>
              </dl>
            </dd>
            <dt>void close()</dt>
            <dd>
              This method returns immediately and performs the <a>steps for closing a database connection</a>.
            </dd>
          </dl>
        </section>
        <section class="section" id="object-store">
          <h4>Object Store</h4>
          <a title="object store">Object store</a> objects implement the following
          interface:
          <dl class="idl" title="[NoInterfaceObject] interface IDBObjectStore">
            <dt>readonly attribute DOMString      name</dt>
            <dd>          
              On getting, provide the <a title="object store name">name</a> of this
              object store.        
            </dd>
            <dt>readonly attribute DOMString      keyPath</dt>
            <dd>
              On getting, provide the <a title="object store key path">key path</a>
              of this <a>object store</a>. If this attribute is <code>null</code>,
              the application MUST provide a key value for each modification operation.
            </dd>
            <dt>readonly attribute DOMStringList  indexNames</dt>
            <dd>
            On getting, provide a list of the names of <a title="index">indexes</a> on 
            objects in this <a>object store</a>.
            </dd>
            <dt>IDBRequest put()</dt>
            <dd>
              This method returns immediately and stores the given value in this 
              <a>object store</a> by following the 
              <a>steps for storing a record into an object store</a>. If the 
              <a>record</a> can be successfully stored in the <a>object store</a>, then 
              a <a title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the key for the stored <a>record</a> and 
              <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a>transaction</a> in which this <a>object store</a> is 
              opened.
              <dl class="parameters">
                <dt>any value</dt>
                <dd>The value to be stored in the <a>record</a></dd>
                <dt>optional any key</dt>
                <dd>The key used to identify the <a>record</a>, which defaults 
                to <code>null</code></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a> or
                the associated <a>transaction</a> <a><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</dd>
                <dt>DATA_ERR</dt>
                <dd>This <a>object store</a> uses <a>out-of-line keys</a> and
                no <a>key generator</a> but the <var>key</var> parameter was not
                passed, or the <a>object store</a> uses <a>in-line keys</a> and
                no <a>key generator</a> but the <var>value</var> object does not
                have a property identified by the store's 
                <a title="object store key path">key path</a>.</dd>
                <dt>SERIAL_ERR</dt>
                <dd>The data being stored could not be serialized by the internal
                structured cloning algorithm.</dd>
              </dl>
            </dd>
            <dt>IDBRequest add()</dt>
            <dd>
              This method returns immediately and stores the given value in this 
              <a>object store</a> by following the 
              <a>steps for storing a record into an object store</a> with the 
              no-overwrite flag set. If the <a>record</a> can be successfully 
              stored in the <a>object store</a>, then a 
              <a title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the key for the stored record and 
              <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a>transaction</a> in which this <a>object store</a> is 
              opened. If a <a>record</a> exists in this <a>object store</a> for 
              the key <var>key</var> parameter, then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code></a>
              <dl class="parameters">
                <dt>any value</dt>
                <dd>The value to be stored in the <a>record</a></dd>
                <dt>optional any key</dt>
                <dd>The key used to identify the <a>record</a>, which defaults 
                to <code>null</code></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a> or
                the associated <a>transaction</a> <a><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</dd>
                <dt>DATA_ERR</dt>
                <dd>This <a>object store</a> uses <a>out-of-line keys</a> and
                no <a>key generator</a> but the <var>key</var> parameter was not
                passed, or the <a>object store</a> uses <a>in-line keys</a> and
                no <a>key generator</a> but the <var>value</var> object does not
                have a property identified by the store's
                <a title="object store key path">key path</a>.</dd>
                <dt>SERIAL_ERR</dt>
                <dd>The data being stored could not be serialized by the internal
                structured cloning algorithm.</dd>
              </dl>
            </dd>
            <dt>IDBRequest remove()</dt>
            <dd>
              This method returns immediately and removes the <a>record</a> from 
              this <a>object store</a> by following the 
              <a>steps for deleting a record from an object store</a> 
              corresponding to the given key. If a <a>record</a> did not exist 
              in this <a>object store</a> for the <var>key</var> parameter, 
              then an <a title="event-error">error event</a> is fired on this 
              method's returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>. If the <a>record</a> can be successfully 
              removed from the <a>object store</a>, then a 
              <a title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the value of the removed <a>record</a> and <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a>transaction</a> in which this <a>object store</a> is 
              opened. 
              <dl class="parameters">
                <dt>any key</dt>
                <dd>Key identifying the <a>record</a> to be removed</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a> or
                the associated <a>transaction</a> <a><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</dd>
              </dl>
            </dd>
            <dt>IDBRequest get()</dt>
            <dd>
              This method returns immediately and retrieves the value from this 
              <a>object store</a> for the record corresponding to the given key 
              by following the 
              <a>steps for retrieving a record from an object store</a>. 
              If the operation is successful, then the 
              <a class="idlType" href="#widl-IDBRequest-result"><code>result</code></a> of this object's request
              is set to the retrieved value. If a record did not exist in this 
              <a>object store</a> for the key <var>key</var> parameter, then an 
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>. If the <a>record</a> can be successfully 
              retrieved from the <a>object store</a>, then a 
              <a title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the value of the retrieved <a>record</a> and <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a>transaction</a> in which this <a>object store</a> is 
              opened. 
              <dl class="parameters">
                <dt>any key</dt>
                <dd>Key identifying the <a>record</a> to be retrieved</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a>.</dd>
              </dl>
            </dd>
            <dt>IDBRequest openCursor()</dt>
            <dd>
              This method returns immediately and creates a <a>cursor</a> over the 
              <a>records</a> of this <a>object store</a>. The <a>range</a> of this
              <a>cursor</a> matches the <a>key range</a> specified as the
              <var>range</var> parameter, or if that parameter is not specified or
              <code>null</code>, then the range includes all the <a>records</a>. 
              If there is even a single record that matches the <a>key range</a>, then a
              <a title="event-success">success event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to the
              <a><code>IDBCursor</code></a> object for that <a>cursor</a>. If no
              records match the <a>key range</a>, then an 
              <a title="event-success">success event</a> is fired on this method's
              returned object with its
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a>
              set to <code>null</code>.
              <dl class="parameters">
                <dt>optional IDBKeyRange    range</dt>
                <dd>The <a>key range</a> to use as the <a>cursor</a>'s <a>range</a></dd>
                <dt>optional unsigned short direction</dt>
                <dd>The <a>cursor</a>'s required <a>direction</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a>.</dd>
              </dl>
            </dd>
            <dt>IDBIndex createIndex()</dt>
            <dd>
              <p>
                This creates and returns a new <a>index</a> with the given name and parameters in the 
                <a title="connection">connected</a> <a>database</a>.  Note that this method must only
                be called from a <a><code>VERSION_CHANGE</code></a> <a>transaction</a> callback.
              </p>
              <dl class="parameters">
                <dt>DOMString      name</dt>
                <dd>The <a title="index name">name</a> of a new <a>index</a></dd>
                <!-- this is removed because it is implicit on the store
                <dt>DOMString      storeName</dt>
                <dd>The <a title="object store name">name</a> of an existing
                <a>object store</a> <a>referenced</a> by the new <a>index</a></dd>-->
                <dt>DOMString      keyPath</dt>
                <dd>The <a title="index key path">key path</a> used by the new
                <a>index</a></dd>
                <dt>optional boolean unique</dt>
                <dd>The <a>unique</a> flag for the new <a>index</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This method was not called from a <a><code>VERSION_CHANGE</code></a> 
                <a>transaction</a> callback.</dd>
                <dt>CONSTRAINT_ERR</dt>
                <dd>An <a>index</a> with the same name, compared in a 
                case-sensitive manner, already exists in the 
                <a title="connection">connected</a> <a>database</a>. </dd>
              </dl>
            </dd>
            <dt>IDBIndex index()</dt>
            <dd>
              <p>
                This method returns immediately and opens the <a>index</a> with the
                given name in the <a title="connection">connected</a> <a>database</a>.
              </p>              
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The <a title="index name">name</a> of an existing <a>index</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_FOUND_ERR</dt>
                <dd>There is no <a>index</a> with the given name, compared in a 
                case-sensitive manner, in the <a title="connection">connected</a> <a>database</a>.</dd>
              </dl>
            </dd>
            <dt>void removeIndex()</dt>
            <dd>
              <p>
                This method destroys the <a>index</a> with the given name in the
                <a title="connection">connected</a> <a>database</a>. Note that this
                method must only be called from a <a><code>VERSION_CHANGE</code></a>
                <a>transaction</a> callback.
              </p>
              <dl class="parameters">
                <dt>DOMString indexName</dt>
                <dd>The <a title="index name">name</a> of an existing <a>index</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This method was not called from a <a><code>VERSION_CHANGE</code></a>
                <a>transaction</a> callback.</dd>
                <dt>NOT_FOUND_ERR</dt>
                <dd>There is no <a>index</a> with the given name, compared in a 
                case-sensitive manner, in the  <a title="connection">connected</a> <a>database</a>.</dd>
              </dl>
            </dd>
          </dl>
        </section>
        <section class="section" id="index">
        <h4>Index</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            <a title="index">Index</a> objects implement the following interface:
          </p>
          <dl class="idl" title="[NoInterfaceObject] interface IDBIndex">
            <dt>readonly attribute DOMString      name</dt>
            <dd>
              On getting, provide the <a title="index name">name</a> of this <a>index</a>.        
            </dd>
            <dt>readonly attribute DOMString      storeName</dt>
            <dd>
              On getting, provide the <a title="object store name">name</a> of this
              <a title="index">index's</a> <a>referenced</a> <a>object store</a>.
            </dd>
        
            <dt>readonly attribute DOMString      keyPath</dt>
            <dd>
              On getting, provide the <a title="index key path">key path</a> of this
              <a>index</a>. If this attribute is <code>null</code>,
              this <a>index</a> is not <a>auto-populated</a>.
            </dd>
            
            <dt>readonly attribute boolean unique</dt>
            <dd>
              On getting, provide the <a>unique</a> flag of this <a>index</a>.
            </dd>
            <dt>IDBCursor openObjectCursor()</dt>
            <dd>
              This method returns immediately and creates a <a>cursor</a> over the 
              <a>records</a> of this <a>index</a>'s <a>referenced</a> <a>object store</a> 
              as arranged by this <a>index</a>. The <a>range</a> of this <a>cursor</a> 
              matches the <a>key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>.
              If there is even a single record that matches the <a>key range</a>, then a
              <a title="event-success">success event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to the
              <a><code>IDBCursor</code></a> object for that <a>cursor</a>. If no
              records match the <a>key range</a>, then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              <dl class="parameters">
                <dt>optional IDBKeyRange    range</dt>
                <dd>The <a>key range</a> to use as the <a>cursor</a>'s <a>range</a></dd>
                <dt>optional unsigned short direction</dt>
                <dd>The <a>cursor</a>'s required <a>direction</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a>.</dd>
              </dl>
            </dd>
            <dt>IDBRequest openCursor()</dt>
            <dd>
              This method returns immediately and creates a <a>cursor</a> over the 
              <a>records</a> of this <a>index</a>. The <a>range</a> of this <a>cursor</a>
              matches the <a>key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>. 
              If there is even a single record that matches the <a>key range</a>, then a
              <a title="event-success">success event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to the 
              <a><code>IDBCursor</code></a> object for that <a>cursor</a>. If no
              records match the <a>key range</a>, then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              <dl class="parameters">
                <dt>optional IDBKeyRange    range</dt>
                <dd>The <a>key range</a> to use as the <a>cursor</a>'s <a>range</a></dd>
                <dt>optional unsigned short direction</dt>
                <dd>The <a>cursor</a>'s required <a>direction</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a>.</dd>
              </dl>
            </dd>
            <dt>IDBRequest getObject()</dt>
            <dd>
              This method returns immediately and retrieves the value from this <a>index</a>'s
              <a>referenced</a> <a>object store</a> for the record corresponding to the given
              key by following the <a>steps for retrieving a record from an index</a>.
              If the operation is successful, then the 
              <a class="idlType" href="#widl-IDBRequest-result"><code>result</code></a> of this object's request
              is set to the retrieved value. If a record did not exist in this 
              <a>index</a> for the key <var>key</var> parameter, then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              <dl class="parameters">
                <dt>any key</dt>
                <dd>Key identifying the record to be retrieved</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a>.</dd>
              </dl>
            </dd>
            <dt>IDBRequest get()</dt>
            <dd>
              This method returns immediately and retrieves the value from this <a>index</a>
              for the record corresponding to the given <var>key</var> parameter by 
              following the <a>steps for retrieving a value from an index</a>.
              If the operation is successful, then the 
              <a class="idlType" href="#widl-IDBRequest-result"><code>result</code></a> of this object's request
              is set to the retrieved value. If a record did not exist in this 
              <a>index</a> for the key <var>key</var> parameter, then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              <dl class="parameters">
                <dt>any key</dt>
                <dd>Key identifying the record to be retrieved</dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a>.</dd>
              </dl>
            </dd>
          </dl>
        </section>
        <section class="section" id="cursor">
          <h4>Cursor</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            <a title="cursor">Cursor</a> objects implement the following interface:
          </p>
          <dl class="idl" title="[NoInterfaceObject] interface IDBCursor">
  <dt>const     unsigned short     NEXT = 0</dt>
            <dd>
              indicates that this <a>cursor</a> should yield all records, including  
              duplicates and its <a>direction</a> is monotonically increasing 
              order of keys.
            </dd>
            <dt>const     unsigned short     NEXT_NO_DUPLICATE = 1</dt>
            <dd>
              indicates that this <a>cursor</a> should yield all records, not including
              duplicates and its <a>direction</a> is monotonically increasing 
              order of keys. For every key with duplicate values, only the first
              record is yielded.
            </dd>
            <dt>const     unsigned short     PREV = 2</dt>
            <dd>
              indicates that <a>cursor</a> should yield all records, including  
              duplicates and its <a>direction</a> is monotonically decreasing 
              order of keys.
            </dd>
            <dt>const     unsigned short     PREV_NO_DUPLICATE = 3</dt>
            <dd>
              indicates that this <a>cursor</a> should yield all records, not including
              duplicates and its <a>direction</a> is monotonically decreasing 
              order of keys. For every key with duplicate values, only the first
              record is yielded.
            </dd>

            <dt>readonly attribute unsigned short     direction</dt>
            <dd>            
            On getting, provide the traversal <a>direction</a> of the <a>cursor</a>.
            </dd>
            <dt>readonly attribute any key</dt>
            <dd>The key for the record at the <a>cursor</a>'s <a>position</a>.</dd>
            <dt>readonly attribute any value</dt>
            <dd>The value for the record at the <a>cursor</a>'s <a>position</a>.</dd>
            <dt>readonly attribute unsigned long long count</dt>
            <dd>             
              On getting, provide the approximate number of objects in the cursor.
            </dd>
            <dt>IDBRequest update(in any value)</dt>
            <dd>
              This method returns immediately and sets the value for the record at the
              <a>cursor</a>'s <a>position</a>.
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a> or
                the associated <a>transaction</a> <a><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</dd>
                <dt>DATA_ERR</dt>
                <dd> The underlying <a>object store</a> uses <a>in-line keys</a> and the property at the 
                <a title="object store key path">key path</a> does not match the key in this <a>cursor</a>'s
                <a>position</a>.</dd>
                <dt>SERIAL_ERR</dt>
                <dd>The data being stored could not be serialized by the internal structured cloning
                algorithm.</dd>
              </dl>
            </dd>
            <dt>boolean    continue()</dt>
            <dd>
              This method returns immediately and advances the <a>cursor</a> to the next
              position along its <a>direction</a> to the item whose key matches the
              optional parameter. If no such parameter is provided, advance to the
              immediate next position. If the <a>cursor</a> has reached the end of its
              <a>range</a>, then an
              <a title="event-success">success event</a> is fired on this method's
              returned object with its
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a>
              set to <code>null</code>.
              <dl class="parameters">
                <dt>optional any key</dt>
                <dd>The next key to position this <a>cursor</a> at</dd>
              </dl>
            </dd>
            
            <dt>IDBRequest    remove()</dt>
            <dd>          
              <p>
                This method returns immediately and deletes the object at the 
                <a>cursor</a>'s <a>position</a>. The cursor's
                position is not changed. Any attempts to retrieve the cursor's
                current value will return <code>null</code>.
              </p>
              <dl class="exception" title="IDBDatabaseException">
                <dt>NOT_ALLOWED_ERR</dt>
                <dd>This <a>object store</a> is not in the <a>scope</a> of any existing <a>transaction</a> or
                the associated <a>transaction</a> <a><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</dd>
              </dl>
            </dd>
          </dl>
        </section>
        <section class="section" id="transaction">
        <h4>Transaction</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            <a title="transaction">Static transaction</a> objects implement the following interface:
          </p>
          <dl class="idl" title="[NoInterfaceObject] interface IDBTransaction : EventTarget">
            <dt>const     unsigned short READ_WRITE    = 0</dt>
            <dd>Modification operations are allowed in the <a>transactions</a>
            in this mode.</dd>
            <dt>const     unsigned short READ_ONLY    = 1</dt>
            <dd>Modification operations are not allowed in the <a>transaction</a>
            in this mode.</dd>
            <dt>const     unsigned short SNAPSHOT_READ = 2</dt>
            <dd>This mode is used solely for reading from a snapshot of the data
            in the <a title="object store">object stores</a> that are in the
            <a>scope</a> of the <a>transaction</a>.</dd>
            <dt>const     unsigned short VERSION_CHANGE = 3</dt>
            <dd>This mode is used solely for updating the version number of
            transactions started using the <code>setVersion()</code> method of <a><code>IDBDatabase</code></a>.</dd>
            <dt>readonly attribute unsigned short mode</dt>
            <dd>On getting, provide the <a>mode</a> for isolating access to data inside
            the <a title="object store">object stores</a> that are in the
            <a>scope</a> of the <a>transaction</a>.</dd>
            <dt>readonly attribute IDBDatabase db</dt>
            <dd>The <a>database</a> <a>connection</a> of which this <a>transaction</a>
              is a part
            </dd>
            <dt>IDBObjectStore objectStore()</dt>
            <dd>
              Immediately returns the object store that has been already added 
              to the <a>scope</a> of this <a>transaction</a>. 
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The requested <a>object store</a></dd>
              </dl>
              <dl class="exception" title="IDBDatabaseException">
                <dt><a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a></dt>
                <dd>
                If the requested <a>object store</a> is not in this 
                <a>transaction</a>'s <a>scope</a>.
                </dd>
              </dl>
            </dd>
            <dt>void abort()</dt>
            <dd>
              This method returns immediately and undoes all the changes performed to 
              the <a>objects</a> of this <a>database</a> in this <a>transaction</a>. If this <a>transaction</a> 
              has already been committed or aborted,  then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NON_TRANSIENT_ERR"><code>NON_TRANSIENT_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
            </dd>
            <dt>attribute Function onabort</dt>
            <dd>The event handler for the <a>onabort</a> event.</dd>
            <dt>attribute Function oncomplete</dt>
            <dd>The event handler for the <a>oncomplete</a> event.</dd>
            <dt>attribute Function ontimeout</dt>
            <dd>The event handler for the <a>ontimeout</a> event.</dd>
          </dl>

          <p>
            <a title="dynamic transaction">Dynamic transaction</a> objects implement the following interface:
          </p>
          <dl class="idl" title="[NoInterfaceObject] interface IDBDynamicTransaction : EventTarget">
            <dt>readonly attribute IDBDatabase db</dt>
            <dd>The <a>database</a> <a>connection</a> of which this <a>transaction</a> is a part.</dd>
            <dt>IDBRequest openObjectStore()</dt>
            <dd>
              Returns immediately and then attempts to lock the requesed <a>object store</a> in the given <a>mode</a>. 
              <dl class="parameters">
                <dt>DOMString name</dt>
                <dd>The requested <a>object store</a>.</dd>
                <dt>optional unsigned short mode</dt>
                <dd>The <a>mode</a> for isolating access to the <a>object store</a>, which defaults to 
                <code>READ_ONLY</code>.</dd>
              </dl>
            </dd>
            <dt>void abort()</dt>
            <dd>
              This method returns immediately and undoes all the changes performed to 
              the <a>objects</a> of this <a>database</a> in this <a>transaction</a>. If this <a>transaction</a> 
              has already been committed or aborted,  then an
              <a title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NON_TRANSIENT_ERR"><code>NON_TRANSIENT_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
            </dd>
            <dt>attribute Function onabort</dt>
            <dd>The event handler for the <a>onabort</a> event.</dd>
            <dt>attribute Function oncomplete</dt>
            <dd>The event handler for the <a>oncomplete</a> event.</dd>
            <dt>attribute Function ontimeout</dt>
            <dd>The event handler for the <a>ontimeout</a> event.</dd>
          </dl>
          <div class="issue">
            <p>Finish the dynamic transaction IDL and define the behavior of dynamic transactions.</p>
          </div>
        </section>
      </section>
      <!-- end-content -->
    </section>
  </body>
</html>
