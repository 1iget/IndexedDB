<!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<html dir="ltr" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Indexed Database API</title>
    <meta name="revision" content="$Id: Overview.html,v 1.41 2010/03/24 17:58:17 nmehta3 Exp $">
    
    
    
    <!--[if IE]>
    <style type='text/css'>
      .ignore {
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
        filter: alpha(opacity=50);
      }
    </style>
    <![endif]-->
    <style type="text/css">
      table {
        border-collapse: collapse;
        border-style: hidden hidden none;
      }
      table thead {
        border-bottom: medium solid;
      }
      table td, table th {
        border-bottom: thin solid;
        border-left: medium solid;
        border-right: medium solid;
        padding: 0.2em;
        vertical-align: top;
      }
      h5 {
        display: none
      }
    </style>
  <style type="text/css">
/*****************************************************************
 * ReSpec CSS
 * Robin Berjon (robin at berjon dot com)
 * v0.05 - 2009-07-31
 *****************************************************************/


/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  medium solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  medium dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

code {
    color:  #ff4500;
}


/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID {
    font-weight:    bold;
    color:  #005a9c;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.fields {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .fields dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .fields dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.attributes dd, .methods dd, .constants dd, .fields dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}

/* --- TOC --- */
.toc a {
    text-decoration:    none;
}

a .secno {
    color:  #000;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

/* --- EXAMPLES --- */
pre.example {
    border-top: 1px solid #ff4500;
    border-bottom: 1px solid #ff4500;
    padding:    1em;
    margin-top: 1em;
}

pre.example::before {
    content:    "Example";
    display:    block;
    width:      150px;
    background: #ff4500;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

/* --- EDITORIAL NOTES --- */
.issue {
    padding:    1em;
    border: 1px solid #f00;
    background: #ffc;
}

.issue::before {
    content:    "Issue";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #f00;
    background: #fff;
    padding:    3px 1em;
}

.note {
    padding:    1em;
    border: 2px solid #cff6d9;
    background: #e2fff0;
}

.note::before {
    content:    "Note";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #cff6d9;
    background: #fff;
    padding:    3px 1em;
}

/* --- SYNTAX HIGHLIGHTING --- */
pre.sh_sourceCode {
  background-color: white;
  color: black;
  font-style: normal;
  font-weight: normal;
}

pre.sh_sourceCode .sh_keyword { color: #005a9c; font-weight: bold; }           /* language keywords */
pre.sh_sourceCode .sh_type { color: #666; }                            /* basic types */
pre.sh_sourceCode .sh_usertype { color: teal; }                             /* user defined types */
pre.sh_sourceCode .sh_string { color: red; font-family: monospace; }        /* strings and chars */
pre.sh_sourceCode .sh_regexp { color: orange; font-family: monospace; }     /* regular expressions */
pre.sh_sourceCode .sh_specialchar { color: 	#ffc0cb; font-family: monospace; }  /* e.g., \n, \t, \\ */
pre.sh_sourceCode .sh_comment { color: #A52A2A; font-style: italic; }         /* comments */
pre.sh_sourceCode .sh_number { color: purple; }                             /* literal numbers */
pre.sh_sourceCode .sh_preproc { color: #00008B; font-weight: bold; }       /* e.g., #include, import */
pre.sh_sourceCode .sh_symbol { color: blue; }                            /* e.g., *, + */
pre.sh_sourceCode .sh_function { color: black; font-weight: bold; }         /* function calls and declarations */
pre.sh_sourceCode .sh_cbracket { color: red; }                              /* block brackets (e.g., {, }) */
pre.sh_sourceCode .sh_todo { font-weight: bold; background-color: #00FFFF; }   /* TODO and FIXME */

/* Predefined variables and functions (for instance glsl) */
pre.sh_sourceCode .sh_predef_var { color: #00008B; }
pre.sh_sourceCode .sh_predef_func { color: #00008B; font-weight: bold; }

/* for OOP */
pre.sh_sourceCode .sh_classname { color: teal; }

/* line numbers (not yet implemented) */
pre.sh_sourceCode .sh_linenum { display: none; }

/* Internet related */
pre.sh_sourceCode .sh_url { color: blue; text-decoration: underline; font-family: monospace; }

/* for ChangeLog and Log files */
pre.sh_sourceCode .sh_date { color: blue; font-weight: bold; }
pre.sh_sourceCode .sh_time, pre.sh_sourceCode .sh_file { color: #00008B; font-weight: bold; }
pre.sh_sourceCode .sh_ip, pre.sh_sourceCode .sh_name { color: #006400; }

/* for Prolog, Perl... */
pre.sh_sourceCode .sh_variable { color: #006400; }

/* for LaTeX */
pre.sh_sourceCode .sh_italics { color: #006400; font-style: italic; }
pre.sh_sourceCode .sh_bold { color: #006400; font-weight: bold; }
pre.sh_sourceCode .sh_underline { color: #006400; text-decoration: underline; }
pre.sh_sourceCode .sh_fixed { color: green; font-family: monospace; }
pre.sh_sourceCode .sh_argument { color: #006400; }
pre.sh_sourceCode .sh_optionalargument { color: purple; }
pre.sh_sourceCode .sh_math { color: orange; }
pre.sh_sourceCode .sh_bibtex { color: blue; }

/* for diffs */
pre.sh_sourceCode .sh_oldfile { color: orange; }
pre.sh_sourceCode .sh_newfile { color: #006400; }
pre.sh_sourceCode .sh_difflines { color: blue; }

/* for css */
pre.sh_sourceCode .sh_selector { color: purple; }
pre.sh_sourceCode .sh_property { color: blue; }
pre.sh_sourceCode .sh_value { color: #006400; font-style: italic; }

/* other */
pre.sh_sourceCode .sh_section { color: black; font-weight: bold; }
pre.sh_sourceCode .sh_paren { color: red; }
pre.sh_sourceCode .sh_attribute { color: #006400; }

</style><style type="text/css">.nt, pre, .terminal, code, .prop, .esstring, .javavalue, .idlident, .idlstring, .xattr, .regex, .prod-number, .prod-lines, .prod-mid {
  font-size: 14px;
}
pre code, .prod-lines .nt {
  font-size: 14px !important;
}
.ednote, .terminal, code, .prop, .esstring, .javavalue, .idlident, .idlstring, .example, /*.note,*/ blockquote {
  background: #d9e8ff;
}
td code {
  background: inherit;
}
.example blockquote {
  background: #f0f6ff;
}
table.grammar {
  background: #eee;
}
.ednote {
  border-top: 3px solid red;
  border-bottom: 3px solid red;
  margin: 1em 2em;
  padding: 0 1em 0 1em;
  background: #f8eeee;
}
.ednoteHeader {
  font-weight: bold;
  display: block;
  padding-top: 0.5em;
}
ul.toc li {
  list-style-type: none;
  margin-top: 0;
  margin-bottom: 0;
}
ul.toc {
  margin-bottom: 0.5em;
}
.terminal, code, .prop, .esstring, .javavalue, .idlident, .idlstring, .input {
  font-family: /*Consolas, Monaco,*/ monospace !important;
}
pre.code code {
  background: inherit;
}
.propattrset {
}
/*.prop {
  font-family: Consolas, Monaco, monospace;
}*/
table.vert {
  border-collapse: collapse;
  border-top: 2px solid #005a9c;
  border-bottom: 2px solid #005a9c;
  margin-top: 1em;
  margin-bottom: 1em;
  margin-left: auto;
  margin-right: auto;
}
table.vert td {
  background: #f0f6ff;
}
table.vert th {
  text-align: left;
  vertical-align: bottom;
  background: #d9e8ff;
  color: #005a9c;
  color: black;
  border-bottom: 2px solid #005a9c;
  white-space: nowrap;
}
table.vert td {
  /*border-top: 1px solid #a2c4e6;
  border-bottom: 1px solid #a2c4e6;*/
  vertical-align: top;
}
table.vert th, table.vert td {
  padding: 0.25em 0.75em;
}
table.vert td.table-note {
  background: none;
  border-left: 1px solid white;
  border-right: 1px solid white;
  border-bottom: 1px solid white;
  font-size: 90%;
}
.xattr {
  font-family: /*Consolas, Monaco,*/ monospace;
}
table.grammar {
  border-collapse: collapse;
  padding: 0.5em;
  margin: 0 2em;
  overflow: auto;
}
table.grammar td {
  vertical-align: top;
  margin: 0;
  padding: 0.325em 1em;
  font-family: /*Consolas, Monaco,*/ monospace;
}
table.grammar td.prod-rhs {
  vertical-align: inherit;
}
.nt, .prod-lines {
  font-family: /*Consolas, Monaco,*/ monospace;
  white-space: nowrap;
}
.idltype, .idlvalue {
  font-weight: bold;
}
.idlop {
  font-weight: bold;
}
.esvalue, .estype {
  font-weight: bold;
}
.javatype, .javapkg {
  font-weight: bold;
}
.regex {
  font-family: /*Consolas, Monaco,*/ monospace;
  white-space: nowrap;
}
.typevar {
  font-style: italic;
}
.example/*, .note*/ {
  border-top: 3px solid #005a9c;
  border-bottom: 3px solid #005a9c;
  margin: 1em 2em;
  padding: 0 1em 0 1em;
}
.exampleHeader, .noteHeader {
  font-weight: bold;
  display: block;
  color: #005a9c;
  color: black;
  padding-top: 0.5em;
}
pre {
  overflow: auto;
  margin: 0;
  font-family: /*Consolas, Monaco,*/ monospace;
}
pre.code {
  padding: 0 1em;
  margin: 0;
  margin-bottom: 1em;
}
.block {
  border: 1px solid #90b8de;
  border-left: 3px double #90b8de;
  border-left: none;
  border-right: none;
  background: #f0f6ff;
  margin: 2em;
  margin-top: 1em;
  margin-bottom: 1em;
  padding: 0 0.5em;
  padding-bottom: 0.5em;
}
.blockTitleDiv {
  text-align: left;
}
.blockTitle {
  position: relative;
  top: -0.75em;
  left: -1.5em;
  /*border: 1px solid #90b8de;
  border-left: none;
  border-right: none;*/
  background: #90b8de;
  color: white;
  padding: 0.25em 1em 0.25em 1em;
  font-weight: bold;
  font-size: 80%;
}
dfn {
  font-weight: bold;
  font-style: italic;
}
.dfnref {
}
li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}
ul > li {
  list-style-type: disc;
}
.norm {
  font-style: italic;
}
.rfc2119 {
  text-transform: lowercase;
  font-variant: small-caps;
}
dfn var {
  font-style: normal;
}
blockquote {
  padding: 1px 1em;
  margin-left: 2em;
  margin-right: 2em;
}
a.placeholder {
  color: #00e;
}
dl.changes > dd {
  margin-left: 0;
}
dd > :first-child {
  margin-top: 0;
}
caption {
  caption-side: bottom;
  margin-top: 1em;
  font-weight: bold;
}
body {
  line-height: 1.3;
}
@media print {
  .section-link {
    display: none;
  }
}
.section-link {
  visibility: hidden;
  width: 1px;
  height: 1px;
  overflow: visible;
  font-size: 10pt;
  font-style: normal;
}
.section-link a {
  color: #666;
  font-weight: bold;
  text-decoration: none;
}
.section-link a:hover {
  color: #c00;
}
.section > *:hover > .section-link {
  visibility: visible;
}
div.set {
  margin-left: 3em;
  text-indent: -1em;
}
ol.algorithm ol {
  border-left: 1px solid #90b8de;
  margin-left: 1em;
}
dl.switch > dd > ol.only {
  margin-left: 0;
}
dl.switch {
  padding-left: 2em;
}
dl.switch > dt {
  text-indent: -1.5em;
  margin-top: 1em;
}
dl.switch > dt + dt {
  margin-top: 0;
}
dl.switch > dt:before {
  content: '\21AA';
  padding: 0 0.5em 0 0;
  display: inline-block;
  width: 1em;
  text-align: right;
  line-height: 0.5em;
}
.diagram {
  text-align: center;
}
iframe {
  border: 0;
}
.comment {
  color: #005a9c;
}
.matrix {
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
}
.matrix th {
  background: #d9e8ff;
  text-align: right;
}
.matrix td, .matrix th {
  border: 1px solid #90b8de;
  padding: 4px;
}
.matrix th.corner {
  border: 0;
  background: none;
}
.matrix td {
  text-align: center;
  background: #f0f6ff;
}
.matrix .belowdiagonal {
  background: #ddd;
}

ul.notes { font-size: 90%; padding-left: 0 }
ul.notes li { list-style-type: none }
ul.notes .note-link { vertical-align: super }
.note-link { font-size: 90% }

.code var { color: #f44; }

/* For dfn.js */
body.dfnEnabled dfn { cursor: pointer; }
.dfnPanel {
  display: inline;
  position: absolute;
  height: auto;
  width: auto;
  padding: 0.5em 0.75em;
  font: small sans-serif;
  background: #DDDDDD;
  color: black;
  border: outset 0.2em;
  cursor: default;
}
.dfnPanel * { margin: 0; padding: 0; font: inherit; text-indent: 0; }
.dfnPanel :link, .dfnPanel :visited { color: black; }
.dfnPanel p { font-weight: bolder; }
.dfnPanel li { list-style-position: inside; }
</style> <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-WD"></head><body style="display: inherit;"><div class="head"><p><a href="http://www.w3.org/"><img height="48" width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home"></a></p><h1 class="title" id="title">Indexed Database API</h1><h2 id="w3c-editor-s-draft-19-august-2010">W3C Working Draft 19 August 2010</h2><dl><dt>This version:</dt><dd><a href="http://www.w3.org/TR/2010/WD-IndexedDB-20100819/">http://www.w3.org/TR/2010/WD-IndexedDB-20100819/</a></dd><dt>Latest published version:</dt><dd><a href="http://www.w3.org/TR/IndexedDB/">http://www.w3.org/TR/IndexedDB/</a></dd><dt>Latest editor's draft:</dt><dd><a href="http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html">http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html</a></dd><dt>Previous version:</dt><dd><a href="http://www.w3.org/TR/2010/WD-IndexedDB-20100105/">http://www.w3.org/TR/2010/WD-IndexedDB-20100105/</a></dd><dt>Editors:</dt><dd><a href="mailto:nikunj@o-micron.com">Nikunj Mehta</a>, Invited Expert</dd>
<dd><a href="mailto:jonas@sicking.cc">Jonas Sicking</a>, Mozilla</dd>
<dd><a href="mailto:eliotgra@microsoft.com">Eliot Graf</a>, Microsoft</dd>
<dd><a href="mailto:andreip@google.com">Andrei Popescu</a>, Google</dd>
</dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2010 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div>
    <h2>Abstract</h2>
      <p>
        This document defines APIs for a database of records holding simple values
        and hierarchical objects. Each record consists of a key and some value.
        Moreover, the database maintains indexes over records it stores. An
        application developer directly uses an API to locate records either by
        their key or by using an index. A query language can be layered on this
        API. An indexed database can be implemented using a persistent B-tree data
        structure.
      </p>
    <h2>Status of This Document</h2>

<p><em>This section describes the status of this document at the time
of its publication. Other documents may supersede this document. A
list of current W3C publications and the latest revision of this
technical report can be found in
the <a href="http://www.w3.org/TR/">W3C technical reports index</a> at
http://www.w3.org/TR/.</em></p>

<p>This document was published by
the <a href="http://www.w3.org/2008/webapps/">Web Applications Working
Group</a> as a Working Draft. If you wish to make comments regarding
this document, please send them
to <a href="mailto:public-webapps@w3.org">public-webapps@w3.org</a>
(<a href="mailto:public-webapps-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-webapps/">archives</a>). All
feedback is welcome.</p>

<p>Publication as a Working Draft does not imply endorsement by the
W3C Membership. This is a draft document and may be updated, replaced
or obsoleted by other documents at any time. It is inappropriate to
cite this document as other than work in progress.</p>

<p>This document
was produced by a group operating under
the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5
February 2004 W3C Patent Policy</a>. W3C maintains
a <a href="http://www.w3.org/2004/01/pp-impl/42538/status"
rel="disclosure">public list of any patent disclosures</a> made in
connection with the deliverables of the group; that page also includes
instructions for disclosing a patent. An individual who has actual
knowledge of a patent which the individual believes
contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
Claim(s)</a> must disclose the information in accordance
with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
6 of the W3C Patent Policy</a>.</p>

<div class="section" id="toc"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">2. </span>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dependencies"><span class="secno">2.1 </span>Dependencies</a></li></ul></li><li class="tocline"><a class="tocxref" href="#database-api"><span class="secno">3. </span>Indexed Database API</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#constructs"><span class="secno">3.1 </span>Constructs</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#key-construct"><span class="secno">3.1.1 </span>Keys</a></li><li class="tocline"><a class="tocxref" href="#value-construct"><span class="secno">3.1.2 </span>Values</a></li><li class="tocline"><a class="tocxref" href="#object-store-concept"><span class="secno">3.1.3 </span>Object Store</a></li><li class="tocline"><a class="tocxref" href="#index-concept"><span class="secno">3.1.4 </span>Index</a></li><li class="tocline"><a class="tocxref" href="#database-concept"><span class="secno">3.1.5 </span>Database</a></li><li class="tocline"><a class="tocxref" href="#range-concept"><span class="secno">3.1.6 </span>Key Range</a></li><li class="tocline"><a class="tocxref" href="#cursor-concept"><span class="secno">3.1.7 </span>Cursor</a></li><li class="tocline"><a class="tocxref" href="#transaction-concept"><span class="secno">3.1.8 </span>Transaction</a></li><li class="tocline"><a class="tocxref" href="#the-idbdatabaseexception-interface"><span class="secno">3.1.9 </span>The <code>IDBDatabaseException</code> Interface</a></li></ul></li><li class="tocline"><a class="tocxref" href="#async-api"><span class="secno">3.2 </span>Asynchronous APIs</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#events"><span class="secno">3.2.1 </span>Event interfaces</a></li><li class="tocline"><a class="tocxref" href="#request-api"><span class="secno">3.2.2 </span>The <code>IDBRequest</code> Interface</a></li><li class="tocline"><a class="tocxref" href="#requests"><span class="secno">3.2.3 </span>Opening a database</a></li><li class="tocline"><a class="tocxref" href="#database-interface"><span class="secno">3.2.4 </span>Database</a></li><li class="tocline"><a class="tocxref" href="#object-store"><span class="secno">3.2.5 </span>Object Store</a></li><li class="tocline"><a class="tocxref" href="#index"><span class="secno">3.2.6 </span>Index</a></li><li class="tocline"><a class="tocxref" href="#cursor"><span class="secno">3.2.7 </span>Cursor</a></li><li class="tocline"><a class="tocxref" href="#transaction"><span class="secno">3.2.8 </span>Transaction</a></li></ul></li><li class="tocline"><a class="tocxref" href="#sync-database"><span class="secno">3.3 </span>Synchronous APIs</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#opening-sync"><span class="secno">3.3.1 </span>Opening a database</a></li><li class="tocline"><a class="tocxref" href="#database-interface-sync"><span class="secno">3.3.2 </span>Database</a></li><li class="tocline"><a class="tocxref" href="#object-store-sync"><span class="secno">3.3.3 </span>Object Store</a></li><li class="tocline"><a class="tocxref" href="#index-sync"><span class="secno">3.3.4 </span>Index</a></li><li class="tocline"><a class="tocxref" href="#cursor-sync"><span class="secno">3.3.5 </span>Cursor</a></li><li class="tocline"><a class="tocxref" href="#transaction-sync"><span class="secno">3.3.6 </span>Transaction</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#algorithms"><span class="secno">4. </span>Algorithms</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#opening"><span class="secno">4.1 </span>Opening the database</a></li><li class="tocline"><a class="tocxref" href="#object-store-storage-steps"><span class="secno">4.2 </span>Object Store Storage steps</a></li><li class="tocline"><a class="tocxref" href="#index-storage-steps"><span class="secno">4.3 </span>Index Storage steps</a></li><li class="tocline"><a class="tocxref" href="#object-store-retrieval-steps"><span class="secno">4.4 </span>Object Store Retrieval steps</a></li><li class="tocline"><a class="tocxref" href="#index-referenced-value-retrieval-steps"><span class="secno">4.5 </span>Index Referenced Value Retrieval steps</a></li><li class="tocline"><a class="tocxref" href="#index-value-retrieval-steps"><span class="secno">4.6 </span>Index Value Retrieval steps</a></li><li class="tocline"><a class="tocxref" href="#object-store-deletion-steps"><span class="secno">4.7 </span>Object Store Deletion steps</a></li><li class="tocline"><a class="tocxref" href="#index-deletion-steps"><span class="secno">4.8 </span>Index Deletion steps</a></li><li class="tocline"><a class="tocxref" href="#transaction-creation-steps"><span class="secno">4.9 </span>Transaction Creation steps</a></li><li class="tocline"><a class="tocxref" href="#version_change-transaction-steps"><span class="secno">4.10 </span>VERSION_CHANGE transaction steps</a></li><li class="tocline"><a class="tocxref" href="#database-closing-steps"><span class="secno">4.11 </span>Database closing steps</a></li></ul></li><li class="tocline"><a class="tocxref" href="#privacy"><span class="secno">5. </span>Privacy</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#user-tracking"><span class="secno">5.1 </span>User tracking</a></li><li class="tocline"><a class="tocxref" href="#cookie-resurrection"><span class="secno">5.2 </span>Cookie resurrection</a></li><li class="tocline"><a class="tocxref" href="#sensitivity-of-data"><span class="secno">5.3 </span>Sensitivity of data</a></li></ul></li><li class="tocline"><a class="tocxref" href="#authorization"><span class="secno">6. </span>Authorization</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dns-spoofing-attacks"><span class="secno">6.1 </span>DNS spoofing attacks</a></li><li class="tocline"><a class="tocxref" href="#cross-directory-attacks"><span class="secno">6.2 </span>Cross-directory attacks</a></li><li class="tocline"><a class="tocxref" href="#implementation-risks"><span class="secno">6.3 </span>Implementation risks</a></li></ul></li><li class="tocline"><a class="tocxref" href="#requirements"><span class="secno">A. </span>Requirements</a></li><li class="tocline"><a class="tocxref" href="#acknowledgements"><span class="secno">B. </span>Acknowledgements</a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">C. </span>References</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">C.1 </span>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">C.2 </span>Informative references</a></li></ul></li></ul></div>

	    <div id="introduction" class="section informative">
      <!--OddPage--><h2><span class="secno">1. </span>Introduction</h2><p><em>This section is non-normative.</em></p>

	
      <p>
        User agents need to store large numbers of objects locally in
        order to satisfy off-line data requirements of Web applications.
        [<cite><a href="#bib-WEBSTORAGE" rel="biblioentry" class="bibref">WEBSTORAGE</a></cite>] is useful for
        storing pairs of keys and their corresponding values. However, it does 
        not provide in-order retrieval of keys, efficient searching over
        values, or storage of duplicate values for a key. 
      </p>
      
      <p>
        This specification provides a concrete API to perform advanced key-value data management
        that is at the heart of most sophisticated query processors. It does
        so by using transactional databases to store keys and their 
        corresponding values (one or more per key), and providing a means
        of traversing keys in a deterministic order. This is often implemented
        through the use of persistent B-tree data structures that are considered
        efficient for insertion and deletion as well as in-order traversal of
        very large numbers of data records.
      </p>
      
      <div class="example"><div class="exampleHeader">Example</div>
        <p>
          A script can efficiently find records in an object store that come 
          closest to the required value provided the value is stored in either 
          a primary or a secondary key.
          In the following example, the 'books' object store holds data about
          books which are stored by their 'isbn' attribute. Additionally, 
          an index is maintained on the 'author' attribute of the objects
          stored in the object store. This index can be used to look up books
          for a given author. If an exact match is not found, the operation
          raises an exception.
        </p>
        <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var db = indexedDB.open('books', 'Book store', false);
if (db.version !== '1.0') {
  var olddb = indexedDB.open('books', 'Book store');
  olddb.createObjectStore('books', 'isbn');
  olddb.createIndex('BookAuthor', 'books', 'author', false);
  olddb.setVersion("1.0");  
}
// db.version === "1.0";  
var index = db.openIndex('BookAuthor');
var matching = index.get('fred');
if (matching)
  report(matching.isbn, matching.name, matching.author);
else
  report(null);</code></pre></div></div>
        <p>
        The next example performs the exact same logic as above asynchronously.
        </p>
        <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">
  function findFred() {
    var store = db.objectStore('books');
    var index = store.index('BookAuthor');
    var req = index.get('fred');
    req.onsuccess = function(event) {
      var matching = event.result;
      report(matching.isbn, matching.name, matching.author);
    }
    req.onerror = function(event) {
      report(null);
    }
  }

  var db;
  var dbRequest = indexedDB.open('books', 'Book store');
  dbRequest.onsuccess = function(event) {
    db = event.result;
    if (db.version != "1.0") {
      var versionRequest = db.setVersion("1.0");
      versionRequest.ontimeout = function(event) {
        throw new Error("timeout trying to set version to 1.0");
      }
      versionRequest.onsuccess = function(event) {
        var store = db.createObjectStore('books', 'isbn');
        store.createIndex('BookAuthor', 'books', 'author', false);
        event.transaction.onabort = function(event) {
          throw new Error("error while trying to set version to 1.0");
        }
        event.transaction.oncomplete = function(event) {
          findFred(db);
        }
      }
    } else {
      findFred(db);
    }
  }
   
        </code></pre></div></div>
        <!--p>
        Here is an example of a script using this API. First, a function
        <code>prepareDatabase()</code> is defined. This function tries to create 
        the database if necessary, giving it one object store called "docids" with
        the primary key "id". If it is successful, or if the table
        doesn't need creating, it calls the function that does the
        actual work, in this case <code>showDocCount()</code>.
        </p>
        <codeblock>
var request = null;
function prepareDatabase(ready, error) {
  request = new <a>IDBDatabaseRequest</a>();
  request.<a>onsuccess</a> = ready;
  request.<a>onerror</a> = error;
  var upgrade = 
    function(changes, db) {
      changes.<a>createObjectStore</a>('docids', 'id');
      // now db.<a>version</a> === '1.0'
    };
  request.<a>open</a>('documents', '1.0', 'Offline document storage', upgrade);
}

function showDocCount(db, span) {
  var storeRequest = new <a>IDBObjectStoreRequest</a>(db);
  storeRequest.<a>onsuccess</a> = 
    function() {
      var store = storeRequest.<a>store</a>, total = 0;
      var cursorRequest = new <a>IDBCursorRequest</a>(store);
      cursorRequest.<a>onsuccess</a> = 
        function() {
          span.textContent = total;
        };
      cursorRequest.<a>open</a>(function(record, cursor) { 
          total += cursor.<a>count</a>; 
        }, <a>IDBCursor</a>.<a>NEXT_NO_DUPLICATE</a>);
    };
  storeRequest.<a>open</a>('docids', true);
};

prepareDatabase(function(evt) {
  // got database
  var span = document.getElementById('doc-count');
  showDocCount(request.<a>database</a>, span);
  }, function (evt) {
  // error getting database
  var error = request.error;
  alert(error.message);
});</codeblock-->
      </div>
    </div>

    <div id="conformance" class="section"><!--OddPage--><h2><span class="secno">2. </span>Conformance</h2><p>As
well as sections marked as non-normative, all authoring guidelines,
diagrams, examples, and notes in this specification are non-normative.
Everything else in this specification is normative.</p>
<p>The key words <em title="must" class="rfc2119">must</em>, <em title="must not" class="rfc2119">must not</em>, <em title="required" class="rfc2119">required</em>, <em title="should" class="rfc2119">should</em>, <em title="should not" class="rfc2119">should not</em>, <em title="recommended" class="rfc2119">recommended</em>, <em title="may" class="rfc2119">may</em>, and <em title="optional" class="rfc2119">optional</em> in this specification are to be interpreted as described in [<cite><a href="#bib-RFC2119" rel="biblioentry" class="bibref">RFC2119</a></cite>].</p>

      <p>
        This specification defines one class of products:
      </p>
      <dl>
        <dt><dfn id="dfn-conforming-user-agent">Conforming user agent</dfn></dt>
        <dd>
          <p>
            A user agent <em title="must" class="rfc2119">must</em> behave as described in this specification
            in order to be considered conformant.
          </p>
          
          <p>
            User agents <em title="may" class="rfc2119">may</em> implement algorithms given in this
            specification in any way desired, so long as the end result is
            indistinguishable from the result that would be obtained by the
            specification's algorithms.
          </p>
          
          <p>
            A conforming Indexed Database API user agent <em title="must" class="rfc2119">must</em> also be a
            <em>conforming implementation</em> of the IDL fragments
            of this specification, as described in the
            “Web IDL” specification. [<cite><a href="#bib-WEBIDL" rel="biblioentry" class="bibref">WEBIDL</a></cite>]
          </p>
          
          <div class="note">
            This specification uses both the terms "conforming user agent(s)" 
            and "user agent(s)" to refer to this product class.
          </div>
        </dd>
      </dl>        
      
      <div class="section" id="dependencies">
        <h3><span class="secno">2.1 </span>Dependencies</h3>
        <p>
          This specification relies on several other underlying specifications. 
        </p>
        <dl>
          <dt>HTML5</dt>
          <dd>The terms and algorithms <dfn id="document-base-url">document base URL</dfn>,
            <dfn id="event-handler-attributes">event handler attributes</dfn>, 
            <dfn id="event-handler-event-type">event handler event type</dfn>,
            <dfn id="dfn-function" title="Function"><code>Function</code></dfn>,
            <dfn id="dfn-origin">origin</dfn>, <dfn id="dfn-same-origin">same origin</dfn>, <dfn id="dfn-structured-clone">structured clone</dfn>,
            <dfn id="dfn-structured-clone-algorithm">structured clone algorithm</dfn>, <dfn id="dfn-task">task</dfn>, <dfn id="dfn-task-source">task source</dfn>, 
            and <dfn id="dfn-queue-a-task" title="queue-a-task">queue a task</dfn> are defined by the HTML 5 
            specification [<cite><a href="#bib-HTML5" rel="biblioentry" class="bibref">HTML5</a></cite>].
          </dd>
          <dt>WebWorkers</dt>
          <dd>The term <dfn id="dfn-worker" title="Worker"><a class="externalDFN"><code>Worker</code></a></dfn> is defined by
          the WebWorkers specification [<cite><a href="#bib-WEBWORKERS" rel="biblioentry" class="bibref">WEBWORKERS</a></cite>].</dd>
        </dl>
      </div>
    </div>


    <div id="database-api" class="section">
      <!--OddPage--><h2><span class="secno">3. </span>Indexed Database API</h2>
	        <div id="constructs" class="section">
      <h3><span class="secno">3.1 </span>Constructs</h3>
        <p>
          An indexed database is made of records holding simple values
          and hierarchical objects. Each <dfn id="dfn-record">record</dfn> consists of a key and a value. 
        </p>
        
        <div id="key-construct" class="section">
          <h4><span class="secno">3.1.1 </span>Keys</h4>
          
          <p>
            In order to efficiently retrieve <a class="internalDFN" href="#dfn-record" title="record">records</a> 
            stored in an indexed database, a user agent needs to organize each 
            <a class="internalDFN" href="#dfn-record">record</a> according to its key. <a>Conforming user agents</a>
            <em title="must" class="rfc2119">must</em> support the use of the following values as keys: IDL data types
            <code>DOMString</code>, <code>long</code>, and <code>float</code> [<cite><a href="#bib-WEBIDL" rel="biblioentry" class="bibref">WEBIDL</a></cite>]; the <code>Date</code> JavaScript object [<cite><a href="#bib-ECMA-262" rel="biblioentry" class="bibref">ECMA-262</a></cite>]; as well as the value <code>null</code>.
          </p>
          
          <p>
            For purposes of comparison, all <code>DOMString</code> values are evaluated as greater than 
            <code>long</code>, <code>float</code>, and <code>Date</code> values; <code>Date</code> values are evaluated as greater than <code>long</code> 
            and <code>float</code> values; and <code>long</code> and <code>float</code> values are evaluated by their numeric 
            value with no need to separate them by type. Moreover, <code>null</code> always evaluates 
            less than any other key value that is a non-null value. For the particular case 
            of floating point numbers, the value NaN is not allowed.
          </p>
          <div class="note">
            Only data types with natural ordering can be used as keys. 
            The ECMAScript <code>undefined</code> <em title="must not" class="rfc2119">must not</em> be used as a key.
          </div>
        </div>
        
        <div id="value-construct" class="section">
          <h4><span class="secno">3.1.2 </span>Values</h4>
          <p>
            Values can be any data type supported by the <a class="internalDFN" href="#dfn-structured-clone-algorithm">structured clone algorithm</a> 
            [<cite><a href="#bib-HTML5" rel="biblioentry" class="bibref">HTML5</a></cite>]. This includes simple types such as <code>DOMString</code>
            and <code>Date</code> as well as <code>Object</code> and <code>Array</code>
            instances.
          </p>
          
          <p>
            A database can derive a key from the contents of
            the value being stored. In such a case, only <code>Object</code> 
            instances <em title="may" class="rfc2119">may</em> be stored as values. Only the direct enumerable
            properties of a stored <code>Object</code> instance <em title="should" class="rfc2119">should</em> be 
            used to derive a key value.
          </p>
        </div>
        
        <div class="section" id="object-store-concept">  
          <h4><span class="secno">3.1.3 </span>Object Store</h4>
          <p>
            An <dfn id="dfn-object-store">object store</dfn> is a persistent storage mechanism that 
            holds key-value pairs, also called <a class="internalDFN" href="#dfn-record" title="record">records</a> 
            or <dfn id="dfn-stored-objects">stored objects</dfn>. An <a class="internalDFN" href="#dfn-object-store">object store</a>'s 
            <a class="internalDFN" href="#dfn-record" title="record">records</a> are sorted by keys to enable fast 
            insertion and look up as well as ordered retrieval. 
          </p>
          <p>
            Every <a class="internalDFN" href="#dfn-object-store">object store</a> has a 
            <dfn id="dfn-object-store-name" title="object store name">name</dfn>. Within a <a class="internalDFN" href="#dfn-database">database</a>, 
            each <a class="internalDFN" href="#dfn-object-store">object store</a> <em title="must" class="rfc2119">must</em> have a <a class="internalDFN" href="#dfn-valid-name" title="valid-name">valid</a> 
            and unique <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a>. 
          </p>          
          <p>
            If an <a class="internalDFN" href="#dfn-object-store">object store</a> uses keys generated from a monotonically
            increasing sequence, it <em title="must" class="rfc2119">must</em> have a <dfn id="dfn-key-generator">key generator</dfn> that 
            produces unique keys for <a class="internalDFN" href="#dfn-record" title="record">records</a> in that 
            <a class="internalDFN" href="#dfn-object-store">object store</a>. Alternatively, if an application provides keys, 
            they <em title="may" class="rfc2119">may</em> either be identified as a part of the value being stored, 
            also called <dfn id="dfn-in-line-keys">in-line keys</dfn>, or be identified separately, 
            also called <dfn id="dfn-out-of-line-keys">out-of-line keys</dfn>. No two 
            <a class="internalDFN" href="#dfn-record" title="record">records</a> in an <a class="internalDFN" href="#dfn-object-store">object store</a> <em title="may" class="rfc2119">may</em> be 
            identified by the same key. An <a class="internalDFN" href="#dfn-object-store">object store</a> <em title="must" class="rfc2119">must</em> have a 
            <dfn id="dfn-object-store-key-path" title="object store key path">key path</dfn> if it uses 
            <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a>. The <a>key path</a> <em title="must" class="rfc2119">must</em> be the name 
            of an enumerated property of all stored objects in that 
            <a class="internalDFN" href="#dfn-object-store">object store</a>.
          </p>
          <!--div class="ednote">
            The detached reading behavior MAY need more explanation.
          </div-->
          <p>
            The <a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a> and <a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a>
            interfaces provide access to the metadata of an <a class="internalDFN" href="#dfn-object-store">object store</a>.
          </p>
        </div> <!-- Object store -->
        
        <div id="index-concept" class="section">
          <h4><span class="secno">3.1.4 </span>Index</h4>
          <p>
            <a class="internalDFN" href="#dfn-record" title="record">Records</a> in an <a class="internalDFN" href="#dfn-object-store">object store</a> can be 
            retrieved using the <a class="internalDFN" href="#dfn-record" title="record">record's</a> key. However, 
            that <em title="may" class="rfc2119">may</em> not always be adequate to recall 
            <a class="internalDFN" href="#dfn-record" title="record">records</a>. An <a class="internalDFN" href="#dfn-index">index</a> is used to lookup 
            records in an <a class="internalDFN" href="#dfn-object-store">object store</a> other than through a
            <a class="internalDFN" href="#dfn-record">record</a> key.
          </p>
          <p>
            An <dfn id="dfn-index">index</dfn> is a specialized persistent store that holds 
            key-value pairs such that each value is the key of objects in the 
            <dfn id="dfn-referenced">referenced</dfn> <a class="internalDFN" href="#dfn-object-store">object store</a>. If an <a class="internalDFN" href="#dfn-index">index</a>'s 
            <dfn id="dfn-unique">unique</dfn> flag is set, then it <em title="must not" class="rfc2119">must not</em> allow duplicate 
            values for a key. Every <a class="internalDFN" href="#dfn-index">index</a> has a 
            <dfn id="dfn-index-name" title="index name">name</dfn>. Within an 
            <a class="internalDFN" href="#dfn-object-store">object store</a>, each <a class="internalDFN" href="#dfn-index">index</a> <em title="must" class="rfc2119">must</em> have a
            <a class="internalDFN" href="#dfn-valid-name" title="valid-name">valid</a> and unique 
            <a class="internalDFN" href="#dfn-index-name" title="index name">name</a>.
          </p>
          <p>
            If an <a class="internalDFN" href="#dfn-index">index</a> is <dfn id="dfn-auto-populated">auto-populated</dfn>, then the user agent 
            populates records using the values stored in the <a class="internalDFN" href="#dfn-referenced">referenced</a> 
            <a class="internalDFN" href="#dfn-object-store">object store</a>. An <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a> <a class="internalDFN" href="#dfn-index">index</a> <em title="must" class="rfc2119">must</em> have 
            a <dfn id="dfn-index-key-path" title="index key path">key path</dfn>. This <a>key path</a> 
            <em title="must" class="rfc2119">must</em> be the name of an enumerated property of every object to be 
            stored in the <a class="internalDFN" href="#dfn-object-store">object store</a> <a class="internalDFN" href="#dfn-referenced">referenced</a> by that 
            <a class="internalDFN" href="#dfn-index">index</a>. The <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a> <a class="internalDFN" href="#dfn-index">index</a> record 
            corresponding to an <a class="internalDFN" href="#dfn-object-store">object store</a> record <em title="must" class="rfc2119">must</em> satisfy the 
            following <dfn id="dfn-index-maintenance-conditions">index maintenance conditions</dfn>:
          </p>
          <ul>
            <li><a class="internalDFN" href="#dfn-index">index</a> record key = value of the enumerated property at 
            the <a class="internalDFN" href="#dfn-index-key-path" title="index key path">key path</a> in the <a class="internalDFN" href="#dfn-object-store">object store</a> 
            record value</li>
            <li><a class="internalDFN" href="#dfn-index">index</a> record value = <a class="internalDFN" href="#dfn-object-store">object store</a> record key</li>
          </ul>
          <p>
            The <a class="idlType" href="#idl-def-IDBIndex"><code>IDBIndex</code></a> and <a class="idlType" href="#idl-def-IDBIndexSync"><code>IDBIndexSync</code></a> interfaces
            provide access to the metadata of an <a class="internalDFN" href="#dfn-index">index</a>.
          </p>
        </div> <!-- IDBIndex -->
        
       <div id="database-concept" class="section">
          <h4><span class="secno">3.1.5 </span>Database</h4>
          <p>
            Each <a class="internalDFN" href="#dfn-origin">origin</a> has an associated set of 
            <a class="internalDFN" href="#dfn-database" title="database">databases</a>. A <dfn id="dfn-database">database</dfn> comprises
            one or more <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a>.
          </p><p>
            Each <a class="internalDFN" href="#dfn-database">database</a> has a <a class="internalDFN" href="#dfn-valid-name" title="valid-name">valid</a> 
            <dfn id="dfn-database-name" title="database name">name</dfn> and a human readable 
            description. A <dfn id="dfn-valid-name" title="valid-name">valid name</dfn> is any 
            string including the empty string. An exact match of names means 
            that their UTF-8 encodings are identical.
          </p>
          
          <div class="note">
            If an implementation does not support all sets of strings, it may 
            implement support for arbitrary strings by mapping
            database names (e.g. using a hashing algorithm) to the supported
            set of names.
          </div>
          <p>
            Each <a class="internalDFN" href="#dfn-database">database</a> also has a current <dfn id="dfn-version">version</dfn>.
          </p>
          <div class="note">
            Each <a class="internalDFN" href="#dfn-database">database</a> has one version at a time; a <a class="internalDFN" href="#dfn-database">database</a> 
            can't exist in multiple versions at once. 
          </div>
          <p>
            The act of opening a <a class="internalDFN" href="#dfn-database">database</a> creates a database 
            <dfn id="dfn-connection">connection</dfn>. There <em title="may" class="rfc2119">may</em> be multiple 
            <a class="internalDFN" href="#dfn-connection" title="connection">connections</a> to a given <a class="internalDFN" href="#dfn-database">database</a> 
            at any given time. An operation that is attempting to read a 
            given piece of data in a <a class="internalDFN" href="#dfn-database">database</a> is called a 
            <dfn id="dfn-reader">reader</dfn> and one that is attempting to write a piece of 
            data is called a <dfn id="dfn-writer">writer</dfn>.
            <a class="internalDFN" href="#dfn-reader" title="reader">Readers</a> and <a class="internalDFN" href="#dfn-writer" title="writer">writers</a> <em title="should" class="rfc2119">should</em> only operate through
            <a class="internalDFN" href="#dfn-transaction" title="transaction">transactions</a>. A <a class="internalDFN" href="#dfn-connection">connection</a> <em title="may" class="rfc2119">may</em> have 
            any number of <dfn id="dfn-active">active</dfn> <a class="internalDFN" href="#dfn-transaction" title="transaction">transactions</a>.
          </p>
          <p>
            <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a> and <a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a>
            interfaces represent <a class="internalDFN" href="#dfn-connection" title="connection">connections</a> to a <a class="internalDFN" href="#dfn-database">database</a>. 
          </p>
        </div>  <!-- IDBDatabase -->
        
        <div class="section" id="range-concept">
          <h4><span class="secno">3.1.6 </span>Key Range</h4>
          <p>
            An individual <a class="internalDFN" href="#dfn-record">record</a> can be retrieved from an 
            <a class="internalDFN" href="#dfn-object-store">object store</a> using either the record's key or the key 
            applicable for some <a class="internalDFN" href="#dfn-index">index</a> that 
            <a class="internalDFN" href="#dfn-referenced" title="referenced">references</a> that <a class="internalDFN" href="#dfn-object-store">object store</a>. 
            Multiple records can be fetched using a <a class="internalDFN" href="#dfn-key-range">key range</a>. A 
            <dfn id="dfn-key-range">key range</dfn> is a continuous interval over some data type 
            used for keys.
          </p>
          <p>
            A <a class="internalDFN" href="#dfn-key-range">key range</a> <em title="may" class="rfc2119">may</em> be left-bounded or right-bounded if there is 
            a value that is, respectively, smaller than or larger than all its 
            elements. A <a class="internalDFN" href="#dfn-key-range">key range</a> is said to be bounded if it is both 
            left- and right-bounded and unbounded otherwise. A 
            <dfn id="dfn-valid-key-range" title="valid key range">valid</dfn> <a class="internalDFN" href="#dfn-key-range">key range</a> <em title="must" class="rfc2119">must</em> be 
            either half-bounded or bounded. A <a class="internalDFN" href="#dfn-key-range">key range</a> <em title="may" class="rfc2119">may</em> be open, 
            i.e., not including its endpoints or closed, i.e., including
            its endpoints. A <a class="internalDFN" href="#dfn-key-range">key range</a> <em title="may" class="rfc2119">may</em> consist of a single value.
          </p>
          <p>
            The <a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a> interface defines a 
            <a class="internalDFN" href="#dfn-key-range">key range</a>.
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBKeyRange">interface <span class="idlInterfaceID">IDBKeyRange</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBKeyRange-SINGLE">SINGLE</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBKeyRange-LEFT_OPEN">LEFT_OPEN</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBKeyRange-RIGHT_OPEN">RIGHT_OPEN</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBKeyRange-LEFT_BOUND">LEFT_BOUND</a></span> = <span class="idlConstValue">4</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBKeyRange-RIGHT_BOUND">RIGHT_BOUND</a></span> = <span class="idlConstValue">8</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span>            <span class="idlAttrName"><a href="#widl-IDBKeyRange-left">left</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span>            <span class="idlAttrName"><a href="#widl-IDBKeyRange-right">right</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-IDBKeyRange-flags">flags</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlMethName"><a href="#widl-IDBKeyRange-only">only</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlMethName"><a href="#widl-IDBKeyRange-leftBound">leftBound</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">bound</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">open</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlMethName"><a href="#widl-IDBKeyRange-rightBound">rightBound</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">bound</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">open</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlMethName"><a href="#widl-IDBKeyRange-bound">bound</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">left</span></span>, <span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">right</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">openLeft</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">openRight</span></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes">Attributes</h5><dl class="attributes"><dt id="widl-IDBKeyRange-flags"><code>flags</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>Flags for bounding values<div><em>No exceptions.</em></div></dd><dt id="widl-IDBKeyRange-left"><code>left</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>This value is the left-bound of the <a class="internalDFN" href="#dfn-key-range">key range</a>.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBKeyRange-right"><code>right</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>This value is the right-bound of the <a class="internalDFN" href="#dfn-key-range">key range</a>.<div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods">Methods</h5><dl class="methods"><dt id="widl-IDBKeyRange-bound"><code>bound</code></dt><dd>
              Create a new left- and right-bound <a class="internalDFN" href="#dfn-key-range">key range</a>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">left</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The left-bound value</td></tr><tr><td class="prmName">right</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The right-bound value</td></tr><tr><td class="prmName">openLeft</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Is the left-bound value included in the <a class="internalDFN" href="#dfn-key-range">key range</a>.</td></tr><tr><td class="prmName">openRight</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Is the right-bound value included in the <a class="internalDFN" href="#dfn-key-range">key range</a>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></div></dd><dt id="widl-IDBKeyRange-leftBound"><code>leftBound</code></dt><dd>
              Create a new left-bound <a class="internalDFN" href="#dfn-key-range">key range</a>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">bound</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The left bound value</td></tr><tr><td class="prmName">open</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Is the left-bound value included in the <a class="internalDFN" href="#dfn-key-range">key range</a>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></div></dd><dt id="widl-IDBKeyRange-only"><code>only</code></dt><dd>
              Create a new single-valued <a class="internalDFN" href="#dfn-key-range">key range</a>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The only value</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></div></dd><dt id="widl-IDBKeyRange-rightBound"><code>rightBound</code></dt><dd>
              Create a new right-bound <a class="internalDFN" href="#dfn-key-range">key range</a>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">bound</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The right bound value</td></tr><tr><td class="prmName">open</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Is the right-bound value included in the <a class="internalDFN" href="#dfn-key-range">key range</a>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></div></dd></dl></div><div class="section"><h5 id="constants">Constants</h5><dl class="constants"><dt id="widl-IDBKeyRange-LEFT_BOUND"><code>LEFT_BOUND</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This flag indicates a left-bound <a class="internalDFN" href="#dfn-key-range">key range</a>.</dd><dt id="widl-IDBKeyRange-LEFT_OPEN"><code>LEFT_OPEN</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This flag indicates a left-open <a class="internalDFN" href="#dfn-key-range">key range</a>.</dd><dt id="widl-IDBKeyRange-RIGHT_BOUND"><code>RIGHT_BOUND</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This flag indicates a right-bound <a class="internalDFN" href="#dfn-key-range">key range</a>.</dd><dt id="widl-IDBKeyRange-RIGHT_OPEN"><code>RIGHT_OPEN</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This flag indicates a right-open <a class="internalDFN" href="#dfn-key-range">key range</a>.</dd><dt id="widl-IDBKeyRange-SINGLE"><code>SINGLE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This flag indicates a single-valued <a class="internalDFN" href="#dfn-key-range">key range</a>.</dd></dl></div>
        </div> <!-- Key Range -->
        
        <div id="cursor-concept" class="section">
          <h4><span class="secno">3.1.7 </span>Cursor</h4>
          <p>
            <a class="internalDFN" href="#dfn-cursor" title="cursor">Cursors</a> are a transient mechanism used to 
            iterate over multiple records in a database. The storage operations
            are performed on the underlying <a class="internalDFN" href="#dfn-index">index</a> or an 
            <a class="internalDFN" href="#dfn-object-store">object store</a>.
          </p>
          
          <p>
            A <dfn id="dfn-cursor">cursor</dfn> comprises a <dfn id="dfn-range">range</dfn> of records in 
            either an <a class="internalDFN" href="#dfn-index">index</a> or an <a class="internalDFN" href="#dfn-object-store">object store</a>. A 
            <a class="internalDFN" href="#dfn-cursor" title="cursor">cursor</a> maintains a <dfn id="dfn-position">position</dfn> over 
            this series, which moves in a <dfn id="dfn-direction">direction</dfn> that is either 
            monotonically increasing or decreasing order of the record keys. 
          </p>
          <p>
            <a class="internalDFN" href="#dfn-cursor" title="cursor">Cursor</a> objects implement the <a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a> 
            or the <a class="idlType" href="#idl-def-IDBCursorSync"><code>IDBCursorSync</code></a> interfaces.
          </p>
        </div> <!-- IDBCursor -->

        <div id="transaction-concept" class="section">
          <h4><span class="secno">3.1.8 </span>Transaction</h4>
          <p>
            A <dfn id="dfn-transaction">transaction</dfn> is defined on a <a class="internalDFN" href="#dfn-database">database</a>. A 
            <a class="internalDFN" href="#dfn-transaction">transaction</a>'s <a>scope</a> is either 
            <dfn id="dfn-static">static</dfn> or <dfn id="dfn-dynamic">dynamic</dfn> and it <em title="may" class="rfc2119">may</em> include a subset of the <a class="internalDFN" href="#dfn-object-store">object store</a>s of the <a class="internalDFN" href="#dfn-transaction">transaction</a>'s 
            <a class="internalDFN" href="#dfn-database">database</a>. If the <a>scope</a> is <a class="internalDFN" href="#dfn-static">static</a>, then it <em title="may" class="rfc2119">may</em> 
            be <dfn id="dfn-global">global</dfn>, meaning that it includes every existing and 
            to be created <a class="internalDFN" href="#dfn-object-store">object store</a>s of the <a class="internalDFN" href="#dfn-database">database</a>. There <em title="may" class="rfc2119">may</em> 
            be multiple <a class="internalDFN" href="#dfn-transaction" title="transaction">transactions</a> active in a <a class="internalDFN" href="#dfn-database">database</a>
            as long as their <a title="scope">scopes</a> do not overlap or the overlapping
            objects are locked in <a class="internalDFN" href="#dfn-mode" title="mode">modes</a> that are not mutually exclusive.
          </p>
          <p class="XXX">TODO: decide what happens when dynamic transactions need to lock a database
            object that is already exclusively locked by another transaction.
          </p>
          <p>
            Concurrent access to the <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> in a <a class="internalDFN" href="#dfn-transaction">transaction</a>
            <em title="may" class="rfc2119">may</em> be isolated in one of three <dfn id="dfn-mode" title="mode">modes</dfn>. These are:</p>
            <ol>
              <li><code>READ_ONLY</code></li>
              <li><code>READ_WRITE</code></li>
              <li><code>SNAPSHOT_READ</code></li>
              <li><code>VERSION_CHANGE</code></li>
            </ol>
          <p>  
            Any number of <a class="internalDFN" href="#dfn-reader" title="reader">readers</a> <em title="may" class="rfc2119">may</em> concurrently access 
            all <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a>. A <a class="internalDFN" href="#dfn-writer">writer</a> is not allowed
            if there is any <a class="internalDFN" href="#dfn-reader">reader</a> concurrently accessing the 
            <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a>, unless the <a class="internalDFN" href="#dfn-reader">reader</a> is detached, i.e., 
            looking at a snapshot view of the data that does not change once 
            created. 
          </p>
          <p>
            <a class="internalDFN" href="#dfn-transaction" title="transaction">Transactions</a> offer some protection from 
            application and system failures. A <a class="internalDFN" href="#dfn-transaction">transaction</a> <em title="may" class="rfc2119">may</em> be used to
            store multiple data records or to conditionally modify certain data 
            records. A <a class="internalDFN" href="#dfn-transaction">transaction</a> represents an atomic and durable set 
            of data access and mutation operations. 
          </p>
          <p>  
            <a class="internalDFN" href="#dfn-transaction" title="transaction">Transactions</a> are expected to be short
            lived. A <a class="internalDFN" href="#dfn-transaction">transaction</a> may be programmatically aborted. 
            Conforming user agents <em title="must" class="rfc2119">must</em> automatically:
          </p>
          <ul>
            <li>
            commit a <a class="internalDFN" href="#dfn-transaction">transaction</a> at the end of the scope in
            which it was created unless there is an active operation being 
            performed using that transaction, in which case, the transaction is 
            automatically committed when that operation is completed. 
            </li>
            <li>
            abort a <a class="internalDFN" href="#dfn-transaction">transaction</a> at the end of the scope in which it was 
            created, if an exception is propagated to that scope.
            </li>
          </ul>
          <p>
            Static <a class="internalDFN" href="#dfn-transaction">transaction</a> objects implement the 
            <a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a> or the
            <a class="idlType" href="#idl-def-IDBTransactionSync"><code>IDBTransactionSync</code></a> interfaces.
          </p>
          <p>
             Dynamic <a class="internalDFN" href="#dfn-transaction">transaction</a> objects implement the 
            <a class="idlType" href="#idl-def-IDBDynamicTransaction"><code>IDBDynamicTransaction</code></a> or the
            <a><code>IDBDynamicTransactionSync</code></a> interfaces.
          </p>
          <div class="issue">
            <p>Define dynamic transactions if we agree they should be part of this specification.</p>
          </div>
        </div> <!-- IDBTransaction -->
        <div id="the-idbdatabaseexception-interface" class="section">
          <h4><span class="secno">3.1.9 </span>The <code>IDBDatabaseException</code> Interface</h4>
          <pre class="idl"><span class="idlException" id="idl-def-IDBDatabaseException">exception <span class="idlExceptionID">IDBDatabaseException</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-UNKNOWN_ERR">UNKNOWN_ERR</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-NON_TRANSIENT_ERR">NON_TRANSIENT_ERR</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-NOT_FOUND_ERR">NOT_FOUND_ERR</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-CONSTRAINT_ERR">CONSTRAINT_ERR</a></span> = <span class="idlConstValue">3</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-DATA_ERR">DATA_ERR</a></span> = <span class="idlConstValue">4</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-NOT_ALLOWED_ERR">NOT_ALLOWED_ERR</a></span> = <span class="idlConstValue">5</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-SERIAL_ERR">SERIAL_ERR</a></span> = <span class="idlConstValue">11</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-RECOVERABLE_ERR">RECOVERABLE_ERR</a></span> = <span class="idlConstValue">21</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-TRANSIENT_ERR">TRANSIENT_ERR</a></span> = <span class="idlConstValue">31</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-TIMEOUT_ERR">TIMEOUT_ERR</a></span> = <span class="idlConstValue">32</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBDatabaseException-DEADLOCK_ERR">DEADLOCK_ERR</a></span> = <span class="idlConstValue">33</span>;</span>
<span class="idlField">    <span class="idlFieldType"><a>attribute unsigned short</a></span> <span class="idlFieldName"><a href="#widl-IDBDatabaseException-code">code</a></span>;</span>
<span class="idlField">    <span class="idlFieldType"><a>attribute DOMString</a></span>      <span class="idlFieldName"><a href="#widl-IDBDatabaseException-message">message</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="fields">Fields</h5><dl class="fields"><dt id="widl-IDBDatabaseException-code"><code>code</code> of type <span class="idlFieldType"><a>attribute unsigned short</a></span></dt><dd>
              Return the most appropriate error code.
            </dd><dt id="widl-IDBDatabaseException-message"><code>message</code> of type <span class="idlFieldType"><a>attribute DOMString</a></span></dt><dd>
              Return an error message describing the exception raised. 
              The message should be localized to the user's language.
            </dd></dl></div><div class="section"><h5 id="constants-1">Constants</h5><dl class="constants"><dt id="widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>A mutation operation in the transaction failed due to a
            because a constraint was not satisfied. For example, an
            object such as an object store or index already
            exists and a new one was being attempted to be created.</dd><dt id="widl-IDBDatabaseException-DATA_ERR"><code>DATA_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>Data provided to an operation does not meet requirements.</dd><dt id="widl-IDBDatabaseException-DEADLOCK_ERR"><code>DEADLOCK_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The current transaction was automatically rolled back
            by the database because of deadlock or other transaction
            serialization failures.</dd><dt id="widl-IDBDatabaseException-NON_TRANSIENT_ERR"><code>NON_TRANSIENT_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This error occurred because an operation was not allowed on 
            an object. A retry of the same operation would fail unless the
            cause of the error is corrected.</dd><dt id="widl-IDBDatabaseException-NOT_ALLOWED_ERR"><code>NOT_ALLOWED_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>A mutation operation was attempted on a database that
            did not allow mutations.</dd><dt id="widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The operation failed because the requested database
            object could not be found. For example, an object store
            did not exist but was being opened.</dd><dt id="widl-IDBDatabaseException-RECOVERABLE_ERR"><code>RECOVERABLE_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The operation failed because the database was prevented
            from taking an action. The operation might be able to succeed
            if the application performs some recovery steps and retries
            the entire transaction. For example, there was not enough 
            remaining storage space, or the storage quota was reached
            and the user declined to give more space to the database.</dd><dt id="widl-IDBDatabaseException-SERIAL_ERR"><code>SERIAL_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The operation failed because of the size of the data set 
            being returned or because there was a problem in serializing or 
            deserializing the object being processed.</dd><dt id="widl-IDBDatabaseException-TIMEOUT_ERR"><code>TIMEOUT_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>A lock for the transaction could not be obtained in a
            reasonable time.</dd><dt id="widl-IDBDatabaseException-TRANSIENT_ERR"><code>TRANSIENT_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The operation failed because of some temporary problems.
            The failed operation might be able to succeed when the
            operation is retried without any intervention by 
            application-level functionality.</dd><dt id="widl-IDBDatabaseException-UNKNOWN_ERR"><code>UNKNOWN_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The operation failed for reasons unrelated to the database
              itself and not covered by any other error code.</dd></dl></div>
        </div>
      </div>  
      <div class="section" id="async-api"> 
        <h3><span class="secno">3.2 </span>Asynchronous APIs</h3>
        <p>
          The asynchronous API methods return without blocking the calling thread.
          All asynchronous operations return an <a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a> instance,
          which can be used to access the results of the operation as they become available.
        </p>
        <div class="section" id="events">
          <h4><span class="secno">3.2.1 </span>Event interfaces</h4>
          <p>
            Events are fired during asynchronous access as <a class="internalDFN" href="#dfn-database">database</a> 
            <a>objects</a> are created and data is consumed from these objects. 
            As requests are made to <a class="internalDFN" href="#dfn-database">database</a> <a>objects</a>, the user 
            agent loads information about them into memory and when the required
            object handle is available, it alerts the application through the
            firing of events. The events are as follows:
          </p>
          <p>The <a class="idlType" href="#idl-def-IDBEvent"><code>IDBEvent</code></a> interface extends
            the <code>Event</code> interface defined in [<cite><a href="#bib-DOM-LEVEL-3-EVENTS" rel="biblioentry" class="bibref">DOM-LEVEL-3-EVENTS</a></cite>].
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBEvent">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBEvent</span> : <span class="idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span> <span class="idlAttrName"><a href="#widl-IDBEvent-source">source</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-1">Attributes</h5><dl class="attributes"><dt id="widl-IDBEvent-source"><code>source</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>Returns the asynchronous request object that fired this event.<div><em>No exceptions.</em></div></dd></dl></div>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBSuccessEvent">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBSuccessEvent</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-IDBEvent"><code>IDBEvent</code></a></span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span> <span class="idlAttrName"><a href="#widl-IDBSuccessEvent-result">result</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-2">Attributes</h5><dl class="attributes"><dt id="widl-IDBSuccessEvent-result"><code>result</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>Returns the result of the successful completion of an asynchronous request
            on the <a class="idlType" href="#widl-IDBEvent-source"><code>source</code></a>.<div><em>No exceptions.</em></div></dd></dl></div>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBTransactionEvent">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBTransactionEvent</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-IDBSuccessEvent"><code>IDBSuccessEvent</code></a></span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a></span> <span class="idlAttrName"><a href="#widl-IDBTransactionEvent-transaction">transaction</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-3">Attributes</h5><dl class="attributes"><dt id="widl-IDBTransactionEvent-transaction"><code>transaction</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a></span>, readonly</dt><dd>Returns the transaction used for the request 
            on the <a class="idlType" href="#widl-IDBEvent-source"><code>source</code></a>.<div><em>No exceptions.</em></div></dd></dl></div>

          <pre class="idl"><span class="idlInterface" id="idl-def-IDBErrorEvent">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBErrorEvent</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-IDBEvent"><code>IDBEvent</code></a></span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-IDBErrorEvent-code">code</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>      <span class="idlAttrName"><a href="#widl-IDBErrorEvent-message">message</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-4">Attributes</h5><dl class="attributes"><dt id="widl-IDBErrorEvent-code"><code>code</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>Returns the most appropriate error code from carrying out the asynchronous request
            on the <a class="idlType" href="#widl-IDBEvent-source"><code>source</code></a>. The 
            valid values of this error code are defined on the exception
            <a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a>.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBErrorEvent-message"><code>message</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>Returns the describing the reason for the error. The message should be localized 
            to the user's language.<div><em>No exceptions.</em></div></dd></dl></div>

          <pre class="idl"><span class="idlInterface" id="idl-def-IDBVersionChangeEvent">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBVersionChangeEvent</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-IDBEvent"><code>IDBEvent</code></a></span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBVersionChangeEvent-version">version</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-5">Attributes</h5><dl class="attributes"><dt id="widl-IDBVersionChangeEvent-version"><code>version</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>Returns the new version of the database during a VERSION_CHANGE transaction.
            See the <a class="internalDFN" href="#dfn-steps-for-running-a-version_change-transaction">steps for running a <code>VERSION_CHANGE</code> transaction</a>.<div><em>No exceptions.</em></div></dd></dl></div>

        </div>
        
        <div class="section" id="request-api">
          <h4><span class="secno">3.2.2 </span>The <code>IDBRequest</code> Interface</h4>
          <p>
            The <a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a> interface provides means to access results of  
            asynchronous requests to <a class="internalDFN" href="#dfn-database" title="database">databases</a> and <a class="internalDFN" href="#dfn-database">database</a> 
            <a>objects</a> using <a class="internalDFN" href="#event-handler-attributes">event handler attributes</a> [<cite><a href="#bib-DOM-LEVEL-3-EVENTS" rel="biblioentry" class="bibref">DOM-LEVEL-3-EVENTS</a></cite>]. 
          </p>
          <div class="example"><div class="exampleHeader">Example</div>       
            <p>
              In the following example, we open a <a class="internalDFN" href="#dfn-database">database</a> asynchronously. Various 
              event handlers are registered for responding to various situations.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">
 var request = indexedDB.<a>open</a>('AddressBook', 'Address Book');
 request.<a class="internalDFN" href="#handler-request-onsuccess">onsuccess</a> = function(evt) {...};
 request.<a class="internalDFN" href="#handler-request-onerror">onerror</a> = function(evt) {...};
            </code></pre></div></div>
          </div>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBRequest">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBRequest</span> : <span class="idlSuperclass"><a>EventTarget</a></span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-IDBRequest-abort">abort</a></span> ();</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBRequest-LOADING">LOADING</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBRequest-DONE">DONE</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-IDBRequest-readyState">readyState</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>       <span class="idlAttrName"><a href="#widl-IDBRequest-onsuccess">onsuccess</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>       <span class="idlAttrName"><a href="#widl-IDBRequest-onerror">onerror</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-6">Attributes</h5><dl class="attributes"><dt id="widl-IDBRequest-onerror"><code>onerror</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a><div><em>No exceptions.</em></div></dd><dt id="widl-IDBRequest-onsuccess"><code>onsuccess</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a><div><em>No exceptions.</em></div></dd><dt id="widl-IDBRequest-readyState"><code>readyState</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>Every request starts in the 
            <a class="idlType" href="#widl-IDBRequest-LOADING"><code>LOADING</code></a> state.
            When either the request completes, fails or aborts successfully, the state changes to 
            <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>.<div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-1">Methods</h5><dl class="methods"><dt id="widl-IDBRequest-abort"><code>abort</code></dt><dd>This method has no effect if the 
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            is <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>.
            If made on a read request, the implementation discontinues the in-flight request 
            even if the implementation has already read the data, and is ready to fire a
            <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a>. The <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> 
            is always fired if <a class="idlType" href="#widl-IDBRequest-abort"><code>abort()</code></a> 
            is called, and the <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is suppressed.
            The <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            moves to <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>.
            If the request aborts successfully, the
            <a class="idlType" href="#widl-IDBRequest-onerror"><code>error</code></a> is set
            to <a class="idlType" href="#widl-IDBDatabaseException-UNKNOWN_ERR"><code>UNKNOWN_ERR</code></a>.<div><em>No parameters.</em></div><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div><div class="section"><h5 id="constants-2">Constants</h5><dl class="constants"><dt id="widl-IDBRequest-DONE"><code>DONE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This state indicates that a result to a previous request is available in
            the <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> attribute.</dd><dt id="widl-IDBRequest-LOADING"><code>LOADING</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This state indicates that a request has been started but its results is not
            yet available.</dd></dl></div>
          <p>
            When a request is made, the 
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a> changes to 
            <a class="idlType" href="#widl-IDBRequest-LOADING"><code>LOADING</code></a>. 
            If a request completes successfully, the
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            changes to <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>, 
            the result of the request is included as the 
            <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> of
            a new <a class="idlType" href="#idl-def-IDBSuccessEvent"><code>IDBSuccessEvent</code></a> 
            event, and <a>queue a task</a> to fire that event with the name <code>success</code>, 
            with no namespace, which does not bubble, is not cancelable at each 
            <a class="externalDFN"><code>Window</code></a> object.
          </p>
          <p>
            If an error occurs while performing the operation, the 
            <a class="idlType" href="#widl-IDBRequest-readyState"><code>readyState</code></a>
            changes to <a class="idlType" href="#widl-IDBRequest-DONE"><code>DONE</code></a>, 
            the error code and message are included in a new <a><code>IDBDatabaseError</code></a>
            event, and <a>queue a task</a> to fire that event with the name 
            <code>error</code>, with no namespace, which does not bubble, is 
            not cancelable at each <a class="externalDFN"><code>Window</code></a> object.
          </p>
           
          <p>
            The <span>task source</span> for these tasks is the 
            <dfn id="database-access-task-source">database access task source</dfn>.
          </p>    
          <p>
            The following are the <span>event handlers</span> (and their corresponding 
            <span>event handler event types</span>) that <em title="must" class="rfc2119">must</em> be supported, as IDL
            attributes, by objects implementing the <a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a> interface:
          </p>
          
          <table>
            <thead><tr>
              <th><span>Event handler</span> </th>
              <th><span>Event handler event type</span></th>
              <th><span>Event interface(s)</span></th>
            </tr></thead>
            <tbody>
              <tr>
                <td><dfn id="handler-request-onsuccess"><code>onsuccess</code></dfn> </td>
                <td> <code><dfn id="dfn-event-success" title="event-success">success</dfn></code></td>
                <td> <a class="idlType" href="#idl-def-IDBSuccessEvent"><code>IDBSuccessEvent</code></a>,
                <a class="idlType" href="#idl-def-IDBTransactionEvent"><code>IDBTransactionEvent</code></a></td>
              </tr>
              <tr>
                <td><dfn id="handler-request-onerror"><code>onerror</code></dfn> </td>
                <td> <code><dfn id="dfn-event-error" title="event-error">error</dfn></code></td>
                <td> <a class="idlType" href="#idl-def-IDBErrorEvent"><code>IDBErrorEvent</code></a></td>
              </tr>
            </tbody>
          </table>        

          <p>
            The following are the <span>event handlers</span> (and their corresponding 
            <span>event handler event types</span>) that <em title="must" class="rfc2119">must</em> be supported, as IDL
            attributes, by objects implementing the <a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a> interface:
          </p>
          
          <table>
            <thead><tr>
              <th><span>Event handler</span> </th>
              <th><span>Event handler event type</span></th>
            </tr></thead>
            <tbody>
              <tr>
                <td><dfn id="handler-request-oncomplete"><code>oncomplete</code></dfn> </td>
                <td> <code><dfn id="dfn-event-complete" title="event-complete">complete</dfn></code></td>
              </tr>
              <tr>
                <td><dfn id="handler-request-onabort"><code>onabort</code></dfn> </td>
                <td> <code><dfn id="dfn-event-abort" title="event-abort">abort</dfn></code></td>
              </tr>
              <tr>
                <td><dfn id="handler-request-ontimeout"><code>ontimeout</code></dfn> </td>
                <td> <code><dfn id="dfn-event-timeout" title="event-timeout">timeout</dfn></code></td>
              </tr>
            </tbody>
          </table>        
        </div>
        
        <div class="section" id="requests">
          <h4><span class="secno">3.2.3 </span>Opening a database</h4>
         <p>
            <a title="Window" class="externalDFN"><code>Window</code></a> and 
            <a title="Worker" class="externalDFN"><code>Worker</code></a> objects 
            <em title="must" class="rfc2119">must</em> implement the <a class="idlType" href="#idl-def-IDBEnvironment"><code>IDBEnvironment</code></a> interface.
          </p>
          <pre class="idl"><span class="idlImplements"><a>Window</a> implements <a class="idlType" href="#idl-def-IDBEnvironment"><code>IDBEnvironment</code></a>;</span></pre><div class="idlImplementsDesc">
          </div><pre class="idl"><span class="idlImplements"><a>Worker</a> implements <a class="idlType" href="#idl-def-IDBEnvironment"><code>IDBEnvironment</code></a>;</span></pre><div class="idlImplementsDesc">
          </div>
          
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBEnvironment">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBEnvironment</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBFactory"><code>IDBFactory</code></a></span> <span class="idlAttrName"><a href="#widl-IDBEnvironment-indexedDB">indexedDB</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-7">Attributes</h5><dl class="attributes"><dt id="widl-IDBEnvironment-indexedDB"><code>indexedDB</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBFactory"><code>IDBFactory</code></a></span>, readonly</dt><dd>This attribute provides applications a mechanism for accessing
              capabilities of indexed databases.<div><em>No exceptions.</em></div></dd></dl></div>
          <p>
            Every method for making asynchronous requests returns an 
            <a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a> object that communicates back to the requesting
            application through events.
            This design means that any number of requests can be active on any <a class="internalDFN" href="#dfn-database">database</a>
            or <a title="objects">object</a> handle at a time. 
          </p>

          <pre class="idl"><span class="idlInterface" id="idl-def-IDBFactory">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBFactory</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMStringList</a></span> <span class="idlAttrName"><a href="#widl-IDBFactory-databases">databases</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBFactory-open">open</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">description</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-8">Attributes</h5><dl class="attributes"><dt id="widl-IDBFactory-databases"><code>databases</code> of type <span class="idlAttrType"><a>DOMStringList</a></span>, readonly</dt><dd>
            This value is the list of the names of databases available in the global scope object.
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-2">Methods</h5><dl class="methods"><dt id="widl-IDBFactory-open"><code>open</code></dt><dd>
              <p>
                This method returns immediately and runs the
                following steps in a different thread.
                If an error occurs while the <a class="internalDFN" href="#dfn-database">database</a> <a class="internalDFN" href="#dfn-connection">connection</a> 
                is being opened, then an
                <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
                returned object with its 
                <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set
                to <a class="idlType" href="#widl-IDBDatabaseException-UNKNOWN_ERR"><code>UNKNOWN_ERR</code></a>
                and a suitable 
                <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              </p>
    
              <ol>
                <li>
                  Let <var>origin</var> be the origin of the active document 
                  from which the method was invoked.                
                </li>
                <li>
                  Perform the <a class="internalDFN" href="#dfn-steps-for-opening-a-database">steps for opening a database</a>, with 
                  <var>origin</var>, the <var>name</var> parameter and 
                  <var>description</var> parameter, and call its result as 
                  <var>result</var>.
                </li>
                <li>
                  If the steps were aborted with an error code, then set this 
                  request's <a class="idlType" href="#widl-IDBRequest-onerror"><code>error</code></a> with that 
                  code and abort these steps.
                </li>
                <li>
                  Create a <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a> object for <var>result</var>
                  and call it <var>db</var>.
                </li>
                <li>
                  Fire a <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> on this 
                  method's returned object using the <a class="idlType" href="#idl-def-IDBSuccessEvent"><code>IDBSuccessEvent</code></a> interface with its 
                  <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> 
                  set to <var>db</var>.
              </li></ol>              
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-database-name" title="database name">name</a> for the <a class="internalDFN" href="#dfn-database">database</a></td></tr><tr><td class="prmName">description</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The description for the <a class="internalDFN" href="#dfn-database">database</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NON_TRANSIENT_ERR</code></td><td class="excCodeDesc">if the <var>name</var> parameter is not <a>valid</a></td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd></dl></div>
        </div>
        <div id="database-interface" class="section">
          <h4><span class="secno">3.2.4 </span>Database</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            A <a class="internalDFN" href="#dfn-database">database</a> object can be used to manipulate the 
            <a>objects</a> of that <a class="internalDFN" href="#dfn-database">database</a>. That is also the only way to 
            obtaining a <a class="internalDFN" href="#dfn-transaction">transaction</a> for that <a class="internalDFN" href="#dfn-database">database</a>.
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBDatabase">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBDatabase</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBDatabase-name">name</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBDatabase-description">description</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBDatabase-version">version</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMStringList</a></span> <span class="idlAttrName"><a href="#widl-IDBDatabase-objectStores">objectStores</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a></span> <span class="idlMethName"><a href="#widl-IDBDatabase-createObjectStore">createObjectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">[<span class="extAttr">TreatNullAs=EmptyString</span>] in optional <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">keyPath</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">autoIncrement</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a></span> <span class="idlMethName"><a href="#widl-IDBDatabase-objectStore">objectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">mode</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">timeout</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>           <span class="idlMethName"><a href="#widl-IDBDatabase-removeObjectStore">removeObjectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span>     <span class="idlMethName"><a href="#widl-IDBDatabase-setVersion">setVersion</a></span> (<span class="idlParam">[<span class="extAttr">TreatNullAs=EmptyString</span>] in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">version</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a></span> <span class="idlMethName"><a href="#widl-IDBDatabase-transaction">transaction</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a>DOMStringList</a></span> <span class="idlParamName">storeNames</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">mode</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">timeout</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>           <span class="idlMethName"><a href="#widl-IDBDatabase-close">close</a></span> ();</span>
};</span>
</pre><div class="section"><h5 id="attributes-9">Attributes</h5><dl class="attributes"><dt id="widl-IDBDatabase-description"><code>description</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return the description of the
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> at the time of opening.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBDatabase-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return the <a class="internalDFN" href="#dfn-database-name" title="database name">name</a>
              of the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBDatabase-objectStores"><code>objectStores</code> of type <span class="idlAttrType"><a>DOMStringList</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return a list of names of the 
              <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> currently in the 
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBDatabase-version"><code>version</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return the <a class="internalDFN" href="#dfn-version">version</a> of this
              <a class="internalDFN" href="#dfn-database">database</a>. This attribute has the <a>null</a> value when the
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> is first created.
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-3">Methods</h5><dl class="methods"><dt id="widl-IDBDatabase-close"><code>close</code></dt><dd>
              This method returns immediately and performs the <a class="internalDFN" href="#dfn-steps-for-closing-a-database-connection">steps for closing a database connection</a>.
            <div><em>No parameters.</em></div><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBDatabase-createObjectStore"><code>createObjectStore</code></dt><dd>
              <p>
                This method creates and returns a new <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name in the 
                <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>. Note that this method must only
                be called from a <a><code>VERSION_CHANGE</code></a> <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.
              </p>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of a new <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr><tr><td class="prmName">keyPath</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a> of a new 
                <a class="internalDFN" href="#dfn-object-store">object store</a>. If <a>empty</a> path is specified, then the 
                <a class="internalDFN" href="#dfn-object-store">object store</a> created will not have a <a>key path</a> and will
                use <a class="internalDFN" href="#dfn-out-of-line-keys">out-of-line keys</a>.</td></tr><tr><td class="prmName">autoIncrement</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Whether the <a class="internalDFN" href="#dfn-object-store">object store</a> created should have a 
                <a class="internalDFN" href="#dfn-key-generator">key generator</a>. This defaults to <code>true</code>.</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This method was not called from a <a><code>VERSION_CHANGE</code></a> <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.</td></tr><tr><td class="excCodeName"><code>CONSTRAINT_ERR</code></td><td class="excCodeDesc">An <a class="internalDFN" href="#dfn-object-store">object store</a> with the same name, compared in a 
                case-sensitive manner, already exists in the 
                <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>. </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a></code></div></dd><dt id="widl-IDBDatabase-objectStore"><code>objectStore</code></dt><dd>
              This method implicitly creates a <a class="internalDFN" href="#dfn-transaction">transaction</a> and opens the 
              <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name in the 
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> as the
              <a class="internalDFN" href="#dfn-transaction">transaction</a>'s <a class="internalDFN" href="#dfn-static">static</a> <a>scope</a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of an existing 
                <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr><tr><td class="prmName">mode</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-mode">mode</a> used to access the <a class="internalDFN" href="#dfn-object-store">object store</a>, which defaults to 
                <code>READ_ONLY</code>.</td></tr><tr><td class="prmName">timeout</td><td class="prmType"><code><a>unsigned long</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The interval which this operation is allowed to take to
                reserve all the <a class="internalDFN" href="#dfn-database">database</a> objects identified in the new
                <a class="internalDFN" href="#dfn-transaction" title="transaction">transaction's</a> <a>scope</a>. The default
                is user agent specific.</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">There is no <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name, compared in a 
                case-sensitive manner, in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a></code></div></dd><dt id="widl-IDBDatabase-removeObjectStore"><code>removeObjectStore</code></dt><dd>
              <p>
                This method destroys the <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name in the 
                <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> as well as 
                all <a class="internalDFN" href="#dfn-index" title="index">indexes</a> that are 
                <a class="internalDFN" href="#dfn-referenced" title="referenced">referencing</a> that <a class="internalDFN" href="#dfn-object-store">object store</a>.
                Note that this method must only be called from a <a><code>VERSION_CHANGE</code></a>
                <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.
              </p>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of an existing
                <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This method was not called from a <a><code>VERSION_CHANGE</code></a> <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.</td></tr><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">There is no <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name, compared in a 
                case-sensitive manner, in the  <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBDatabase-setVersion"><code>setVersion</code></dt><dd>
              This method returns immediately and sets the <a class="internalDFN" href="#dfn-version">version</a> of the 
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> by following the
              <a class="internalDFN" href="#dfn-steps-for-running-a-version_change-transaction">steps for running a <code>VERSION_CHANGE</code> transaction</a>. 
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">version</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-version">version</a> to store in the <a class="internalDFN" href="#dfn-database">database</a></td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBDatabase-transaction"><code>transaction</code></dt><dd> This method returns an <a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a> object immediately and 
              performs the <a class="internalDFN" href="#dfn-create-a-static-transaction" title="create a static transaction">steps for creating a transaction</a> with either the list of 
              <a class="internalDFN" href="#dfn-object-store">object store</a> <a class="internalDFN" href="#dfn-object-store-name" title="object store name">names</a>
              for acquiring locks required in this <a class="internalDFN" href="#dfn-transaction">transaction</a> or the 
              global flag set to true, and an optional timeout duration. The global flag is set only if 
              the list is either empty, not passed or passed as  <code>null</code>. If reserving all the 
              <a class="internalDFN" href="#dfn-object-store">object store</a>s identified in the requested <a>scope</a>
              takes longer than the specified timeout interval, then an
              <a class="internalDFN" href="#dfn-event-timeout" title="event-timeout">timeout event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-TIMEOUT_ERR"><code>TIMEOUT_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">storeNames</td><td class="prmType"><code><a>DOMStringList</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The names of <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> and 
                <a class="internalDFN" href="#dfn-index" title="index">indexes</a> in the <a>scope</a> of the new
                <a class="internalDFN" href="#dfn-transaction">transaction</a></td></tr><tr><td class="prmName">mode</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc"> The <a class="internalDFN" href="#dfn-mode">mode</a> for isolating access to data inside the given
                <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a>. If this parameter is not provided, the default
                access <a class="internalDFN" href="#dfn-mode">mode</a> is <code>READ_ONLY</code>.</td></tr><tr><td class="prmName">timeout</td><td class="prmType"><code><a>unsigned long</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The interval, specified in milliseconds, which this operation is allowed to take to
                reserve all the <a class="internalDFN" href="#dfn-database">database</a> objects identified in the new
                <a class="internalDFN" href="#dfn-transaction" title="transaction">transaction's</a> <a>scope</a>. The default
                is user agent specific</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>TIMEOUT_ERR</code></td><td class="excCodeDesc">The required locks could not be acquired in the given timeout interval</td></tr><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">The <code>close()</code> method has been called on this IDBDatabase instance and
                its internal <code>closePending</code> flag is set.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a></code></div></dd></dl></div>
        </div>
        <div class="section" id="object-store">
          <h4><span class="secno">3.2.5 </span>Object Store</h4>
          <a class="internalDFN" href="#dfn-object-store" title="object store">Object store</a> objects implement the following
          interface:
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBObjectStore">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBObjectStore</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBObjectStore-name">name</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBObjectStore-keyPath">keyPath</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMStringList</a></span> <span class="idlAttrName"><a href="#widl-IDBObjectStore-indexNames">indexNames</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBObjectStore-put">put</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBObjectStore-add">add</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBObjectStore-remove">remove</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBObjectStore-get">get</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBObjectStore-openCursor">openCursor</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlParamName">range</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">direction</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBIndex"><code>IDBIndex</code></a></span>   <span class="idlMethName"><a href="#widl-IDBObjectStore-createIndex">createIndex</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">keyPath</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">unique</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBIndex"><code>IDBIndex</code></a></span>   <span class="idlMethName"><a href="#widl-IDBObjectStore-index">index</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>       <span class="idlMethName"><a href="#widl-IDBObjectStore-removeIndex">removeIndex</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">indexName</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-10">Attributes</h5><dl class="attributes"><dt id="widl-IDBObjectStore-indexNames"><code>indexNames</code> of type <span class="idlAttrType"><a>DOMStringList</a></span>, readonly</dt><dd>
            On getting, provide a list of the names of <a class="internalDFN" href="#dfn-index" title="index">indexes</a> on 
            objects in this <a class="internalDFN" href="#dfn-object-store">object store</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBObjectStore-keyPath"><code>keyPath</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>
              of this <a class="internalDFN" href="#dfn-object-store">object store</a>. If this attribute is <code>null</code>,
              the application <em title="must" class="rfc2119">must</em> provide a key value for each modification operation.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBObjectStore-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>          
              On getting, provide the <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of this
              object store.        
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-4">Methods</h5><dl class="methods"><dt id="widl-IDBObjectStore-add"><code>add</code></dt><dd>
              This method returns immediately and stores the given value in this 
              <a class="internalDFN" href="#dfn-object-store">object store</a> by following the 
              <a class="internalDFN" href="#dfn-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</a> with the 
              no-overwrite flag set. If the <a class="internalDFN" href="#dfn-record">record</a> can be successfully 
              stored in the <a class="internalDFN" href="#dfn-object-store">object store</a>, then a 
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a class="idlType" href="#idl-def-IDBTransactionEvent"><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the key for the stored record and 
              <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a class="internalDFN" href="#dfn-transaction">transaction</a> in which this <a class="internalDFN" href="#dfn-object-store">object store</a> is 
              opened. If a <a class="internalDFN" href="#dfn-record">record</a> exists in this <a class="internalDFN" href="#dfn-object-store">object store</a> for 
              the key <var>key</var> parameter, then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code></a>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The value to be stored in the <a class="internalDFN" href="#dfn-record">record</a></td></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The key used to identify the <a class="internalDFN" href="#dfn-record">record</a>, which defaults 
                to <code>null</code></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a> or
                the associated <a class="internalDFN" href="#dfn-transaction">transaction</a> <a class="internalDFN" href="#dfn-mode"><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</td></tr><tr><td class="excCodeName"><code>DATA_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a class="internalDFN" href="#dfn-out-of-line-keys">out-of-line keys</a> and
                no <a class="internalDFN" href="#dfn-key-generator">key generator</a> but the <var>key</var> parameter was not
                passed, or the <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a> and
                no <a class="internalDFN" href="#dfn-key-generator">key generator</a> but the <var>value</var> object does not
                have a property identified by the store's
                <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>.</td></tr><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be serialized by the internal
                structured cloning algorithm.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBObjectStore-createIndex"><code>createIndex</code></dt><dd>
              <p>
                This creates and returns a new <a class="internalDFN" href="#dfn-index">index</a> with the given name and parameters in the 
                <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.  Note that this method must only
                be called from a <a><code>VERSION_CHANGE</code></a> <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.
              </p>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of a new <a class="internalDFN" href="#dfn-index">index</a></td></tr><tr><td class="prmName">keyPath</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-key-path" title="index key path">key path</a> used by the new
                <a class="internalDFN" href="#dfn-index">index</a></td></tr><tr><td class="prmName">unique</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-unique">unique</a> flag for the new <a class="internalDFN" href="#dfn-index">index</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This method was not called from a <a><code>VERSION_CHANGE</code></a> 
                <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.</td></tr><tr><td class="excCodeName"><code>CONSTRAINT_ERR</code></td><td class="excCodeDesc">An <a class="internalDFN" href="#dfn-index">index</a> with the same name, compared in a 
                case-sensitive manner, already exists in the 
                <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>. </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBIndex"><code>IDBIndex</code></a></code></div></dd><dt id="widl-IDBObjectStore-get"><code>get</code></dt><dd>
              This method returns immediately and retrieves the value from this 
              <a class="internalDFN" href="#dfn-object-store">object store</a> for the record corresponding to the given key 
              by following the 
              <a class="internalDFN" href="#dfn-steps-for-retrieving-a-record-from-an-object-store">steps for retrieving a record from an object store</a>. 
              If the operation is successful, then the 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> of this object's request
              is set to the retrieved value. If a record did not exist in this 
              <a class="internalDFN" href="#dfn-object-store">object store</a> for the key <var>key</var> parameter, then an 
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>. If the <a class="internalDFN" href="#dfn-record">record</a> can be successfully 
              retrieved from the <a class="internalDFN" href="#dfn-object-store">object store</a>, then a 
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a class="idlType" href="#idl-def-IDBTransactionEvent"><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the value of the retrieved <a class="internalDFN" href="#dfn-record">record</a> and <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a class="internalDFN" href="#dfn-transaction">transaction</a> in which this <a class="internalDFN" href="#dfn-object-store">object store</a> is 
              opened. 
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the <a class="internalDFN" href="#dfn-record">record</a> to be retrieved</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBObjectStore-index"><code>index</code></dt><dd>
              <p>
                This method returns immediately and opens the <a class="internalDFN" href="#dfn-index">index</a> with the
                given name in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
              </p>              
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of an existing <a class="internalDFN" href="#dfn-index">index</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">There is no <a class="internalDFN" href="#dfn-index">index</a> with the given name, compared in a 
                case-sensitive manner, in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBIndex"><code>IDBIndex</code></a></code></div></dd><dt id="widl-IDBObjectStore-openCursor"><code>openCursor</code></dt><dd>
              This method returns immediately and creates a <a class="internalDFN" href="#dfn-cursor">cursor</a> over the 
              <a>records</a> of this <a class="internalDFN" href="#dfn-object-store">object store</a>. The <a class="internalDFN" href="#dfn-range">range</a> of this
              <a class="internalDFN" href="#dfn-cursor">cursor</a> matches the <a class="internalDFN" href="#dfn-key-range">key range</a> specified as the
              <var>range</var> parameter, or if that parameter is not specified or
              <code>null</code>, then the range includes all the <a>records</a>. 
              If there is even a single record that matches the <a class="internalDFN" href="#dfn-key-range">key range</a>, then a
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to the
              <a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a> object for that <a class="internalDFN" href="#dfn-cursor">cursor</a>. If no
              records match the <a class="internalDFN" href="#dfn-key-range">key range</a>, then an 
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this method's
              returned object with its
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a>
              set to <code>null</code>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">range</td><td class="prmType"><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-key-range">key range</a> to use as the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a></td></tr><tr><td class="prmName">direction</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-cursor">cursor</a>'s required <a class="internalDFN" href="#dfn-direction">direction</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBObjectStore-put"><code>put</code></dt><dd>
              This method returns immediately and stores the given value in this 
              <a class="internalDFN" href="#dfn-object-store">object store</a> by following the 
              <a class="internalDFN" href="#dfn-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</a>. If the 
              <a class="internalDFN" href="#dfn-record">record</a> can be successfully stored in the <a class="internalDFN" href="#dfn-object-store">object store</a>, then 
              a <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a class="idlType" href="#idl-def-IDBTransactionEvent"><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the key for the stored <a class="internalDFN" href="#dfn-record">record</a> and 
              <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a class="internalDFN" href="#dfn-transaction">transaction</a> in which this <a class="internalDFN" href="#dfn-object-store">object store</a> is 
              opened.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The value to be stored in the <a class="internalDFN" href="#dfn-record">record</a></td></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The key used to identify the <a class="internalDFN" href="#dfn-record">record</a>, which defaults 
                to <code>null</code></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a> or
                the associated <a class="internalDFN" href="#dfn-transaction">transaction</a> <a class="internalDFN" href="#dfn-mode"><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</td></tr><tr><td class="excCodeName"><code>DATA_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a class="internalDFN" href="#dfn-out-of-line-keys">out-of-line keys</a> and
                no <a class="internalDFN" href="#dfn-key-generator">key generator</a> but the <var>key</var> parameter was not
                passed, or the <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a> and
                no <a class="internalDFN" href="#dfn-key-generator">key generator</a> but the <var>value</var> object does not
                have a property identified by the store's 
                <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>.</td></tr><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be serialized by the internal
                structured cloning algorithm.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBObjectStore-remove"><code>remove</code></dt><dd>
              This method returns immediately and removes the <a class="internalDFN" href="#dfn-record">record</a> from 
              this <a class="internalDFN" href="#dfn-object-store">object store</a> by following the 
              <a class="internalDFN" href="#dfn-steps-for-deleting-a-record-from-an-object-store">steps for deleting a record from an object store</a> 
              corresponding to the given key. If a <a class="internalDFN" href="#dfn-record">record</a> did not exist 
              in this <a class="internalDFN" href="#dfn-object-store">object store</a> for the <var>key</var> parameter, 
              then an <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this 
              method's returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>. If the <a class="internalDFN" href="#dfn-record">record</a> can be successfully 
              removed from the <a class="internalDFN" href="#dfn-object-store">object store</a>, then a 
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this 
              method's returned object using the 
              <a class="idlType" href="#idl-def-IDBTransactionEvent"><code>IDBTransactionEvent</code></a> interface with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to
              the value of the removed <a class="internalDFN" href="#dfn-record">record</a> and <a class="idlType" href="#widl-IDBTransactionEvent-transaction"><code>transaction</code></a> 
              set to the <a class="internalDFN" href="#dfn-transaction">transaction</a> in which this <a class="internalDFN" href="#dfn-object-store">object store</a> is 
              opened. 
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the <a class="internalDFN" href="#dfn-record">record</a> to be removed</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a> or
                the associated <a class="internalDFN" href="#dfn-transaction">transaction</a> <a class="internalDFN" href="#dfn-mode"><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBObjectStore-removeIndex"><code>removeIndex</code></dt><dd>
              <p>
                This method destroys the <a class="internalDFN" href="#dfn-index">index</a> with the given name in the
                <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>. Note that this
                method must only be called from a <a><code>VERSION_CHANGE</code></a>
                <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.
              </p>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">indexName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of an existing <a class="internalDFN" href="#dfn-index">index</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This method was not called from a <a><code>VERSION_CHANGE</code></a>
                <a class="internalDFN" href="#dfn-transaction">transaction</a> callback.</td></tr><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">There is no <a class="internalDFN" href="#dfn-index">index</a> with the given name, compared in a 
                case-sensitive manner, in the  <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
        </div>
        <div class="section" id="index">
        <h4><span class="secno">3.2.6 </span>Index</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            <a class="internalDFN" href="#dfn-index" title="index">Index</a> objects implement the following interface:
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBIndex">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBIndex</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBIndex-name">name</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBIndex-storeName">storeName</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBIndex-keyPath">keyPath</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>boolean</a></span>   <span class="idlAttrName"><a href="#widl-IDBIndex-unique">unique</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a></span>  <span class="idlMethName"><a href="#widl-IDBIndex-openObjectCursor">openObjectCursor</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlParamName">range</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">direction</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBIndex-openCursor">openCursor</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlParamName">range</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">direction</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBIndex-getObject">getObject</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBIndex-get">get</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-11">Attributes</h5><dl class="attributes"><dt id="widl-IDBIndex-keyPath"><code>keyPath</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-index-key-path" title="index key path">key path</a> of this
              <a class="internalDFN" href="#dfn-index">index</a>. If this attribute is <code>null</code>,
              this <a class="internalDFN" href="#dfn-index">index</a> is not <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBIndex-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of this <a class="internalDFN" href="#dfn-index">index</a>.        
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBIndex-storeName"><code>storeName</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of this
              <a class="internalDFN" href="#dfn-index" title="index">index's</a> <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBIndex-unique"><code>unique</code> of type <span class="idlAttrType"><a>boolean</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-unique">unique</a> flag of this <a class="internalDFN" href="#dfn-index">index</a>.
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-5">Methods</h5><dl class="methods"><dt id="widl-IDBIndex-get"><code>get</code></dt><dd>
              This method returns immediately and retrieves the value from this <a class="internalDFN" href="#dfn-index">index</a>
              for the record corresponding to the given <var>key</var> parameter by 
              following the <a class="internalDFN" href="#dfn-steps-for-retrieving-a-value-from-an-index">steps for retrieving a value from an index</a>.
              If the operation is successful, then the 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> of this object's request
              is set to the retrieved value. If a record did not exist in this 
              <a class="internalDFN" href="#dfn-index">index</a> for the key <var>key</var> parameter, then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be retrieved</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBIndex-getObject"><code>getObject</code></dt><dd>
              This method returns immediately and retrieves the value from this <a class="internalDFN" href="#dfn-index">index</a>'s
              <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a> for the record corresponding to the given
              key by following the <a class="internalDFN" href="#dfn-steps-for-retrieving-a-record-from-an-index">steps for retrieving a record from an index</a>.
              If the operation is successful, then the 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> of this object's request
              is set to the retrieved value. If a record did not exist in this 
              <a class="internalDFN" href="#dfn-index">index</a> for the key <var>key</var> parameter, then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be retrieved</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBIndex-openCursor"><code>openCursor</code></dt><dd>
              This method returns immediately and creates a <a class="internalDFN" href="#dfn-cursor">cursor</a> over the 
              <a>records</a> of this <a class="internalDFN" href="#dfn-index">index</a>. The <a class="internalDFN" href="#dfn-range">range</a> of this <a class="internalDFN" href="#dfn-cursor">cursor</a>
              matches the <a class="internalDFN" href="#dfn-key-range">key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>. 
              If there is even a single record that matches the <a class="internalDFN" href="#dfn-key-range">key range</a>, then a
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to the 
              <a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a> object for that <a class="internalDFN" href="#dfn-cursor">cursor</a>. If no
              records match the <a class="internalDFN" href="#dfn-key-range">key range</a>, then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">range</td><td class="prmType"><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-key-range">key range</a> to use as the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a></td></tr><tr><td class="prmName">direction</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-cursor">cursor</a>'s required <a class="internalDFN" href="#dfn-direction">direction</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBIndex-openObjectCursor"><code>openObjectCursor</code></dt><dd>
              This method returns immediately and creates a <a class="internalDFN" href="#dfn-cursor">cursor</a> over the 
              <a>records</a> of this <a class="internalDFN" href="#dfn-index">index</a>'s <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a> 
              as arranged by this <a class="internalDFN" href="#dfn-index">index</a>. The <a class="internalDFN" href="#dfn-range">range</a> of this <a class="internalDFN" href="#dfn-cursor">cursor</a> 
              matches the <a class="internalDFN" href="#dfn-key-range">key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>.
              If there is even a single record that matches the <a class="internalDFN" href="#dfn-key-range">key range</a>, then a
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a> set to the
              <a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a> object for that <a class="internalDFN" href="#dfn-cursor">cursor</a>. If no
              records match the <a class="internalDFN" href="#dfn-key-range">key range</a>, then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">range</td><td class="prmType"><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-key-range">key range</a> to use as the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a></td></tr><tr><td class="prmName">direction</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-cursor">cursor</a>'s required <a class="internalDFN" href="#dfn-direction">direction</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a></code></div></dd></dl></div>
        </div>
        <div class="section" id="cursor">
          <h4><span class="secno">3.2.7 </span>Cursor</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            <a class="internalDFN" href="#dfn-cursor" title="cursor">Cursor</a> objects implement the following interface:
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBCursor">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBCursor</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursor-NEXT">NEXT</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursor-NEXT_NO_DUPLICATE">NEXT_NO_DUPLICATE</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursor-PREV">PREV</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursor-PREV_NO_DUPLICATE">PREV_NO_DUPLICATE</a></span> = <span class="idlConstValue">3</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span>     <span class="idlAttrName"><a href="#widl-IDBCursor-direction">direction</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span>                <span class="idlAttrName"><a href="#widl-IDBCursor-key">key</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span>                <span class="idlAttrName"><a href="#widl-IDBCursor-value">value</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned long long</a></span> <span class="idlAttrName"><a href="#widl-IDBCursor-count">count</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBCursor-update">update</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>boolean</a></span>    <span class="idlMethName"><a href="#widl-IDBCursor-continue">continue</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBCursor-remove">remove</a></span> () raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-12">Attributes</h5><dl class="attributes"><dt id="widl-IDBCursor-count"><code>count</code> of type <span class="idlAttrType"><a>unsigned long long</a></span>, readonly</dt><dd>             
              On getting, provide the approximate number of objects in the cursor.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBCursor-direction"><code>direction</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>            
            On getting, provide the traversal <a class="internalDFN" href="#dfn-direction">direction</a> of the <a class="internalDFN" href="#dfn-cursor">cursor</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBCursor-key"><code>key</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>The key for the record at the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBCursor-value"><code>value</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>The value for the record at the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>.<div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-6">Methods</h5><dl class="methods"><dt id="widl-IDBCursor-continue"><code>continue</code></dt><dd>
              This method returns immediately and advances the <a class="internalDFN" href="#dfn-cursor">cursor</a> to the next
              position along its <a class="internalDFN" href="#dfn-direction">direction</a> to the item whose key matches the
              optional parameter. If no such parameter is provided, advance to the
              immediate next position. If the <a class="internalDFN" href="#dfn-cursor">cursor</a> has reached the end of its
              <a class="internalDFN" href="#dfn-range">range</a>, then an
              <a class="internalDFN" href="#dfn-event-success" title="event-success">success event</a> is fired on this method's
              returned object with its
              <a class="idlType" href="#widl-IDBSuccessEvent-result"><code>result</code></a>
              set to <code>null</code>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The next key to position this <a class="internalDFN" href="#dfn-cursor">cursor</a> at</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>boolean</a></code></div></dd><dt id="widl-IDBCursor-remove"><code>remove</code></dt><dd>          
              <p>
                This method returns immediately and deletes the object at the 
                <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>. The cursor's
                position is not changed. Any attempts to retrieve the cursor's
                current value will return <code>null</code>.
              </p>
              
            <div><em>No parameters.</em></div><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a> or
                the associated <a class="internalDFN" href="#dfn-transaction">transaction</a> <a class="internalDFN" href="#dfn-mode"><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd><dt id="widl-IDBCursor-update"><code>update</code></dt><dd>
              This method returns immediately and sets the value for the record at the
              <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> is not in the <a>scope</a> of any existing <a class="internalDFN" href="#dfn-transaction">transaction</a> or
                the associated <a class="internalDFN" href="#dfn-transaction">transaction</a> <a class="internalDFN" href="#dfn-mode"><code>mode</code></a> is <code>READ_ONLY</code>
                or <code>SNAPSHOT_READ</code>.</td></tr><tr><td class="excCodeName"><code>DATA_ERR</code></td><td class="excCodeDesc"> The underlying <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a> and the property at the 
                <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a> does not match the key in this <a class="internalDFN" href="#dfn-cursor">cursor</a>'s
                <a class="internalDFN" href="#dfn-position">position</a>.</td></tr><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be serialized by the internal structured cloning
                algorithm.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd></dl></div><div class="section"><h5 id="constants-3">Constants</h5><dl class="constants"><dt id="widl-IDBCursor-NEXT"><code>NEXT</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that this <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, including  
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically increasing 
              order of keys.
            </dd><dt id="widl-IDBCursor-NEXT_NO_DUPLICATE"><code>NEXT_NO_DUPLICATE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that this <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, not including
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically increasing 
              order of keys. For every key with duplicate values, only the first
              record is yielded.
            </dd><dt id="widl-IDBCursor-PREV"><code>PREV</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, including  
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically decreasing 
              order of keys.
            </dd><dt id="widl-IDBCursor-PREV_NO_DUPLICATE"><code>PREV_NO_DUPLICATE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that this <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, not including
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically decreasing 
              order of keys. For every key with duplicate values, only the first
              record is yielded.
            </dd></dl></div>
        </div>
        <div class="section" id="transaction">
        <h4><span class="secno">3.2.8 </span>Transaction</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            <a class="internalDFN" href="#dfn-transaction" title="transaction">Static transaction</a> objects implement the following interface:
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBTransaction">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBTransaction</span> : <span class="idlSuperclass"><a>EventTarget</a></span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBTransaction-READ_WRITE">READ_WRITE</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBTransaction-READ_ONLY">READ_ONLY</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBTransaction-SNAPSHOT_READ">SNAPSHOT_READ</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBTransaction-VERSION_CHANGE">VERSION_CHANGE</a></span> = <span class="idlConstValue">3</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-IDBTransaction-mode">mode</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a></span>    <span class="idlAttrName"><a href="#widl-IDBTransaction-db">db</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a></span> <span class="idlMethName"><a href="#widl-IDBTransaction-objectStore">objectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>           <span class="idlMethName"><a href="#widl-IDBTransaction-abort">abort</a></span> ();</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>       <span class="idlAttrName"><a href="#widl-IDBTransaction-onabort">onabort</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>       <span class="idlAttrName"><a href="#widl-IDBTransaction-oncomplete">oncomplete</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>       <span class="idlAttrName"><a href="#widl-IDBTransaction-ontimeout">ontimeout</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-13">Attributes</h5><dl class="attributes"><dt id="widl-IDBTransaction-db"><code>db</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a></span>, readonly</dt><dd>The <a class="internalDFN" href="#dfn-database">database</a> <a class="internalDFN" href="#dfn-connection">connection</a> of which this <a class="internalDFN" href="#dfn-transaction">transaction</a>
              is a part
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBTransaction-mode"><code>mode</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>On getting, provide the <a class="internalDFN" href="#dfn-mode">mode</a> for isolating access to data inside
            the <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> that are in the
            <a>scope</a> of the <a class="internalDFN" href="#dfn-transaction">transaction</a>.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBTransaction-onabort"><code>onabort</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#handler-request-onabort">onabort</a> event.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBTransaction-oncomplete"><code>oncomplete</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#handler-request-oncomplete">oncomplete</a> event.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBTransaction-ontimeout"><code>ontimeout</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#handler-request-ontimeout">ontimeout</a> event.<div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-7">Methods</h5><dl class="methods"><dt id="widl-IDBTransaction-abort"><code>abort</code></dt><dd>
              This method returns immediately and undoes all the changes performed to 
              the <a>objects</a> of this <a class="internalDFN" href="#dfn-database">database</a> in this <a class="internalDFN" href="#dfn-transaction">transaction</a>. If this <a class="internalDFN" href="#dfn-transaction">transaction</a> 
              has already been committed or aborted,  then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NON_TRANSIENT_ERR"><code>NON_TRANSIENT_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
            <div><em>No parameters.</em></div><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBTransaction-objectStore"><code>objectStore</code></dt><dd>
              Immediately returns the object store that has been already added 
              to the <a>scope</a> of this <a class="internalDFN" href="#dfn-transaction">transaction</a>. 
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The requested <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">
                If the requested <a class="internalDFN" href="#dfn-object-store">object store</a> is not in this 
                <a class="internalDFN" href="#dfn-transaction">transaction</a>'s <a>scope</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a></code></div></dd></dl></div><div class="section"><h5 id="constants-4">Constants</h5><dl class="constants"><dt id="widl-IDBTransaction-READ_ONLY"><code>READ_ONLY</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>Modification operations are not allowed in the <a class="internalDFN" href="#dfn-transaction">transaction</a>
            in this mode.</dd><dt id="widl-IDBTransaction-READ_WRITE"><code>READ_WRITE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>Modification operations are allowed in the <a>transactions</a>
            in this mode.</dd><dt id="widl-IDBTransaction-SNAPSHOT_READ"><code>SNAPSHOT_READ</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This mode is used solely for reading from a snapshot of the data
            in the <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> that are in the
            <a>scope</a> of the <a class="internalDFN" href="#dfn-transaction">transaction</a>.</dd><dt id="widl-IDBTransaction-VERSION_CHANGE"><code>VERSION_CHANGE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This mode is used solely for updating the version number of
            transactions started using the <code>setVersion()</code> method of <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a>.</dd></dl></div>

          <p>
            <a title="dynamic transaction">Dynamic transaction</a> objects implement the following interface:
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBDynamicTransaction">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBDynamicTransaction</span> : <span class="idlSuperclass"><a>EventTarget</a></span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a></span> <span class="idlAttrName"><a href="#widl-IDBDynamicTransaction-db">db</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></span> <span class="idlMethName"><a href="#widl-IDBDynamicTransaction-openObjectStore">openObjectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">mode</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>       <span class="idlMethName"><a href="#widl-IDBDynamicTransaction-abort">abort</a></span> ();</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>    <span class="idlAttrName"><a href="#widl-IDBDynamicTransaction-onabort">onabort</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>    <span class="idlAttrName"><a href="#widl-IDBDynamicTransaction-oncomplete">oncomplete</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>Function</a></span>    <span class="idlAttrName"><a href="#widl-IDBDynamicTransaction-ontimeout">ontimeout</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-14">Attributes</h5><dl class="attributes"><dt id="widl-IDBDynamicTransaction-db"><code>db</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a></span>, readonly</dt><dd>The <a class="internalDFN" href="#dfn-database">database</a> <a class="internalDFN" href="#dfn-connection">connection</a> of which this <a class="internalDFN" href="#dfn-transaction">transaction</a> is a part.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBDynamicTransaction-onabort"><code>onabort</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#handler-request-onabort">onabort</a> event.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBDynamicTransaction-oncomplete"><code>oncomplete</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#handler-request-oncomplete">oncomplete</a> event.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBDynamicTransaction-ontimeout"><code>ontimeout</code> of type <span class="idlAttrType"><a>Function</a></span></dt><dd>The event handler for the <a class="internalDFN" href="#handler-request-ontimeout">ontimeout</a> event.<div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-8">Methods</h5><dl class="methods"><dt id="widl-IDBDynamicTransaction-abort"><code>abort</code></dt><dd>
              This method returns immediately and undoes all the changes performed to 
              the <a>objects</a> of this <a class="internalDFN" href="#dfn-database">database</a> in this <a class="internalDFN" href="#dfn-transaction">transaction</a>. If this <a class="internalDFN" href="#dfn-transaction">transaction</a> 
              has already been committed or aborted,  then an
              <a class="internalDFN" href="#dfn-event-error" title="event-error">error event</a> is fired on this method's
              returned object with its 
              <a class="idlType" href="#widl-IDBErrorEvent-code"><code>code</code></a> set to
              <a class="idlType" href="#widl-IDBDatabaseException-NON_TRANSIENT_ERR"><code>NON_TRANSIENT_ERR</code></a>
              and a suitable 
              <a class="idlType" href="#widl-IDBErrorEvent-message"><code>message</code></a>.
            <div><em>No parameters.</em></div><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBDynamicTransaction-openObjectStore"><code>openObjectStore</code></dt><dd>
              Returns immediately and then attempts to lock the requesed <a class="internalDFN" href="#dfn-object-store">object store</a> in the given <a class="internalDFN" href="#dfn-mode">mode</a>. 
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The requested <a class="internalDFN" href="#dfn-object-store">object store</a>.</td></tr><tr><td class="prmName">mode</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-mode">mode</a> for isolating access to the <a class="internalDFN" href="#dfn-object-store">object store</a>, which defaults to 
                <code>READ_ONLY</code>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a></code></div></dd></dl></div>
          <div class="issue">
            <p>Finish the dynamic transaction IDL and define the behavior of dynamic transactions.</p>
          </div>
        </div>
      </div>
      <div id="sync-database" class="section">
        <h3><span class="secno">3.3 </span>Synchronous APIs</h3>
        <div id="opening-sync" class="section">
          <h4><span class="secno">3.3.1 </span>Opening a database</h4>
          <p>
            <a title="Worker" class="externalDFN"><code>Worker</code></a> objects <em title="must" class="rfc2119">must</em> implement the 
            <a class="idlType" href="#idl-def-IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a> interface.
          </p>
          <pre class="idl"><span class="idlImplements"><a>WorkerUtils</a> implements <a class="idlType" href="#idl-def-IDBEnvironmentSync"><code>IDBEnvironmentSync</code></a>;</span></pre><div class="idlImplementsDesc">
          </div>
          
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBEnvironmentSync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBEnvironmentSync</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBFactorySync"><code>IDBFactorySync</code></a></span> <span class="idlAttrName"><a href="#widl-IDBEnvironmentSync-indexedDBSync">indexedDBSync</a></span>;</span>
};</span>
</pre><div class="section"><h5 id="attributes-15">Attributes</h5><dl class="attributes"><dt id="widl-IDBEnvironmentSync-indexedDBSync"><code>indexedDBSync</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBFactorySync"><code>IDBFactorySync</code></a></span>, readonly</dt><dd>This attribute provides applications a mechanism for accessing
              capabilities of indexed databases.<div><em>No exceptions.</em></div></dd></dl></div>
          
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBFactorySync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBFactorySync</span> {
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a></span> <span class="idlMethName"><a href="#widl-IDBFactorySync-open">open</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">description</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="methods-9">Methods</h5><dl class="methods"><dt id="widl-IDBFactorySync-open"><code>open</code></dt><dd>
              
              
              <p>
                The synchronous API for databases blocks the calling thread until a
                <a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a> object is ready to return.
                When this method is invoked, the user agent <em title="must" class="rfc2119">must</em> run the
                following steps:
              </p>
    
              <ol>
                <li>
                  Let <var>origin</var> be the origin of the scripts in the worker.
                </li>
                <li>
                  Perform the <a class="internalDFN" href="#dfn-steps-for-opening-a-database">steps for opening a database</a>, with <var>origin</var>,
                  the <var>name</var> parameter and <var>description</var> parameter, and 
                  call its result as <var>result</var>.
                </li>
                <li>
                  If the steps were aborted with an error code, then throw a newly constructed
                  <a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a> 
                  exception with the code of that error and abort these steps.
                </li>
                <li>
                  Create a <a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a> object using <var>result</var>
                  and call it <var>db</var>.
                </li>
                <li>
                  Return <var>db</var>.
                </li>
              </ol>              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-database-name" title="database name">name</a> for the <a class="internalDFN" href="#dfn-database">database</a></td></tr><tr><td class="prmName">description</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The description for the <a class="internalDFN" href="#dfn-database">database</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>UNKNOWN_ERR</code></td><td class="excCodeDesc">if an error occurs while the <a class="internalDFN" href="#dfn-database">database</a> <a class="internalDFN" href="#dfn-connection">connection</a> 
                is being opened</td></tr><tr><td class="excCodeName"><code>NON_TRANSIENT_ERR</code></td><td class="excCodeDesc">if the <var>name</var> parameter is not <a>valid</a></td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a></code></div></dd></dl></div>
        </div>
        
        <div id="database-interface-sync" class="section">
          <h4><span class="secno">3.3.2 </span>Database</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBDatabaseSync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBDatabaseSync</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBDatabaseSync-name">name</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBDatabaseSync-description">description</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-IDBDatabaseSync-version">version</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMStringList</a></span> <span class="idlAttrName"><a href="#widl-IDBDatabaseSync-objectStores">objectStores</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></span> <span class="idlMethName"><a href="#widl-IDBDatabaseSync-createObjectStore">createObjectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">[<span class="extAttr">Null=Null</span>] in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">keyPath</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">autoIncrement</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></span> <span class="idlMethName"><a href="#widl-IDBDatabaseSync-openObjectStore">openObjectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">mode</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>               <span class="idlMethName"><a href="#widl-IDBDatabaseSync-removeObjectStore">removeObjectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">storeName</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>               <span class="idlMethName"><a href="#widl-IDBDatabaseSync-setVersion">setVersion</a></span> (<span class="idlParam">[<span class="extAttr">TreatNullAs=EmptyString</span>] in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">version</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBTransactionSync"><code>IDBTransactionSync</code></a></span> <span class="idlMethName"><a href="#widl-IDBDatabaseSync-transaction">transaction</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a>DOMStringList</a></span> <span class="idlParamName">storeNames</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">timeout</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-16">Attributes</h5><dl class="attributes"><dt id="widl-IDBDatabaseSync-description"><code>description</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return the description of the
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> at the time of opening.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBDatabaseSync-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return the <a class="internalDFN" href="#dfn-database-name" title="database name">name</a>
              of the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBDatabaseSync-objectStores"><code>objectStores</code> of type <span class="idlAttrType"><a>DOMStringList</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return a list of names of the 
              <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> currently in the 
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBDatabaseSync-version"><code>version</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, this attribute <em title="must" class="rfc2119">must</em> return the <a class="internalDFN" href="#dfn-version">version</a> of this
              <a class="internalDFN" href="#dfn-database">database</a>. This attribute has the <a>null</a> value when the
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> is first created.
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-10">Methods</h5><dl class="methods"><dt id="widl-IDBDatabaseSync-createObjectStore"><code>createObjectStore</code></dt><dd>
              <p>
                This method creates a and returns a new <a class="internalDFN" href="#dfn-object-store">object store</a> with the
                given name in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
              </p>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of a new <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr><tr><td class="prmName">keyPath</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a> of a new 
                <a class="internalDFN" href="#dfn-object-store">object store</a>. If <a>null</a> path is specified, then the 
                <a class="internalDFN" href="#dfn-object-store">object store</a> created will not have a <a>key path</a> and will
                use <a class="internalDFN" href="#dfn-out-of-line-keys">out-of-line keys</a>.</td></tr><tr><td class="prmName">autoIncrement</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Whether the <a class="internalDFN" href="#dfn-object-store">object store</a> created should have a 
                <a class="internalDFN" href="#dfn-key-generator">key generator</a>. The default
                value of this parameter is false.</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>CONSTRAINT_ERR</code></td><td class="excCodeDesc">
                If an <a class="internalDFN" href="#dfn-object-store">object store</a> with the same name, compared in a case-sensitive
                manner, already exists in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> 
                <a class="internalDFN" href="#dfn-database">database</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></code></div></dd><dt id="widl-IDBDatabaseSync-openObjectStore"><code>openObjectStore</code></dt><dd>
              <p>
                This method opens the <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name
                in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> for the
                <a class="internalDFN" href="#dfn-mode">mode</a> specified.
              </p>              
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of an existing 
                <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr><tr><td class="prmName">mode</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-mode">mode</a> used to access the <a class="internalDFN" href="#dfn-object-store">object store</a>. The default 
                for this is <a class="idlType" href="#idl-def-IDBObjectStore"><code>IDBObjectStore</code></a>.<a class="idlType" href="#widl-IDBObjectStore-READ_WRITE"><code>READ_WRITE</code></a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">
                If an <a class="internalDFN" href="#dfn-object-store">object store</a> with the same name, compared in a case-sensitive
                manner, already exists in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> 
                <a class="internalDFN" href="#dfn-database">database</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></code></div></dd><dt id="widl-IDBDatabaseSync-removeObjectStore"><code>removeObjectStore</code></dt><dd>
              <p>
                This method destroys an <a class="internalDFN" href="#dfn-object-store">object store</a> with the 
                given name as well as all <a class="internalDFN" href="#dfn-index" title="index">indexes</a> that are 
                <a class="internalDFN" href="#dfn-referenced" title="referenced">referencing</a> that <a class="internalDFN" href="#dfn-object-store">object store</a>.
              </p>
              
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">storeName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of an existing
                <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">
                If the <a class="internalDFN" href="#dfn-object-store">object store</a> with the given name, compared in a
                case-sensitive manner, does not already exist
                in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.      
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBDatabaseSync-setVersion"><code>setVersion</code></dt><dd>
              This method sets the <a class="internalDFN" href="#dfn-version">version</a> of the 
              <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">version</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-version">version</a> to store in the <a class="internalDFN" href="#dfn-database">database</a></td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBDatabaseSync-transaction"><code>transaction</code></dt><dd>
              Perform the <a>steps for creating a transaction</a> with the list of 
              database objects in the scope of this transaction and a timeout 
              duration in milliseconds, and return
              the resulting <a class="idlType" href="#idl-def-IDBTransactionSync"><code>IDBTransactionSync</code></a> object.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">storeNames</td><td class="prmType"><code><a>DOMStringList</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The names of <a class="internalDFN" href="#dfn-object-store" title="object store">object stores</a> and 
                <a class="internalDFN" href="#dfn-index" title="index">indexes</a> in the <a>scope</a> of the new
                <a class="internalDFN" href="#dfn-transaction">transaction</a></td></tr><tr><td class="prmName">timeout</td><td class="prmType"><code><a>unsigned long</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The interval in milliseconds which this operation is allowed to 
                take to reserve all the <a class="internalDFN" href="#dfn-database">database</a> objects identified in the new
                <a class="internalDFN" href="#dfn-transaction" title="transaction">transaction's</a> <a>scope</a>. The default
                is user agent specific</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>TIMEOUT_ERR</code></td><td class="excCodeDesc">
                If reserving all the <a class="internalDFN" href="#dfn-database">database</a> objects identified in the new
                <a class="internalDFN" href="#dfn-transaction" title="transaction">transaction's</a> <a>scope</a> takes longer 
                than the specified interval.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBTransactionSync"><code>IDBTransactionSync</code></a></code></div></dd></dl></div>  
        </div>
          
        <div class="section" id="object-store-sync">  
          <h4><span class="secno">3.3.3 </span>Object Store</h4>
          <div class="example"><div class="exampleHeader">Example</div>       
            <p>
              In the following example, we set up an <a class="internalDFN" href="#dfn-object-store">object store</a> to use the 
              <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a> <em>id</em>. This
              <a class="internalDFN" href="#dfn-object-store">object store</a> is also designed to use a <a class="internalDFN" href="#dfn-key-generator">key generator</a>.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var db = indexedDB.open('AddressBook', 'Address Book');
if (db.version !== '1') {
   var olddb = indexedDB.open('AddressBook', 'Address Book');
   olddb.createObjectStore('Contact', 'id', true);
   olddb.setVersion('1');
}</code></pre></div></div>
            <p>
              Using this <a class="internalDFN" href="#dfn-database">database</a>, we can store records in the <em>Contact</em>
              <a class="internalDFN" href="#dfn-object-store">object store</a>. 
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var store = db.openObjectStore('Contact');

var lincoln = {name: 'Lincoln', number: '7012'};
var contact = store.put(lincoln);
// contact.id === 1</code></pre></div></div>
            <p>
              A stored value can be retrieved using the same key used by the
              first put operation.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var contact = store.get(1);
// contact.name === 'Lincoln'</code></pre></div></div>
            <p>
              A second put operation will overwrite the record stored by the first 
              put operation.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var abraham = {id: 1, name: 'Abraham', number: '2107'};
store.put(abraham);</code></pre></div></div>
            <p>
              Now when the object store is read with the same key, the result 
              is different compared to the object read earlier.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var contact = store.get(1);
// contact.id === 1 &amp;&amp; contact.name === 'Abraham';</code></pre></div></div>
            <p>
              Additionally, all the <a>records</a> of an <a class="internalDFN" href="#dfn-object-store">object store</a> 
              matching a certain <a class="internalDFN" href="#dfn-key-range">key range</a> can be retrieved in key order.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var range = new IDBKeyRange.bound(2, 4);
var cursor = store.openCursor(range);
// each value is a contact and each key is the id for that  
// contact whose id is between 2 and 4, both inclusive
cursor.continue();</code></pre></div></div>
          </div>
          
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBObjectStoreSync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBObjectStoreSync</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBObjectStoreSync-READ_WRITE">READ_WRITE</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBObjectStoreSync-READ_ONLY">READ_ONLY</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBObjectStoreSync-SNAPSHOT_READ">SNAPSHOT_READ</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-IDBObjectStoreSync-mode">mode</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>      <span class="idlAttrName"><a href="#widl-IDBObjectStoreSync-name">name</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span>      <span class="idlAttrName"><a href="#widl-IDBObjectStoreSync-keyPath">keyPath</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMStringList</a></span>  <span class="idlAttrName"><a href="#widl-IDBObjectStoreSync-indexNames">indexNames</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>           <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-put">put</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>           <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-add">add</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>          <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-remove">remove</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>           <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-get">get</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBIndexSync"><code>IDBIndexSync</code></a></span>  <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-createIndex">createIndex</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">keyPath</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">unique</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBIndexSync"><code>IDBIndexSync</code></a></span>  <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-openIndex">openIndex</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>          <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-removeIndex">removeIndex</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">indexName</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBCursorSync"><code>IDBCursorSync</code></a></span> <span class="idlMethName"><a href="#widl-IDBObjectStoreSync-openCursor">openCursor</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlParamName">range</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">direction</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-17">Attributes</h5><dl class="attributes"><dt id="widl-IDBObjectStoreSync-indexNames"><code>indexNames</code> of type <span class="idlAttrType"><a>DOMStringList</a></span>, readonly</dt><dd>
            On getting, provide a list of the names of <a class="internalDFN" href="#dfn-index" title="index">indexes</a> on 
            objects in this <a class="internalDFN" href="#dfn-object-store">object store</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBObjectStoreSync-keyPath"><code>keyPath</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>
              of this <a class="internalDFN" href="#dfn-object-store">object store</a>. If this attribute is <code>null</code>,
              the application <em title="must" class="rfc2119">must</em> provide a key value for each modification operation.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBObjectStoreSync-mode"><code>mode</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>On getting, provide the <a class="internalDFN" href="#dfn-mode">mode</a> for isolating access to data 
            inside this <a class="internalDFN" href="#dfn-object-store">object store</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBObjectStoreSync-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>          
              On getting, provide the <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of this
              object store.        
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-11">Methods</h5><dl class="methods"><dt id="widl-IDBObjectStoreSync-add"><code>add</code></dt><dd>
              Store the given value in this <a class="internalDFN" href="#dfn-object-store">object store</a> by following
              the <a class="internalDFN" href="#dfn-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</a> with the no-overwrite flag set. The
              returned object from this method is the key for the stored record.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The value to be stored in the record</td></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The key used to identify the record</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>DATA_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a>out-of-line</a> keys and
                no <a class="internalDFN" href="#dfn-key-generator">key generator</a> but the <var>key</var> parameter was not
                passed</td></tr><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be serialized by the internal
                structured cloning algorithm</td></tr><tr><td class="excCodeName"><code>CONSTRAINT_ERR</code></td><td class="excCodeDesc">A record
                exists in this <a class="internalDFN" href="#dfn-object-store">object store</a> for the key <var>key</var> parameter.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBObjectStoreSync-createIndex"><code>createIndex</code></dt><dd>
              <p>
                This method creates a and returns a new <a class="internalDFN" href="#dfn-index">index</a> with the
                given name in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.
              </p>
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of a new <a class="internalDFN" href="#dfn-index">index</a></td></tr><tr><td class="prmName">keyPath</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-key-path" title="index key path">key path</a> used by the new
                <a class="internalDFN" href="#dfn-index">index</a></td></tr><tr><td class="prmName">unique</td><td class="prmType"><code><a>boolean</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-unique">unique</a> flag for the new <a class="internalDFN" href="#dfn-index">index</a>. The default
                value of this parameter is false.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBIndexSync"><code>IDBIndexSync</code></a></code></div></dd><dt id="widl-IDBObjectStoreSync-get"><code>get</code></dt><dd>
              Retrieve the value from this <a class="internalDFN" href="#dfn-object-store">object store</a> for the record 
              corresponding to the given key by following the
              <a class="internalDFN" href="#dfn-steps-for-retrieving-a-record-from-an-object-store">steps for retrieving a record from an object store</a>. The
              value returned from this method is the retrieved value.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be retrieved</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be deserialized by the internal
                structured cloning algorithm</td></tr><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">A record did not exist in this <a class="internalDFN" href="#dfn-object-store">object store</a> 
                for the key <var>key</var> parameter.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBObjectStoreSync-openCursor"><code>openCursor</code></dt><dd>
              Create a <a class="internalDFN" href="#dfn-cursor">cursor</a> over the <a>records</a> of this
              <a class="internalDFN" href="#dfn-object-store">object store</a>. The <a class="internalDFN" href="#dfn-range">range</a> of this <a class="internalDFN" href="#dfn-cursor">cursor</a> matches 
              the <a class="internalDFN" href="#dfn-key-range">key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>. 
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">range</td><td class="prmType"><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-key-range">key range</a> to use as the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a></td></tr><tr><td class="prmName">direction</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-cursor">cursor</a>'s required <a class="internalDFN" href="#dfn-direction">direction</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">No records exist in this <a class="internalDFN" href="#dfn-object-store">object store</a> 
                for the requested <a class="internalDFN" href="#dfn-key-range">key range</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBCursorSync"><code>IDBCursorSync</code></a></code></div></dd><dt id="widl-IDBObjectStoreSync-openIndex"><code>openIndex</code></dt><dd>
              <p>
                This method opens the <a class="internalDFN" href="#dfn-index">index</a> with the given name
                in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a> for the
                <a class="internalDFN" href="#dfn-mode">mode</a> specified.
              </p>              
                    
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of an existing <a class="internalDFN" href="#dfn-index">index</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">
                If the <a class="internalDFN" href="#dfn-index">index</a> with the given name does not exist 
                in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.      
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBIndexSync"><code>IDBIndexSync</code></a></code></div></dd><dt id="widl-IDBObjectStoreSync-put"><code>put</code></dt><dd>
              Store the given value in this <a class="internalDFN" href="#dfn-object-store">object store</a> by following
              the <a class="internalDFN" href="#dfn-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</a>. The
              returned object from this method is the key for the stored record.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The value to be stored in the record</td></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The key used to identify the record</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>DATA_ERR</code></td><td class="excCodeDesc">This <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a>out-of-line</a> keys and
                no <a class="internalDFN" href="#dfn-key-generator">key generator</a> but the <var>key</var> parameter was not
                passed</td></tr><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be serialized by the internal
                structured cloning algorithm</td></tr></table></td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBObjectStoreSync-remove"><code>remove</code></dt><dd>
              Remove the record from this <a class="internalDFN" href="#dfn-object-store">object store</a> by following
              the <a class="internalDFN" href="#dfn-steps-for-deleting-a-record-from-an-object-store">steps for deleting a record from an object store</a>
              corresponding to the given key.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be removed</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">A record did not exist in this <a class="internalDFN" href="#dfn-object-store">object store</a> 
                for the key <var>key</var> parameter.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBObjectStoreSync-removeIndex"><code>removeIndex</code></dt><dd>
              <p>
                This method destroys an <a class="internalDFN" href="#dfn-index">index</a> with the 
                given name. 
              </p>
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">indexName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of an existing <a class="internalDFN" href="#dfn-index">index</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">
                If the <a class="internalDFN" href="#dfn-index">index</a> with the given name does not exist 
                in the <a class="internalDFN" href="#dfn-connection" title="connection">connected</a> <a class="internalDFN" href="#dfn-database">database</a>.      
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div><div class="section"><h5 id="constants-5">Constants</h5><dl class="constants"><dt id="widl-IDBObjectStoreSync-READ_ONLY"><code>READ_ONLY</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>Modification operations are not allowed on the <a class="internalDFN" href="#dfn-object-store">object store</a>
            in this mode.</dd><dt id="widl-IDBObjectStoreSync-READ_WRITE"><code>READ_WRITE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>Modification operations are allowed on the <a class="internalDFN" href="#dfn-object-store">object store</a>
            in this mode.</dd><dt id="widl-IDBObjectStoreSync-SNAPSHOT_READ"><code>SNAPSHOT_READ</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>This mode is used solely for reading from a snapshot of the data
            in the <a class="internalDFN" href="#dfn-object-store">object store</a>.</dd></dl></div>                
        </div>
        <div id="index-sync" class="section">  
          <h4><span class="secno">3.3.4 </span>Index</h4>
          
          <div class="example"><div class="exampleHeader">Example</div>
            <p>
              An <a class="internalDFN" href="#dfn-index">index</a> can be created for retrieving records other than
              by using record keys. Continuing the earlier example, an auto-populated
              index could be maintained on the <em>name</em> property of objects
              in the <em>Contact</em> <a class="internalDFN" href="#dfn-object-store">object store</a>.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var db = indexedDB.<a>open</a>('AddressBook', 'Address Book');
if (db.version === '1') {
   var olddb = indexedDB.<a>open</a>('AddressBook', 'Address Book');
   olddb.<a>createObjectStore</a>('Contact', 'id', true);
   olddb.<a>createIndex</a>('ContactName', 'Contact', 'name', false);
   olddb.<a>setVersion</a>('2');
}</code></pre></div></div>
            <p>
              For example, the <em>id</em> of an object with the <em>name</em> 
              property value 'Lincoln' can be retrieved using the 
              <em>ContactName</em> <a class="internalDFN" href="#dfn-index">index</a>.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var index = db.<a>openIndex</a>('ContactName');
var id = index.<a>get</a>('Lincoln');
// id === 1</code></pre></div></div>              
            <p>
              Additionally, all the records of an <a class="internalDFN" href="#dfn-object-store">object store</a> matching
              a certain range index keys can be retrieved in key order. When
              objects are retrieved from the <em>Contact</em> <a class="internalDFN" href="#dfn-object-store">object store</a>, 
              they are arranged by the value of the <em>id</em> attribute. On the
              other hand, when objects are retrieved using the <em>ContactName</em>
              <a class="internalDFN" href="#dfn-index">index</a>, they are arranged by the value of the <em>name</em> 
              property. 
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var range = new <a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a>.<a>bound</a>('L', 'M');
var cursor = index.<a>openCursor</a>(range);
// each value is a contact and each key is the name for that  
// contact whose name's first letter is either L or M
cursor.continue();</code></pre></div></div>
            <p>
              If, on the other hand, we only want the names but not the <em>Contact</em>
              objects for a given range, then we can use a different mechanism for that.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var range = new <a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a>.<a>bound</a>('L', 'M');
var cursor = index.<a>openObjectCursor</a>(range);
// each value is a contact and each key is the name for that  
// contact whose name's first letter is either L or M
cursor.continue();</code></pre></div></div>
          </div>
              
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBIndexSync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBIndexSync</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBIndexSync-name">name</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBIndexSync-storeName">storeName</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-IDBIndexSync-keyPath">keyPath</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>boolean</a></span>   <span class="idlAttrName"><a href="#widl-IDBIndexSync-unique">unique</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-IDBIndexSync-openObjectCursor">openObjectCursor</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlParamName">range</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">direction</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-IDBIndexSync-openCursor">openCursor</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></span> <span class="idlParamName">range</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>unsigned short</a></span> <span class="idlParamName">direction</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>  <span class="idlMethName"><a href="#widl-IDBIndexSync-put">put</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>  <span class="idlMethName"><a href="#widl-IDBIndexSync-add">add</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>  <span class="idlMethName"><a href="#widl-IDBIndexSync-getObject">getObject</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>  <span class="idlMethName"><a href="#widl-IDBIndexSync-get">get</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-IDBIndexSync-remove">remove</a></span> (<span class="idlParam">in <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-18">Attributes</h5><dl class="attributes"><dt id="widl-IDBIndexSync-keyPath"><code>keyPath</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-index-key-path" title="index key path">key path</a> of this
              <a class="internalDFN" href="#dfn-index">index</a>. If this attribute is <code>null</code>,
              this <a class="internalDFN" href="#dfn-index">index</a> is not <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBIndexSync-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-index-name" title="index name">name</a> of this <a class="internalDFN" href="#dfn-index">index</a>.        
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBIndexSync-storeName"><code>storeName</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a> of this
              <a class="internalDFN" href="#dfn-index" title="index">index's</a> <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBIndexSync-unique"><code>unique</code> of type <span class="idlAttrType"><a>boolean</a></span>, readonly</dt><dd>
              On getting, provide the <a class="internalDFN" href="#dfn-unique">unique</a> flag of this <a class="internalDFN" href="#dfn-index">index</a>.
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-12">Methods</h5><dl class="methods"><dt id="widl-IDBIndexSync-add"><code>add</code></dt><dd>
              Store the given value in this <a class="internalDFN" href="#dfn-index">index</a> by following
              the <a class="internalDFN" href="#dfn-steps-for-storing-a-record-into-an-index">steps for storing a record into an index</a> and the no-overwrite flag set. The
              returned object from this method is the key for the stored record.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The value to be stored in the record</td></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The key used to identify the record</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>CONSTRAINT_ERR</code></td><td class="excCodeDesc"> 
                A record exists in this <a class="internalDFN" href="#dfn-index">index</a> for the key <var>key</var> 
                parameter or this <a class="internalDFN" href="#dfn-index">index</a> is <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a> or if no
                record exists with key <var>value</var> parameter in the <a class="internalDFN" href="#dfn-index">index</a>'s <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBIndexSync-get"><code>get</code></dt><dd>
              Retrieve the value from this <a class="internalDFN" href="#dfn-index">index</a> for the record 
              corresponding to the given key by following the 
              <a class="internalDFN" href="#dfn-steps-for-retrieving-a-value-from-an-index">steps for retrieving a value from an index</a>.
              The value returned from this method is the retrieved value.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be retrieved</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">A record did not exist in this <a class="internalDFN" href="#dfn-index">index</a> 
                for the key <var>key</var> parameter.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBIndexSync-getObject"><code>getObject</code></dt><dd>
              Retrieve the value from this <a class="internalDFN" href="#dfn-index">index</a>'s <a class="internalDFN" href="#dfn-referenced">referenced</a>
              <a class="internalDFN" href="#dfn-object-store">object store</a> for the record corresponding to the given key
              by following the <a class="internalDFN" href="#dfn-steps-for-retrieving-a-record-from-an-index">steps for retrieving a record from an index</a>.
              The value returned from this method is the retrieved value.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be retrieved</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">A record did not exist in this <a class="internalDFN" href="#dfn-index">index</a> 
                for the key <var>key</var> parameter.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBIndexSync-openCursor"><code>openCursor</code></dt><dd>
              Create a <a class="internalDFN" href="#dfn-cursor">cursor</a> over the <a>records</a> of this 
              <a class="internalDFN" href="#dfn-index">index</a>. The <a class="internalDFN" href="#dfn-range">range</a> of this <a class="internalDFN" href="#dfn-cursor">cursor</a> matches 
              the <a class="internalDFN" href="#dfn-key-range">key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>. 
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">range</td><td class="prmType"><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-key-range">key range</a> to use as the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a></td></tr><tr><td class="prmName">direction</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-cursor">cursor</a>'s required <a class="internalDFN" href="#dfn-direction">direction</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">No records exist in this <a class="internalDFN" href="#dfn-index">index</a> 
                for the requested <a class="internalDFN" href="#dfn-key-range">key range</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBIndexSync-openObjectCursor"><code>openObjectCursor</code></dt><dd>
              Create a <a class="internalDFN" href="#dfn-cursor">cursor</a> over the <a>records</a> of this 
              <a class="internalDFN" href="#dfn-index">index</a>'s <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a> as arranged by
              this <a class="internalDFN" href="#dfn-index">index</a>. The <a class="internalDFN" href="#dfn-range">range</a> of this <a class="internalDFN" href="#dfn-cursor">cursor</a> matches 
              the <a class="internalDFN" href="#dfn-key-range">key range</a> specified as the <var>range</var> parameter, or
              if that parameter is not specified or <code>null</code>, then the 
              range includes all the <a>records</a>.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">range</td><td class="prmType"><code><a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-key-range">key range</a> to use as the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a></td></tr><tr><td class="prmName">direction</td><td class="prmType"><code><a>unsigned short</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The <a class="internalDFN" href="#dfn-cursor">cursor</a>'s required <a class="internalDFN" href="#dfn-direction">direction</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">No records exist in this <a class="internalDFN" href="#dfn-index">index</a> 
                for the requested <a class="internalDFN" href="#dfn-key-range">key range</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBIndexSync-put"><code>put</code></dt><dd>
              Store the given value in this <a class="internalDFN" href="#dfn-index">index</a> by following
              the <a class="internalDFN" href="#dfn-steps-for-storing-a-record-into-an-index">steps for storing a record into an index</a>. The
              returned object from this method is the key for the stored record.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">value</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The value to be stored in the record</td></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The key used to identify the record</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-IDBIndexSync-remove"><code>remove</code></dt><dd>
              Remove the records from this <a class="internalDFN" href="#dfn-index">index</a> by following
              the <a class="internalDFN" href="#dfn-steps-for-deleting-a-record-from-an-index">steps for deleting a record from an index</a>
              corresponding to the given key.
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Key identifying the record to be removed</td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">A record did not exist in this <a class="internalDFN" href="#dfn-index">index</a> 
                for the key <var>key</var> parameter.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
        </div>
        <div class="section" id="cursor-sync">  
          <h4><span class="secno">3.3.5 </span>Cursor</h4>
          <p>
            Using the synchronous API, an application can process all the records
            in the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-range">range</a>. No two values provided by the
            user agent to callbacks processing data in this <a class="internalDFN" href="#dfn-cursor">cursor</a> can be
            identical.
          </p>
          <div class="example"><div class="exampleHeader">Example</div>
            <p>
              By default, a <a class="internalDFN" href="#dfn-cursor">cursor</a> walks over objects starting at the
              first record and ending at the last record including
              all the duplicates encountered along the way. If the
              cursor callback returns true, then the iteration is 
              stopped.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var objects = ...
var cursor = objects.openCursor();
// act on each object and continue the cursor to its end
cursor.continue();
</code></pre></div></div>
            
            <p>
              To start at the last record and end in the first record, the cursor 
              should be created with the direction parameter <a class="idlType" href="#widl-IDBCursor-PREV"><code>PREV</code></a>.
            </p>
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var objects = ...
var cursor = objects.openCursor(<a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a>.<a>PREV</a>);
// act on each object and continue the cursor to its end
cursor.continue();
</code></pre></div></div>

            <p>
              To start at a certain key and end in the last record, i.e.,
              for a lower-bounded cursor, while skipping duplicates,
              the cursor should be created with both the required 
              start key and the direction parameter. 
            </p>
            
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var objects = ...
var range = <a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a>.leftBound(key);
objects.openCursor(range, <a class="idlType" href="#idl-def-IDBCursor"><code>IDBCursor</code></a>.<a>NEXT_NO_DUPLICATE</a>);
// act on each object and continue the cursor to its end
cursor.continue();
</code></pre></div></div>
        
            <p>
              It is also possible to create a bounded cursor, i.e., with
              application-specified starting and ending points, the
              cursor should be created with both the required keys.
              If the range is inclusive of both keys, then additional
              flags are required. In the following example, all keys
              with values in the inclusive range (<code>start</code>, 
              <code>end</code>) are returned with all their duplicates,
              from the beginning of the range to its end.
            </p>
  
            <div class="block"><div class="blockTitleDiv"><span class="blockTitle">ECMAScript</span></div><div class="blockContent"><pre class="code"><code class="es-code">var objects = ...
var range = <a class="idlType" href="#idl-def-IDBKeyRange"><code>IDBKeyRange</code></a>.bound(start, end);
objects.openCursor(range);
// act on each object and continue the cursor to its end
cursor.continue();
</code></pre></div></div>
          </div>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBCursorSync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBCursorSync</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursorSync-NEXT">NEXT</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursorSync-NEXT_NO_DUPLICATE">NEXT_NO_DUPLICATE</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursorSync-PREV">PREV</a></span> = <span class="idlConstValue">2</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-IDBCursorSync-PREV_NO_DUPLICATE">PREV_NO_DUPLICATE</a></span> = <span class="idlConstValue">3</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span>     <span class="idlAttrName"><a href="#widl-IDBCursorSync-direction">direction</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>any</a></span>                <span class="idlAttrName"><a href="#widl-IDBCursorSync-key">key</a></span>;</span>
<span class="idlAttribute">             attribute <span class="idlAttrType"><a>any</a></span>                <span class="idlAttrName"><a href="#widl-IDBCursorSync-value">value</a></span> setraises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned long long</a></span> <span class="idlAttrName"><a href="#widl-IDBCursorSync-count">count</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>boolean</a></span> <span class="idlMethName"><a href="#widl-IDBCursorSync-continue">continue</a></span> (<span class="idlParam">in optional <span class="idlParamType"><a>any</a></span> <span class="idlParamName">key</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>    <span class="idlMethName"><a href="#widl-IDBCursorSync-remove">remove</a></span> () raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-19">Attributes</h5><dl class="attributes"><dt id="widl-IDBCursorSync-count"><code>count</code> of type <span class="idlAttrType"><a>unsigned long long</a></span>, readonly</dt><dd>             
              On getting, provide the approximate number of objects in the cursor.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBCursorSync-direction"><code>direction</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>            
            On getting, provide the traversal <a class="internalDFN" href="#dfn-direction">direction</a> of the <a class="internalDFN" href="#dfn-cursor">cursor</a>.
            <div><em>No exceptions.</em></div></dd><dt id="widl-IDBCursorSync-key"><code>key</code> of type <span class="idlAttrType"><a>any</a></span>, readonly</dt><dd>The key for the record at the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>.<div><em>No exceptions.</em></div></dd><dt id="widl-IDBCursorSync-value"><code>value</code> of type <span class="idlAttrType"><a>any</a></span></dt><dd>The value for the record at the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>.
              
            <table class="exceptions"><tr><th>Exception</th><th>On Get</th><th>On Set</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excGetSetFalse">✘</td><td class="excGetSetTrue">✔</td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>DATA_ERR</code></td><td class="excCodeDesc">If the underlying <a class="internalDFN" href="#dfn-object-store">object store</a> uses <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a>
                and the property at the <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>
                does not match the key in this <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>.
                </td></tr><tr><td class="excCodeName"><code>SERIAL_ERR</code></td><td class="excCodeDesc">The data being stored could not be serialized by the internal
                structured cloning algorithm</td></tr><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">The underlying <a class="internalDFN" href="#dfn-index">index</a> or <a class="internalDFN" href="#dfn-object-store">object store</a> does not
                support updating the item because it is open in the 
                <a class="idlType" href="#widl-IDBTransaction-READ_ONLY"><code>READ_ONLY</code></a> or 
                <a class="idlType" href="#widl-IDBTransaction-SNAPSHOT_READ"><code>SNAPSHOT_READ</code></a>
                <a class="internalDFN" href="#dfn-mode">mode</a>.</td></tr><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">An index record cannot be changed because the underlying 
                <a class="internalDFN" href="#dfn-index">index</a> is <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a>.</td></tr></table></td></tr></table></dd></dl></div><div class="section"><h5 id="methods-13">Methods</h5><dl class="methods"><dt id="widl-IDBCursorSync-continue"><code>continue</code></dt><dd>
              Advance the <a class="internalDFN" href="#dfn-cursor">cursor</a> to the next position along its <a class="internalDFN" href="#dfn-direction">direction</a>
              to the item whose key matches the optional parameter. If no such
              parameter is provided, advance to the immediate next position. If
              the <a class="internalDFN" href="#dfn-cursor">cursor</a> has reached the end of its <a class="internalDFN" href="#dfn-range">range</a>, then this
              method returns false, otherwise it returns true.
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">key</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">The next key to position this <a class="internalDFN" href="#dfn-cursor">cursor</a> at</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>boolean</a></code></div></dd><dt id="widl-IDBCursorSync-remove"><code>remove</code></dt><dd>          
              <p>
                Delete the object at the <a class="internalDFN" href="#dfn-cursor">cursor</a>'s <a class="internalDFN" href="#dfn-position">position</a>. The cursor's
                position is not changed. Any attempts to retrieve the cursor's
                current value will return <code>null</code>.
              </p>
              
            <div><em>No parameters.</em></div><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_ALLOWED_ERR</code></td><td class="excCodeDesc">The underlying <a class="internalDFN" href="#dfn-index">index</a> or <a class="internalDFN" href="#dfn-object-store">object store</a> does not
                support updating the item because it is open in the 
                <a class="idlType" href="#widl-IDBTransaction-READ_ONLY"><code>READ_ONLY</code></a> or 
                <a class="idlType" href="#widl-IDBTransaction-SNAPSHOT_READ"><code>SNAPSHOT_READ</code></a>
                <a class="internalDFN" href="#dfn-mode">mode</a>.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div><div class="section"><h5 id="constants-6">Constants</h5><dl class="constants"><dt id="widl-IDBCursorSync-NEXT"><code>NEXT</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that this <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, including  
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically increasing 
              order of keys.
            </dd><dt id="widl-IDBCursorSync-NEXT_NO_DUPLICATE"><code>NEXT_NO_DUPLICATE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that this <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, not including
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically increasing 
              order of keys. For every key with duplicate values, only the first
              record is yielded.
            </dd><dt id="widl-IDBCursorSync-PREV"><code>PREV</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, including  
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically decreasing 
              order of keys.
            </dd><dt id="widl-IDBCursorSync-PREV_NO_DUPLICATE"><code>PREV_NO_DUPLICATE</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>
              indicates that this <a class="internalDFN" href="#dfn-cursor">cursor</a> should yield all records, not including
              duplicates and its <a class="internalDFN" href="#dfn-direction">direction</a> is monotonically decreasing 
              order of keys. For every key with duplicate values, only the first
              record is yielded.
            </dd></dl></div>
        </div>
        <div id="transaction-sync" class="section">
          <h4><span class="secno">3.3.6 </span>Transaction</h4>
          <!-- TODO Add example. Should examples be in a separate section?-->
          <p>
            When an application <a title="create a transaction">creates</a> a 
            <a class="internalDFN" href="#dfn-transaction">transaction</a> synchronously, it blocks until the user agent is able
            to reserve the required <a class="internalDFN" href="#dfn-database">database</a> <a>objects</a>.
          </p>
          <pre class="idl"><span class="idlInterface" id="idl-def-IDBTransactionSync">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">IDBTransactionSync</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>boolean</a></span>         <span class="idlAttrName"><a href="#widl-IDBTransactionSync-static">static</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a></span> <span class="idlAttrName"><a href="#widl-IDBTransactionSync-db">db</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></span> <span class="idlMethName"><a href="#widl-IDBTransactionSync-objectStore">objectStore</a></span> (<span class="idlParam">in <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">name</span></span>) raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>               <span class="idlMethName"><a href="#widl-IDBTransactionSync-abort">abort</a></span> () raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>               <span class="idlMethName"><a href="#widl-IDBTransactionSync-commit">commit</a></span> () raises (<span class="idlRaises"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></span>);</span>
};</span>
</pre><div class="section"><h5 id="attributes-20">Attributes</h5><dl class="attributes"><dt id="widl-IDBTransactionSync-db"><code>db</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-IDBDatabaseSync"><code>IDBDatabaseSync</code></a></span></dt><dd>The <a class="internalDFN" href="#dfn-database">database</a> <a class="internalDFN" href="#dfn-connection">connection</a> of which this <a class="internalDFN" href="#dfn-transaction">transaction</a>
              is a part<div><em>No exceptions.</em></div></dd><dt id="widl-IDBTransactionSync-static"><code>static</code> of type <span class="idlAttrType"><a>boolean</a></span></dt><dd>If <code>true</code>, then this <a class="internalDFN" href="#dfn-transaction">transaction</a> is <a class="internalDFN" href="#dfn-static">static</a>
              and <code>false</code> otherwise.
            <div><em>No exceptions.</em></div></dd></dl></div><div class="section"><h5 id="methods-14">Methods</h5><dl class="methods"><dt id="widl-IDBTransactionSync-abort"><code>abort</code></dt><dd>
              This method signals the need to cancel the effects of
              operations performed in this <a class="internalDFN" href="#dfn-transaction">transaction</a>. To perform
              this method, the user agent ignores all the changes performed to the
              <a>objects</a> of this <a class="internalDFN" href="#dfn-database">database</a> since the creation of this 
              <a class="internalDFN" href="#dfn-transaction">transaction</a>.
              
            <div><em>No parameters.</em></div><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NON_TRANSIENT_ERR</code></td><td class="excCodeDesc">If this <a class="internalDFN" href="#dfn-transaction">transaction</a> has already been committed or aborted.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBTransactionSync-commit"><code>commit</code></dt><dd>
              This method signals the normal and satisfactory completion
              of a <a class="internalDFN" href="#dfn-transaction">transaction</a>. At this point, the user agent should durably
              store all the changes performed to the <a>objects</a> of this 
              <a class="internalDFN" href="#dfn-database">database</a> since the creation of this <a class="internalDFN" href="#dfn-transaction">transaction</a>.
              
            <div><em>No parameters.</em></div><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>RECOVERABLE_ERR</code></td><td class="excCodeDesc">If this <a class="internalDFN" href="#dfn-transaction">transaction</a>'s <a>scope</a> is <a class="internalDFN" href="#dfn-dynamic">dynamic</a>, and
                the user agent cannot commit all the changes due to another 
                <a class="internalDFN" href="#dfn-transaction">transaction</a>.
                </td></tr><tr><td class="excCodeName"><code>NON_TRANSIENT_ERR</code></td><td class="excCodeDesc">If this <a class="internalDFN" href="#dfn-transaction">transaction</a> has already been committed or aborted.</td></tr></table></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-IDBTransactionSync-objectStore"><code>objectStore</code></dt><dd>
              Immediately returns the object store that has been already added 
              to the <a>scope</a> of this <a class="internalDFN" href="#dfn-transaction">transaction</a>. 
              
              
            <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">name</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The requested <a class="internalDFN" href="#dfn-object-store">object store</a></td></tr></table><table class="exceptions"><tr><th>Exception</th><th>Description</th></tr><tr><td class="excName"><a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a></td><td class="excDesc"><table class="exceptionCodes"><tr><td class="excCodeName"><code>NOT_FOUND_ERR</code></td><td class="excCodeDesc">
                If the requested <a class="internalDFN" href="#dfn-object-store">object store</a> is not in this 
                <a class="internalDFN" href="#dfn-transaction">transaction</a>'s <a>scope</a>.
                </td></tr></table></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-IDBObjectStoreSync"><code>IDBObjectStoreSync</code></a></code></div></dd></dl></div>
          <div class="note">
            Applications <em title="must" class="rfc2119">must</em> not assume that committing the <a class="internalDFN" href="#dfn-transaction">transaction</a>
            produces an instantaneously durable result. The user agent
            <em title="may" class="rfc2119">may</em> delay flushing data to durable storage until an appropriate
            time.
          </div>
                              
          <p>
            Once a <a class="internalDFN" href="#dfn-transaction">transaction</a> is aborted or committed, the <a class="internalDFN" href="#dfn-active">active</a> 
            <a class="internalDFN" href="#dfn-transaction">transaction</a> on this <a class="internalDFN" href="#dfn-database">database</a> <a class="internalDFN" href="#dfn-connection">connection</a> is removed.
            A new <a class="internalDFN" href="#dfn-transaction">transaction</a> can be created to perform operations atomically.
          </p>
        </div> <!-- IDBTransaction -->
       </div>
      </div>
      <div class="section" id="algorithms">
        <!--OddPage--><h2><span class="secno">4. </span>Algorithms</h2>
        <div class="section" id="opening">
          <h3><span class="secno">4.1 </span>Opening the database</h3>
          <p>
            The <dfn id="dfn-steps-for-opening-a-database">steps for opening a database</dfn> are as follows. These 
            steps <em title="must" class="rfc2119">must</em> be run with an origin, a database name and an optional
            description. All the steps <em title="must" class="rfc2119">must</em> be run atomically:
          </p>
          
          <ol>
            <li>
              If there is already a database with the given name from the origin
              <var>origin</var>, then let <var>db</var> be that database. If a description is passed to these steps, set the description of <var>db</var> to that.
            </li>
            
            <li>
              If no database with the given name from the origin <var>origin</var>
              exists, then create the database <var>db</var> with the name and
              description passed to these steps.
            </li>
  
            <li>
              Create a <a class="internalDFN" href="#dfn-connection">connection</a> to <var>db</var> and call it <var>result</var>.
            </li>
            
            <li>
              Return <var>result</var>.
            </li>
          </ol>        
        </div>
        
        <div id="object-store-storage-steps" class="section">
          <h3><span class="secno">4.2 </span>Object Store Storage steps</h3>
          <p>
            The <dfn id="dfn-steps-for-storing-a-record-into-an-object-store">steps for storing a record into an object store</dfn> are as follows. 
            These steps <em title="must" class="rfc2119">must</em> be run with four parameters: the <a class="internalDFN" href="#dfn-object-store">object store</a>,
            a value, an optional key, and an optional no-overwrite flag.
          </p>
          <ol>
            <li>
              Let <var>store</var> be the <a class="internalDFN" href="#dfn-object-store">object store</a>, <var>key</var> be
              the key and <var>value</var> be the value passed to these steps.
            </li>
            <li>
              If <var>store</var> uses <a class="internalDFN" href="#dfn-out-of-line-keys">out-of-line keys</a> but no <a class="internalDFN" href="#dfn-key-generator">key 
              generator</a>, then a key <em title="must" class="rfc2119">must</em> be passed to these steps. If not, 
              terminate these steps and set error code <a class="idlType" href="#widl-IDBDatabaseException-DATA_ERR"><code>DATA_ERR</code></a>.
            </li>
            <li>
              If <var>store</var> uses <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a>, then 
              let <var>key</var> be the property of <var>object</var> at  
              <var>store</var>'s <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>.
            </li>
           <li>
              Produce a <a class="internalDFN" href="#dfn-structured-clone">structured clone</a> of <var>value</var> and call it
              <var>object</var>.
            </li>
            <li>
              If <var>key</var> is not defined or null, then perform the 
              following steps.
              <ol>
                <li>
                  If <var>store</var> does not have a <a class="internalDFN" href="#dfn-key-generator">key generator</a>, then 
                  terminate these steps and set error code <a class="idlType" href="#widl-IDBDatabaseException-NOT_ALLOWED_ERR"><code>NOT_ALLOWED_ERR</code></a>.
                </li>
                <li>
                  Using <var>store</var>'s <a class="internalDFN" href="#dfn-key-generator">key generator</a>, produce the 
                  next key and store it as <var>key</var>.
                </li>
                <li>
                  If <var>store</var> uses <a class="internalDFN" href="#dfn-in-line-keys">in-line keys</a>, then store 
                  <var>key</var> as the property value for <var>object</var> at  
                  <var>store</var>'s <a class="internalDFN" href="#dfn-object-store-key-path" title="object store key path">key path</a>.
                </li>
              </ol>
            </li>
            <li>
              If the no-overwrite flag was passed to these steps and is set, and 
              a record already exists with its key being <var>key</var>, then 
              terminate these steps and set error code <a class="idlType" href="#widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code></a>.
            </li>
            <li>
              <p>
                Store a record in <var>store</var> containing <var>key</var> as its key  
                and <var>object</var> as its value. If any <a class="internalDFN" href="#dfn-index" title="index">indexes</a>  
                are <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a> for <var>store</var>, then store a record
                in that index according to <a class="internalDFN" href="#dfn-index-maintenance-conditions">index maintenance conditions</a>.
              </p>
              <div class="note">
                Storing would mean inserting if no record exists for that key
                or updating an existing record, otherwise. <a class="internalDFN" href="#dfn-auto-populated" title="auto-populated">
                Auto populated</a> <a class="internalDFN" href="#dfn-index">index</a> record will also be respectively
                inserted or updated depending on what storing results in.
              </div>
            </li>
            
            <li>
              Return the <var>key</var>.
            </li>
          </ol>
        </div>
        
        <div id="index-storage-steps" class="section">
          <h3><span class="secno">4.3 </span>Index Storage steps</h3>
          <p>
            The <dfn id="dfn-steps-for-storing-a-record-into-an-index">steps for storing a record into an index</dfn> are as follows. 
            These steps <em title="must" class="rfc2119">must</em> be run with four parameters: the <a class="internalDFN" href="#dfn-index">index</a>,
            a key, a value, and a no-overwrite flag.
          </p>
          <ol>
            <li>
              Let <var>index</var> be the <a class="internalDFN" href="#dfn-index">index</a>, <var>key</var> be
              the key and <var>value</var> be the value passed to these steps.
            </li>
            <li>
              If <var>index</var> has a <a class="internalDFN" href="#dfn-index-key-path" title="index key path">key path</a>,
              then terminate these steps and set error code <a class="idlType" href="#widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code></a>.
            </li>
            <li>
              If the no-overwrite flag was passed to these steps and is set, and 
              a record already exists in <var>index</var> with its key being 
              <var>key</var>, then terminate these steps and set error code 
              <a class="idlType" href="#widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code></a>.
            </li>
            <li>
              If no record exists in <var>index</var>'s <a class="internalDFN" href="#dfn-referenced">referenced</a>
              <a class="internalDFN" href="#dfn-object-store">object store</a> whose key is <var>value</var>, then terminate
              these steps and set error code <a class="idlType" href="#widl-IDBDatabaseException-CONSTRAINT_ERR"><code>CONSTRAINT_ERR</code></a>.
            </li>
            <li>
              <p>
                Store a record in <var>index</var> containing <var>key</var> as its key  
                and <var>value</var> as its value. 
              </p>
              <div class="note">
                Storing would mean inserting if no record exists for that key
                or updating an existing record, otherwise. 
              </div>
            </li>
            
            <li>
              Return the <var>key</var>.
            </li>
          </ol>        
        </div>
        
        <div id="object-store-retrieval-steps" class="section">
          <h3><span class="secno">4.4 </span>Object Store Retrieval steps</h3>
          <p>
            The <dfn id="dfn-steps-for-retrieving-a-record-from-an-object-store">steps for retrieving a record from an object store</dfn> are
            as follows. These steps <em title="must" class="rfc2119">must</em> be run with two parameters - the record 
            key and the <a class="internalDFN" href="#dfn-object-store">object store</a>.
          </p>
            
          <ol>
            <li>
              Let <var>key</var> be the key and <var>store</var> be the <a class="internalDFN" href="#dfn-object-store">object
              store</a> passed to these steps.
            </li>
            <li>
              If no record exists with key <var>key</var> in <var>store</var>,
              then terminate these steps and set error code
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>.
            </li>
            <li>
              Return the a new <a class="internalDFN" href="#dfn-structured-clone">structured clone</a> of the value in the record with 
              key <var>key</var> in <var>store</var>.
            </li>
          </ol>
        </div>
        
        <div id="index-referenced-value-retrieval-steps" class="section">
          <h3><span class="secno">4.5 </span>Index Referenced Value Retrieval steps</h3>
          <p>
            The <dfn id="dfn-steps-for-retrieving-a-record-from-an-index">steps for retrieving a record from an index</dfn> are
            as follows. These steps <em title="must" class="rfc2119">must</em> be run with two parameters - the record 
            key and the <a class="internalDFN" href="#dfn-index">index</a>.
          </p>
            
          <ol>
            <li>
              Let <var>key</var> be the key and <var>index</var> be the <a class="internalDFN" href="#dfn-index">index</a>
              passed to these steps.
            </li>
            <li>
              If no record exists with key <var>key</var> in <var>index</var>,
              then terminate these steps and set error code
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>.
            </li>
            <li>
              Let <var>value</var> be the value of the record with key <var>key</var>
              in <var>index</var>.
            </li>
            <li>
              Return the value for the record with key <var>value</var> in 
              <var>index</var>'s <a class="internalDFN" href="#dfn-referenced">referenced</a> <a class="internalDFN" href="#dfn-object-store">object store</a>.
            </li>
          </ol>
        </div>
        
        <div id="index-value-retrieval-steps" class="section">
          <h3><span class="secno">4.6 </span>Index Value Retrieval steps</h3>
          <p>
            The <dfn id="dfn-steps-for-retrieving-a-value-from-an-index">steps for retrieving a value from an index</dfn> are
            as follows. These steps <em title="must" class="rfc2119">must</em> be run with two parameters - the record 
            key and the <a class="internalDFN" href="#dfn-index">index</a>.
          </p>
            
          <ol>
            <li>
              Let <var>key</var> be the key and <var>index</var> be the <a class="internalDFN" href="#dfn-index">index</a>
              passed to these steps.
            </li>
            <li>
              If no record exists with key <var>key</var> in <var>index</var>,
              then terminate these steps and set error code
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>.
            </li>
            <li>
              Return the value of the record with key <var>key</var>
              in <var>index</var>.
            </li>
          </ol>
        </div>
        
        <div id="object-store-deletion-steps" class="section">
          <h3><span class="secno">4.7 </span>Object Store Deletion steps</h3>
          <p>
            The <dfn id="dfn-steps-for-deleting-a-record-from-an-object-store">steps for deleting a record from an object store</dfn> 
            are as follows. These steps <em title="must" class="rfc2119">must</em> be run with two parameters: the key
            of the record to be deleted and the <a class="internalDFN" href="#dfn-object-store">object store</a>.
          </p>
          <ol>
            <li>
              Let <var>key</var> be the key and <var>store</var> be the <a class="internalDFN" href="#dfn-object-store">object
              store</a> passed to these steps.
            </li>
            <li>
              If no record exists with key <var>key</var> in <var>store</var>,
              then terminate these steps and set error code
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>.
            </li>            
            <li>
               If any <a class="internalDFN" href="#dfn-index" title="index">indexes</a> are <a class="internalDFN" href="#dfn-auto-populated">auto-populated</a> for
               <var>store</var>, then remove the record in that index according 
               to <a class="internalDFN" href="#dfn-index-maintenance-conditions">index maintenance conditions</a>.
            </li>
            
            <li>
              Remove the record from <var>store</var> with key <var>key</var>. 
            </li>
          </ol>
        </div>
        <div id="index-deletion-steps" class="section">
          <h3><span class="secno">4.8 </span>Index Deletion steps</h3>
          <p>
            The <dfn id="dfn-steps-for-deleting-a-record-from-an-index">steps for deleting a record from an index</dfn> 
            are as follows. These steps <em title="must" class="rfc2119">must</em> be run with two parameters: the key
            of the record to be deleted and the <a class="internalDFN" href="#dfn-index">index</a>.
          </p>
          <ol>
            <li>
              Let <var>key</var> be the key and <var>index</var> be the <a class="internalDFN" href="#dfn-index">index</a>
              passed to these steps.
            </li>
            <li>
              If no record exists with key <var>key</var> in <var>index</var>,
              then terminate these steps and set error code
              <a class="idlType" href="#widl-IDBDatabaseException-NOT_FOUND_ERR"><code>NOT_FOUND_ERR</code></a>.
            </li>            
            <li>
              Remove the records from <var>index</var> with key <var>key</var>. 
            </li>
          </ol>
        </div>
        <div id="transaction-creation-steps" class="section">
          <h3><span class="secno">4.9 </span>Transaction Creation steps</h3>
          <p>
            When the user agent is to <dfn id="dfn-create-a-static-transaction">create a static <a class="internalDFN" href="#dfn-transaction">transaction</a></dfn>
            it <em title="must" class="rfc2119">must</em> run the following steps. These steps <em title="must" class="rfc2119">must</em> be run with 
            two parameters - <a class="internalDFN" href="#dfn-database">database</a>, an optional global flag, and an 
            optional list of names of <a class="internalDFN" href="#dfn-database">database</a> <a>objects</a> to be 
            reserved.
          </p>
          
          <ol>
            <li>
              Pick the appropriate steps:
              <dl class="switch">
                <dt>If these steps are called with the global flag set</dt>
                <dd>Acquire a lock on the entire database.</dd>
                <dt>If these steps are called with a non-empty list of <a class="internalDFN" href="#dfn-object-store">object store</a> <a class="internalDFN" href="#dfn-object-store-name" title="object store name">name</a>s</dt>
                <dd>
                    Acquire appropriate locks on each of the named 
                    <a class="internalDFN" href="#dfn-object-store">object store</a> in an ordered sequence. 
                    <div class="note">
                      A user agent <em title="may" class="rfc2119">may</em> obtain a shared or exclusive lock on 
                      the database if it does not perform fine grained locking.
                    </div>
                </dd>
              </dl>
            </li>

            <li>
              If a timeout duration is passed to these steps and is exceeded 
              when acquiring locks, then set <var>code</var> to 
              <a class="idlType" href="#widl-IDBDatabaseException-TIMEOUT_ERR"><code>TIMEOUT_ERR</code></a> and jump to the last step.
            </li>

            <li>
              Open a new transaction to the database, and create a
              <a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a> object
              that represents that transaction. Let <var>transaction</var> be 
              this object.
            </li>
            
            <li>
              Set the current transaction of this <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a> object
              to <var>transaction</var>.
            </li>
            <li>
              Return <var>transaction</var>. End these steps.
            </li>
            <li>
              This step is only performed in case of error. If this step is performed
              synchronously, then raise a newly constructed 
              <a class="idlType" href="#idl-def-IDBDatabaseException"><code>IDBDatabaseException</code></a> 
              exception <var>exception</var> with the code <var>code</var>.
            </li>
          </ol>
          <div class="issue">
            <p>Add steps for creating dynamic transactions.</p>
          </div>     
        </div>
        <div id="version_change-transaction-steps" class="section">
          <h3><span class="secno">4.10 </span>VERSION_CHANGE transaction steps</h3>
          <p>
            The <dfn id="dfn-steps-for-running-a-version_change-transaction">steps for running a <code>VERSION_CHANGE</code> transaction</dfn> are
            as follows. These steps <em title="must" class="rfc2119">must</em> be run with three parameters - a <var>database</var>,
            a new <var>version number</var> to be set for the <var>database</var> and a <var>request</var>
            object representing the <a class="idlType" href="#idl-def-IDBRequest"><code>IDBRequest</code></a> instance associated with this transaction.
          </p>
          <ol>
            <li>
              Let <var>openDatabases</var> be the set of all <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a> object representing
              the given <var>database</var>.
            </li>
            <li>
              Fire a <a><code>versionchange</code></a> event targeted at each object in the <var>openDatabases</var> set.
              The <code>version</code> property of this event must be set to the given <var>version number</var>.
            </li>
            <li>
              Wait until all objects in <var>openDatabases</var> are closed.
            </li>
            <li>
              Start a new <a class="internalDFN" href="#dfn-transaction"><code>transaction</code></a> with <a class="internalDFN" href="#dfn-mode"><code>mode</code></a> set to <a><code>VERSION_CHANGE</code></a>.
              Note that as long as this transaction is running, no other <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a> objects can be open.
            </li>
            <li>
              Set the version of the <var>database</var> to the given <var>version number</var>.
            </li>
            <li>
              Fire a <a><code>success</code></a> event targeted at the <var>request</var> object. The <a><code>result</code></a>
              propety of the event should be set to a new <a class="idlType" href="#idl-def-IDBTransaction"><code>IDBTransaction</code></a> object representing the
              <a><code>VERSION_CHANGE</code></a> transaction created in step 4.
            </li>
            <li>
              Follow the normal steps for executing a <a class="internalDFN" href="#dfn-transaction"><code>transaction</code></a> and let the  <a class="internalDFN" href="#dfn-transaction"><code>transaction</code></a>
              complete normally.
            </li>
          </ol>
        </div>
        <div id="database-closing-steps" class="section">
          <h3><span class="secno">4.11 </span>Database closing steps</h3>
          <p>The <dfn id="dfn-steps-for-closing-a-database-connection">steps for closing a database connection</dfn> are as follows. These steps <em title="must" class="rfc2119">must</em> be run with one parameter
            - a <var>database</var> object of type <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a>.</p>
          <ol>
            <li>
              Set the internal <code>closePending</code> flag of the <var>database</var> object to true. If the <code>transaction()</code> method
              is called on the <var>database</var> object while the <code>closePending</code> is set, an exception will be thrown.
            </li>
            <li>
              Wait for all pending transactions on the <var>database</var> to complete. Once they are complete, the <var>database</var> is
              fully closed.
            </li>
            <li>
              Unblock any pending <code>setVersion()</code> calls made on other <a class="idlType" href="#idl-def-IDBDatabase"><code>IDBDatabase</code></a> objects connected to the same
              database.
            </li>
          </ol>
        </div>
      </div>

  <!-- database-api -->


	    <div id="privacy" class="section">
      <!--OddPage--><h2><span class="secno">5. </span>Privacy</h2>
      
      <div id="user-tracking" class="section">
        <h3><span class="secno">5.1 </span>User tracking</h3>
        
        <p>
          A third-party host (or any object capable of getting content 
          distributed to multiple sites) could use a unique identifier 
          stored in its client-side database to track a user across multiple 
          sessions, building a profile of the user's activities. In conjunction
          with a site that is aware of the user's real id object (for 
          example an e-commerce site that requires authenticated credentials),
          this could allow oppressive groups to target individuals with
          greater accuracy than in a world with purely anonymous Web usage.
        </p>
        
        <p>
          There are a number of techniques that can be used to mitigate the
          risk of user tracking:
        </p>
        
        <dl>
          <dt>Blocking third-party storage</dt>
          <dd>
            User agents <em title="may" class="rfc2119">may</em> restrict access to the database objects
            to scripts originating at the domain of the top-level document of
            the <span>browsing context</span>, for instance denying access to
            the API for pages from other domains running in <code>iframe</code>s.
          </dd>

          <dt>Expiring stored data</dt>
          <dd>
            <p>User agents <em title="may" class="rfc2119">may</em> automatically delete stored data after a period
            of time.</p>

            <p>This can restrict the ability of a site to track a user, as the
            site would then only be able to track the user across multiple
            sessions when he authenticates with the site itself (e.g. by
            making a purchase or logging in to a service).</p>
        
            <p>However, this also puts the user's data at risk.</p>
          </dd>

          <dt>Treating persistent storage as cookies</dt>
          <dd>          
            <p>User agents should present the database feature
            to the user in a way that associates them strongly with HTTP
            session cookies. [<cite><a href="#bib-COOKIES" rel="biblioentry" class="bibref">COOKIES</a></cite>]</p>
        
            <p>This might encourage users to view such storage with healthy
            suspicion.</p>
          </dd>

          <dt>Site-specific white-listing of access to databases</dt>
          <dd>
            <p>User agents <em title="may" class="rfc2119">may</em> require the user to authorize access to
            databases before a site can use the feature.</p>
          </dd>
      
          <dt>Origin-tracking of stored data</dt>          
          <dd>
            <p>User agents <em title="may" class="rfc2119">may</em> record the <span title="origin">origins</span>
            of sites that contained content from third-party origins that
            caused data to be stored.</p>
            
            <p>If this information is then used to present the view of data
            currently in persistent storage, it would allow the user to make
            informed decisions about which parts of the persistent storage to
            prune. Combined with a blacklist ("delete this data and prevent
            this domain from ever storing data again"), the user can restrict
            the use of persistent storage to sites that he trusts.</p>
          </dd>
      
          <dt>Shared blacklists</dt>
          <dd>          
            <p>User agents <em title="may" class="rfc2119">may</em> allow users to share their persistent storage
            domain blacklists.</p>
      
            <p>This would allow communities to act together to protect their
            privacy.</p>
          </dd>
        </dl>

        <p>
          While these suggestions prevent trivial use of this API for user
          tracking, they do not block it altogether. Within a single domain, a
          site can continue to track the user during a session, and can then
          pass all this information to the third party along with any
          identifying information (names, credit card numbers, addresses)
          obtained by the site. If a third party cooperates with multiple
          sites to obtain such information, a profile can still be
          created.
        </p>
        
        <p>
          However, user tracking is to some extent possible even with no
          cooperation from the user agent whatsoever, for instance by using
          session identifiers in URLs, a technique already commonly used for
          innocuous purposes but easily repurposed for user tracking (even
          retroactively). This information can then be shared with other
          sites, using using visitors' IP addresses and other user-specific
          data (e.g. user-agent headers and configuration settings) to combine
          separate sessions into coherent user profiles.          
        </p>
      </div>

      <div id="cookie-resurrection" class="section">
        <h3><span class="secno">5.2 </span>Cookie resurrection</h3>
        
        <p>
          If the user interface for persistent storage presents data in the
          persistent storage features described in this specification
          separately from data in HTTP session cookies, then users are likely
          to delete data in one and not the other. This would allow sites to
          use the two features as redundant backup for each other, defeating a
          user's attempts to protect his privacy.
        </p>
      </div>
      
      <div id="sensitivity-of-data" class="section">
        <h3><span class="secno">5.3 </span>Sensitivity of data</h3>
        
        <p>
          User agents should treat persistently stored data as potentially
          sensitive; it's quite possible for e-mails, calendar appointments,
          health records, or other confidential documents to be stored in this
          mechanism.
        </p>
        
        <p>To this end, user agents should ensure that when deleting data,
          it is promptly deleted from the underlying storage.
        </p>
      </div>
    </div> <!-- Privacy -->

    <div id="authorization" class="section">
      <!--OddPage--><h2><span class="secno">6. </span>Authorization</h2>
      
      <div id="dns-spoofing-attacks" class="section">
        <h3><span class="secno">6.1 </span>DNS spoofing attacks</h3>
        
        <p>
          Because of the potential for DNS spoofing attacks, one cannot
          guarantee that a host claiming to be in a certain domain really is
          from that domain. To mitigate this, pages can use SSL. Pages using
          SSL can be sure that only pages using SSL that have certificates
          identifying them as being from the same domain can access their
          databases.
        </p>
      </div>
  
      <div id="cross-directory-attacks" class="section">
        <h3><span class="secno">6.2 </span>Cross-directory attacks</h3>
        
        <p>
          Different authors sharing one host name, for example users
          hosting content on <code>geocities.com</code>, all share one
          set of databases.
        </p>
        
        <p>
          There is no feature to restrict the access by pathname. Authors on
          shared hosts are therefore recommended to avoid using these
          features, as it would be trivial for other authors to read the data
          and overwrite it.
        </p>
        
        <p class="note">Even if a path-restriction feature was made
          available, the usual DOM scripting security model would make it
          trivial to bypass this protection and access the data from any
          path.
        </p>
      </div>
      
      <div id="implementation-risks" class="section">
        <h3><span class="secno">6.3 </span>Implementation risks</h3>
        
        <p>The two primary risks when implementing these persistent storage
        features are letting hostile sites read information from other
        domains, and letting hostile sites write information that is then
        read from other domains.</p>
        
        <p>Letting third-party sites read data that is not supposed to be
        read from their domain causes <em>information leakage</em>, For
        example, a user's shopping wish list on one domain could be used by
        another domain for targeted advertising; or a user's
        work-in-progress confidential documents stored by a word-processing
        site could be examined by the site of a competing company.</p>
        
        <p>Letting third-party sites write data to the persistent storage of
        other domains can result in <em>information spoofing</em>, which is
        equally dangerous. For example, a hostile site could add records to a
        user's wish list; or a hostile site could set a user's session
        identifier to a known ID that the hostile site can then use to track
        the user's actions on the victim site.</p>
        
        <p>Thus, strictly following the <span>origin</span> model described
        in this specification is important for user security.</p>
      </div>
    </div> <!-- authorization -->
    
    <div class="appendix section" id="requirements">
      <!--OddPage--><h2><span class="secno">A. </span>Requirements</h2>
      <div class="ednote">
        Requirements will be written with an aim to verify that these were actually
        met by the API specified in this document.
      </div>
    </div>
    <div class="section appendix" id="acknowledgements">
      <!--OddPage--><h2><span class="secno">B. </span>Acknowledgements</h2>
      <div>
        The editor of this specification was employed by Oracle Corp during its early 
        drafts.
      </div>
      <div>
        Garret Swart was extremely influential in the design of this specification.
        Feedback from Margo Seltzer, Jonas Sicking, Arun Ranganathan, Shawn Wilsher,
        Pablo Castro, Kris Zyp, Chris Anderson, and Dana Florescu have led to
        improvements to this specification over time.
      </div>
    </div>


  <div class="appendix section" id="references"><!--OddPage--><h2><span class="secno">C. </span>References</h2><div class="section" id="normative-references"><h3><span class="secno">C.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-COOKIES">[COOKIES]</dt><dd>Adam Barth. <cite><a href="http://tools.ietf.org/html/draft-abarth-cookie">HTTP State Management Mechanism</a>.</cite> IETF, November 2009
</dd><dt id="bib-DOM-LEVEL-3-EVENTS">[DOM-LEVEL-3-EVENTS]</dt><dd>Björn Höhrmann; Tom Pixley; Philippe Le Hégaret. <a href="http://www.w3.org/TR/2007/WD-DOM-Level-3-Events-20071221/"><cite>Document Object Model (DOM) Level 3 Events Specification.</cite></a> 21 December 2007. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2007/WD-DOM-Level-3-Events-20071221/">http://www.w3.org/TR/2007/WD-DOM-Level-3-Events-20071221</a> 
</dd><dt id="bib-ECMA-262">[ECMA-262]</dt><dd><a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm"><cite>ECMAScript Language Specification, Third Edition.</cite></a> December 1999. URL: <a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">http://www.ecma-international.org/publications/standards/Ecma-262.htm</a> 
</dd><dt id="bib-HTML5">[HTML5]</dt><dd>Ian Hickson; David Hyatt. <a href="http://www.w3.org/TR/2010/WD-html5-20100304/"><cite>HTML 5.</cite></a> 4 March 2010. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2010/WD-html5-20100304/">http://www.w3.org/TR/2010/WD-html5-20100304/</a> 
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet RFC 2119. URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a> 
</dd><dt id="bib-WEBIDL">[WEBIDL]</dt><dd>Cameron McCormack. <a href="http://www.w3.org/TR/2008/WD-WebIDL-20081219/"><cite>Web IDL.</cite></a> 19 December 2008. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2008/WD-WebIDL-20081219/">http://www.w3.org/TR/2008/WD-WebIDL-20081219</a> 
</dd><dt id="bib-WEBWORKERS">[WEBWORKERS]</dt><dd>Ian Hickson. <cite><a href="http://www.w3.org/TR/2009/WD-workers-20091222/">Web Workers</a>.</cite> 22 December 2009. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2009/WD-workers-20091222/">http://www.w3.org/TR/2009/WD-workers-20091222/</a> 
</dd></dl></div><div class="section" id="informative-references"><h3><span class="secno">C.2 </span>Informative references</h3><dl class="bibliography"><dt id="bib-WEBSTORAGE">[WEBSTORAGE]</dt><dd>Ian Hickson. <a href="http://www.w3.org/TR/2009/WD-webstorage-20090910/"><cite>Web Storage.</cite></a> 10 September 2009. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2009/WD-webstorage-20090910/">http://www.w3.org/TR/2009/WD-webstorage-20090910/</a> 
</dd></dl></div></div></body></html>
